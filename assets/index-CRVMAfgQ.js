(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}})();function Nv(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var gf={exports:{}},ul={},yf={exports:{}},Ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ay;function i0(){if(Ay)return Ce;Ay=1;var i=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),w=Symbol.iterator;function T(N){return N===null||typeof N!="object"?null:(N=w&&N[w]||N["@@iterator"],typeof N=="function"?N:null)}var U={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$=Object.assign,H={};function j(N,K,de){this.props=N,this.context=K,this.refs=H,this.updater=de||U}j.prototype.isReactComponent={},j.prototype.setState=function(N,K){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,K,"setState")},j.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function ve(){}ve.prototype=j.prototype;function se(N,K,de){this.props=N,this.context=K,this.refs=H,this.updater=de||U}var te=se.prototype=new ve;te.constructor=se,$(te,j.prototype),te.isPureReactComponent=!0;var pe=Array.isArray,Se=Object.prototype.hasOwnProperty,me={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function S(N,K,de){var Ae,Pe={},Ve=null,Le=null;if(K!=null)for(Ae in K.ref!==void 0&&(Le=K.ref),K.key!==void 0&&(Ve=""+K.key),K)Se.call(K,Ae)&&!k.hasOwnProperty(Ae)&&(Pe[Ae]=K[Ae]);var Fe=arguments.length-2;if(Fe===1)Pe.children=de;else if(1<Fe){for(var Ke=Array(Fe),Et=0;Et<Fe;Et++)Ke[Et]=arguments[Et+2];Pe.children=Ke}if(N&&N.defaultProps)for(Ae in Fe=N.defaultProps,Fe)Pe[Ae]===void 0&&(Pe[Ae]=Fe[Ae]);return{$$typeof:i,type:N,key:Ve,ref:Le,props:Pe,_owner:me.current}}function P(N,K){return{$$typeof:i,type:N.type,key:K,ref:N.ref,props:N.props,_owner:N._owner}}function x(N){return typeof N=="object"&&N!==null&&N.$$typeof===i}function V(N){var K={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(de){return K[de]})}var b=/\/+/g;function R(N,K){return typeof N=="object"&&N!==null&&N.key!=null?V(""+N.key):K.toString(36)}function ot(N,K,de,Ae,Pe){var Ve=typeof N;(Ve==="undefined"||Ve==="boolean")&&(N=null);var Le=!1;if(N===null)Le=!0;else switch(Ve){case"string":case"number":Le=!0;break;case"object":switch(N.$$typeof){case i:case e:Le=!0}}if(Le)return Le=N,Pe=Pe(Le),N=Ae===""?"."+R(Le,0):Ae,pe(Pe)?(de="",N!=null&&(de=N.replace(b,"$&/")+"/"),ot(Pe,K,de,"",function(Et){return Et})):Pe!=null&&(x(Pe)&&(Pe=P(Pe,de+(!Pe.key||Le&&Le.key===Pe.key?"":(""+Pe.key).replace(b,"$&/")+"/")+N)),K.push(Pe)),1;if(Le=0,Ae=Ae===""?".":Ae+":",pe(N))for(var Fe=0;Fe<N.length;Fe++){Ve=N[Fe];var Ke=Ae+R(Ve,Fe);Le+=ot(Ve,K,de,Ke,Pe)}else if(Ke=T(N),typeof Ke=="function")for(N=Ke.call(N),Fe=0;!(Ve=N.next()).done;)Ve=Ve.value,Ke=Ae+R(Ve,Fe++),Le+=ot(Ve,K,de,Ke,Pe);else if(Ve==="object")throw K=String(N),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.");return Le}function Vt(N,K,de){if(N==null)return N;var Ae=[],Pe=0;return ot(N,Ae,"","",function(Ve){return K.call(de,Ve,Pe++)}),Ae}function Nt(N){if(N._status===-1){var K=N._result;K=K(),K.then(function(de){(N._status===0||N._status===-1)&&(N._status=1,N._result=de)},function(de){(N._status===0||N._status===-1)&&(N._status=2,N._result=de)}),N._status===-1&&(N._status=0,N._result=K)}if(N._status===1)return N._result.default;throw N._result}var je={current:null},Z={transition:null},ge={ReactCurrentDispatcher:je,ReactCurrentBatchConfig:Z,ReactCurrentOwner:me};function re(){throw Error("act(...) is not supported in production builds of React.")}return Ce.Children={map:Vt,forEach:function(N,K,de){Vt(N,function(){K.apply(this,arguments)},de)},count:function(N){var K=0;return Vt(N,function(){K++}),K},toArray:function(N){return Vt(N,function(K){return K})||[]},only:function(N){if(!x(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},Ce.Component=j,Ce.Fragment=t,Ce.Profiler=o,Ce.PureComponent=se,Ce.StrictMode=r,Ce.Suspense=p,Ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ge,Ce.act=re,Ce.cloneElement=function(N,K,de){if(N==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+N+".");var Ae=$({},N.props),Pe=N.key,Ve=N.ref,Le=N._owner;if(K!=null){if(K.ref!==void 0&&(Ve=K.ref,Le=me.current),K.key!==void 0&&(Pe=""+K.key),N.type&&N.type.defaultProps)var Fe=N.type.defaultProps;for(Ke in K)Se.call(K,Ke)&&!k.hasOwnProperty(Ke)&&(Ae[Ke]=K[Ke]===void 0&&Fe!==void 0?Fe[Ke]:K[Ke])}var Ke=arguments.length-2;if(Ke===1)Ae.children=de;else if(1<Ke){Fe=Array(Ke);for(var Et=0;Et<Ke;Et++)Fe[Et]=arguments[Et+2];Ae.children=Fe}return{$$typeof:i,type:N.type,key:Pe,ref:Ve,props:Ae,_owner:Le}},Ce.createContext=function(N){return N={$$typeof:c,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},N.Provider={$$typeof:a,_context:N},N.Consumer=N},Ce.createElement=S,Ce.createFactory=function(N){var K=S.bind(null,N);return K.type=N,K},Ce.createRef=function(){return{current:null}},Ce.forwardRef=function(N){return{$$typeof:d,render:N}},Ce.isValidElement=x,Ce.lazy=function(N){return{$$typeof:E,_payload:{_status:-1,_result:N},_init:Nt}},Ce.memo=function(N,K){return{$$typeof:y,type:N,compare:K===void 0?null:K}},Ce.startTransition=function(N){var K=Z.transition;Z.transition={};try{N()}finally{Z.transition=K}},Ce.unstable_act=re,Ce.useCallback=function(N,K){return je.current.useCallback(N,K)},Ce.useContext=function(N){return je.current.useContext(N)},Ce.useDebugValue=function(){},Ce.useDeferredValue=function(N){return je.current.useDeferredValue(N)},Ce.useEffect=function(N,K){return je.current.useEffect(N,K)},Ce.useId=function(){return je.current.useId()},Ce.useImperativeHandle=function(N,K,de){return je.current.useImperativeHandle(N,K,de)},Ce.useInsertionEffect=function(N,K){return je.current.useInsertionEffect(N,K)},Ce.useLayoutEffect=function(N,K){return je.current.useLayoutEffect(N,K)},Ce.useMemo=function(N,K){return je.current.useMemo(N,K)},Ce.useReducer=function(N,K,de){return je.current.useReducer(N,K,de)},Ce.useRef=function(N){return je.current.useRef(N)},Ce.useState=function(N){return je.current.useState(N)},Ce.useSyncExternalStore=function(N,K,de){return je.current.useSyncExternalStore(N,K,de)},Ce.useTransition=function(){return je.current.useTransition()},Ce.version="18.3.1",Ce}var Ry;function fp(){return Ry||(Ry=1,yf.exports=i0()),yf.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Py;function s0(){if(Py)return ul;Py=1;var i=fp(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,o=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function c(d,p,y){var E,w={},T=null,U=null;y!==void 0&&(T=""+y),p.key!==void 0&&(T=""+p.key),p.ref!==void 0&&(U=p.ref);for(E in p)r.call(p,E)&&!a.hasOwnProperty(E)&&(w[E]=p[E]);if(d&&d.defaultProps)for(E in p=d.defaultProps,p)w[E]===void 0&&(w[E]=p[E]);return{$$typeof:e,type:d,key:T,ref:U,props:w,_owner:o.current}}return ul.Fragment=t,ul.jsx=c,ul.jsxs=c,ul}var Cy;function o0(){return Cy||(Cy=1,gf.exports=s0()),gf.exports}var ky=o0(),ml=fp();const a0=Nv(ml);var vc={},_f={exports:{}},nn={},vf={exports:{}},Ef={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xy;function l0(){return xy||(xy=1,function(i){function e(Z,ge){var re=Z.length;Z.push(ge);e:for(;0<re;){var N=re-1>>>1,K=Z[N];if(0<o(K,ge))Z[N]=ge,Z[re]=K,re=N;else break e}}function t(Z){return Z.length===0?null:Z[0]}function r(Z){if(Z.length===0)return null;var ge=Z[0],re=Z.pop();if(re!==ge){Z[0]=re;e:for(var N=0,K=Z.length,de=K>>>1;N<de;){var Ae=2*(N+1)-1,Pe=Z[Ae],Ve=Ae+1,Le=Z[Ve];if(0>o(Pe,re))Ve<K&&0>o(Le,Pe)?(Z[N]=Le,Z[Ve]=re,N=Ve):(Z[N]=Pe,Z[Ae]=re,N=Ae);else if(Ve<K&&0>o(Le,re))Z[N]=Le,Z[Ve]=re,N=Ve;else break e}}return ge}function o(Z,ge){var re=Z.sortIndex-ge.sortIndex;return re!==0?re:Z.id-ge.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;i.unstable_now=function(){return a.now()}}else{var c=Date,d=c.now();i.unstable_now=function(){return c.now()-d}}var p=[],y=[],E=1,w=null,T=3,U=!1,$=!1,H=!1,j=typeof setTimeout=="function"?setTimeout:null,ve=typeof clearTimeout=="function"?clearTimeout:null,se=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function te(Z){for(var ge=t(y);ge!==null;){if(ge.callback===null)r(y);else if(ge.startTime<=Z)r(y),ge.sortIndex=ge.expirationTime,e(p,ge);else break;ge=t(y)}}function pe(Z){if(H=!1,te(Z),!$)if(t(p)!==null)$=!0,Nt(Se);else{var ge=t(y);ge!==null&&je(pe,ge.startTime-Z)}}function Se(Z,ge){$=!1,H&&(H=!1,ve(S),S=-1),U=!0;var re=T;try{for(te(ge),w=t(p);w!==null&&(!(w.expirationTime>ge)||Z&&!V());){var N=w.callback;if(typeof N=="function"){w.callback=null,T=w.priorityLevel;var K=N(w.expirationTime<=ge);ge=i.unstable_now(),typeof K=="function"?w.callback=K:w===t(p)&&r(p),te(ge)}else r(p);w=t(p)}if(w!==null)var de=!0;else{var Ae=t(y);Ae!==null&&je(pe,Ae.startTime-ge),de=!1}return de}finally{w=null,T=re,U=!1}}var me=!1,k=null,S=-1,P=5,x=-1;function V(){return!(i.unstable_now()-x<P)}function b(){if(k!==null){var Z=i.unstable_now();x=Z;var ge=!0;try{ge=k(!0,Z)}finally{ge?R():(me=!1,k=null)}}else me=!1}var R;if(typeof se=="function")R=function(){se(b)};else if(typeof MessageChannel<"u"){var ot=new MessageChannel,Vt=ot.port2;ot.port1.onmessage=b,R=function(){Vt.postMessage(null)}}else R=function(){j(b,0)};function Nt(Z){k=Z,me||(me=!0,R())}function je(Z,ge){S=j(function(){Z(i.unstable_now())},ge)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(Z){Z.callback=null},i.unstable_continueExecution=function(){$||U||($=!0,Nt(Se))},i.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<Z?Math.floor(1e3/Z):5},i.unstable_getCurrentPriorityLevel=function(){return T},i.unstable_getFirstCallbackNode=function(){return t(p)},i.unstable_next=function(Z){switch(T){case 1:case 2:case 3:var ge=3;break;default:ge=T}var re=T;T=ge;try{return Z()}finally{T=re}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(Z,ge){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var re=T;T=Z;try{return ge()}finally{T=re}},i.unstable_scheduleCallback=function(Z,ge,re){var N=i.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?N+re:N):re=N,Z){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=re+K,Z={id:E++,callback:ge,priorityLevel:Z,startTime:re,expirationTime:K,sortIndex:-1},re>N?(Z.sortIndex=re,e(y,Z),t(p)===null&&Z===t(y)&&(H?(ve(S),S=-1):H=!0,je(pe,re-N))):(Z.sortIndex=K,e(p,Z),$||U||($=!0,Nt(Se))),Z},i.unstable_shouldYield=V,i.unstable_wrapCallback=function(Z){var ge=T;return function(){var re=T;T=ge;try{return Z.apply(this,arguments)}finally{T=re}}}}(Ef)),Ef}var Dy;function u0(){return Dy||(Dy=1,vf.exports=l0()),vf.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vy;function c0(){if(Vy)return nn;Vy=1;var i=fp(),e=u0();function t(n){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+n,l=1;l<arguments.length;l++)s+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,o={};function a(n,s){c(n,s),c(n+"Capture",s)}function c(n,s){for(o[n]=s,n=0;n<s.length;n++)r.add(s[n])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,E={},w={};function T(n){return p.call(w,n)?!0:p.call(E,n)?!1:y.test(n)?w[n]=!0:(E[n]=!0,!1)}function U(n,s,l,h){if(l!==null&&l.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return h?!1:l!==null?!l.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function $(n,s,l,h){if(s===null||typeof s>"u"||U(n,s,l,h))return!0;if(h)return!1;if(l!==null)switch(l.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function H(n,s,l,h,f,g,v){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=h,this.attributeNamespace=f,this.mustUseProperty=l,this.propertyName=n,this.type=s,this.sanitizeURL=g,this.removeEmptyString=v}var j={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){j[n]=new H(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var s=n[0];j[s]=new H(s,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){j[n]=new H(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){j[n]=new H(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){j[n]=new H(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){j[n]=new H(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){j[n]=new H(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){j[n]=new H(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){j[n]=new H(n,5,!1,n.toLowerCase(),null,!1,!1)});var ve=/[\-:]([a-z])/g;function se(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var s=n.replace(ve,se);j[s]=new H(s,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var s=n.replace(ve,se);j[s]=new H(s,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var s=n.replace(ve,se);j[s]=new H(s,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){j[n]=new H(n,1,!1,n.toLowerCase(),null,!1,!1)}),j.xlinkHref=new H("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){j[n]=new H(n,1,!1,n.toLowerCase(),null,!0,!0)});function te(n,s,l,h){var f=j.hasOwnProperty(s)?j[s]:null;(f!==null?f.type!==0:h||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&($(s,l,f,h)&&(l=null),h||f===null?T(s)&&(l===null?n.removeAttribute(s):n.setAttribute(s,""+l)):f.mustUseProperty?n[f.propertyName]=l===null?f.type===3?!1:"":l:(s=f.attributeName,h=f.attributeNamespace,l===null?n.removeAttribute(s):(f=f.type,l=f===3||f===4&&l===!0?"":""+l,h?n.setAttributeNS(h,s,l):n.setAttribute(s,l))))}var pe=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Se=Symbol.for("react.element"),me=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),V=Symbol.for("react.context"),b=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),ot=Symbol.for("react.suspense_list"),Vt=Symbol.for("react.memo"),Nt=Symbol.for("react.lazy"),je=Symbol.for("react.offscreen"),Z=Symbol.iterator;function ge(n){return n===null||typeof n!="object"?null:(n=Z&&n[Z]||n["@@iterator"],typeof n=="function"?n:null)}var re=Object.assign,N;function K(n){if(N===void 0)try{throw Error()}catch(l){var s=l.stack.trim().match(/\n( *(at )?)/);N=s&&s[1]||""}return`
`+N+n}var de=!1;function Ae(n,s){if(!n||de)return"";de=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(B){var h=B}Reflect.construct(n,[],s)}else{try{s.call()}catch(B){h=B}n.call(s.prototype)}else{try{throw Error()}catch(B){h=B}n()}}catch(B){if(B&&h&&typeof B.stack=="string"){for(var f=B.stack.split(`
`),g=h.stack.split(`
`),v=f.length-1,A=g.length-1;1<=v&&0<=A&&f[v]!==g[A];)A--;for(;1<=v&&0<=A;v--,A--)if(f[v]!==g[A]){if(v!==1||A!==1)do if(v--,A--,0>A||f[v]!==g[A]){var C=`
`+f[v].replace(" at new "," at ");return n.displayName&&C.includes("<anonymous>")&&(C=C.replace("<anonymous>",n.displayName)),C}while(1<=v&&0<=A);break}}}finally{de=!1,Error.prepareStackTrace=l}return(n=n?n.displayName||n.name:"")?K(n):""}function Pe(n){switch(n.tag){case 5:return K(n.type);case 16:return K("Lazy");case 13:return K("Suspense");case 19:return K("SuspenseList");case 0:case 2:case 15:return n=Ae(n.type,!1),n;case 11:return n=Ae(n.type.render,!1),n;case 1:return n=Ae(n.type,!0),n;default:return""}}function Ve(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case k:return"Fragment";case me:return"Portal";case P:return"Profiler";case S:return"StrictMode";case R:return"Suspense";case ot:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case V:return(n.displayName||"Context")+".Consumer";case x:return(n._context.displayName||"Context")+".Provider";case b:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Vt:return s=n.displayName||null,s!==null?s:Ve(n.type)||"Memo";case Nt:s=n._payload,n=n._init;try{return Ve(n(s))}catch{}}return null}function Le(n){var s=n.type;switch(n.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=s.render,n=n.displayName||n.name||"",s.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ve(s);case 8:return s===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Fe(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Ke(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Et(n){var s=Ke(n)?"checked":"value",l=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),h=""+n[s];if(!n.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,g=l.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return f.call(this)},set:function(v){h=""+v,g.call(this,v)}}),Object.defineProperty(n,s,{enumerable:l.enumerable}),{getValue:function(){return h},setValue:function(v){h=""+v},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function dr(n){n._valueTracker||(n._valueTracker=Et(n))}function Ls(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var l=s.getValue(),h="";return n&&(h=Ke(n)?n.checked?"true":"false":n.value),n=h,n!==l?(s.setValue(n),!0):!1}function jr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Mi(n,s){var l=s.checked;return re({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??n._wrapperState.initialChecked})}function Fs(n,s){var l=s.defaultValue==null?"":s.defaultValue,h=s.checked!=null?s.checked:s.defaultChecked;l=Fe(s.value!=null?s.value:l),n._wrapperState={initialChecked:h,initialValue:l,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function ma(n,s){s=s.checked,s!=null&&te(n,"checked",s,!1)}function ga(n,s){ma(n,s);var l=Fe(s.value),h=s.type;if(l!=null)h==="number"?(l===0&&n.value===""||n.value!=l)&&(n.value=""+l):n.value!==""+l&&(n.value=""+l);else if(h==="submit"||h==="reset"){n.removeAttribute("value");return}s.hasOwnProperty("value")?Us(n,s.type,l):s.hasOwnProperty("defaultValue")&&Us(n,s.type,Fe(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(n.defaultChecked=!!s.defaultChecked)}function iu(n,s,l){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var h=s.type;if(!(h!=="submit"&&h!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+n._wrapperState.initialValue,l||s===n.value||(n.value=s),n.defaultValue=s}l=n.name,l!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,l!==""&&(n.name=l)}function Us(n,s,l){(s!=="number"||jr(n.ownerDocument)!==n)&&(l==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+l&&(n.defaultValue=""+l))}var fr=Array.isArray;function pr(n,s,l,h){if(n=n.options,s){s={};for(var f=0;f<l.length;f++)s["$"+l[f]]=!0;for(l=0;l<n.length;l++)f=s.hasOwnProperty("$"+n[l].value),n[l].selected!==f&&(n[l].selected=f),f&&h&&(n[l].defaultSelected=!0)}else{for(l=""+Fe(l),s=null,f=0;f<n.length;f++){if(n[f].value===l){n[f].selected=!0,h&&(n[f].defaultSelected=!0);return}s!==null||n[f].disabled||(s=n[f])}s!==null&&(s.selected=!0)}}function ya(n,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return re({},s,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Bs(n,s){var l=s.value;if(l==null){if(l=s.children,s=s.defaultValue,l!=null){if(s!=null)throw Error(t(92));if(fr(l)){if(1<l.length)throw Error(t(93));l=l[0]}s=l}s==null&&(s=""),l=s}n._wrapperState={initialValue:Fe(l)}}function zs(n,s){var l=Fe(s.value),h=Fe(s.defaultValue);l!=null&&(l=""+l,l!==n.value&&(n.value=l),s.defaultValue==null&&n.defaultValue!==l&&(n.defaultValue=l)),h!=null&&(n.defaultValue=""+h)}function _a(n){var s=n.textContent;s===n._wrapperState.initialValue&&s!==""&&s!==null&&(n.value=s)}function ft(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pt(n,s){return n==null||n==="http://www.w3.org/1999/xhtml"?ft(s):n==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var mr,va=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,l,h,f){MSApp.execUnsafeLocalFunction(function(){return n(s,l,h,f)})}:n}(function(n,s){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=s;else{for(mr=mr||document.createElement("div"),mr.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=mr.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;s.firstChild;)n.appendChild(s.firstChild)}});function $r(n,s){if(s){var l=n.firstChild;if(l&&l===n.lastChild&&l.nodeType===3){l.nodeValue=s;return}}n.textContent=s}var Li={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Fi=["Webkit","ms","Moz","O"];Object.keys(Li).forEach(function(n){Fi.forEach(function(s){s=s+n.charAt(0).toUpperCase()+n.substring(1),Li[s]=Li[n]})});function Ea(n,s,l){return s==null||typeof s=="boolean"||s===""?"":l||typeof s!="number"||s===0||Li.hasOwnProperty(n)&&Li[n]?(""+s).trim():s+"px"}function Ia(n,s){n=n.style;for(var l in s)if(s.hasOwnProperty(l)){var h=l.indexOf("--")===0,f=Ea(l,s[l],h);l==="float"&&(l="cssFloat"),h?n.setProperty(l,f):n[l]=f}}var wa=re({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ta(n,s){if(s){if(wa[n]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function Sa(n,s){if(n.indexOf("-")===-1)return typeof s.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ui=null;function js(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var $s=null,yn=null,Gn=null;function qs(n){if(n=Wa(n)){if(typeof $s!="function")throw Error(t(280));var s=n.stateNode;s&&(s=bu(s),$s(n.stateNode,n.type,s))}}function Wn(n){yn?Gn?Gn.push(n):Gn=[n]:yn=n}function Aa(){if(yn){var n=yn,s=Gn;if(Gn=yn=null,qs(n),s)for(n=0;n<s.length;n++)qs(s[n])}}function Bi(n,s){return n(s)}function Ra(){}var gr=!1;function Pa(n,s,l){if(gr)return n(s,l);gr=!0;try{return Bi(n,s,l)}finally{gr=!1,(yn!==null||Gn!==null)&&(Ra(),Aa())}}function at(n,s){var l=n.stateNode;if(l===null)return null;var h=bu(l);if(h===null)return null;l=h[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(n=n.type,h=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!h;break e;default:n=!1}if(n)return null;if(l&&typeof l!="function")throw Error(t(231,s,typeof l));return l}var Ks=!1;if(d)try{var kn={};Object.defineProperty(kn,"passive",{get:function(){Ks=!0}}),window.addEventListener("test",kn,kn),window.removeEventListener("test",kn,kn)}catch{Ks=!1}function zi(n,s,l,h,f,g,v,A,C){var B=Array.prototype.slice.call(arguments,3);try{s.apply(l,B)}catch(W){this.onError(W)}}var ji=!1,Hs=null,xn=!1,Ca=null,$h={onError:function(n){ji=!0,Hs=n}};function Gs(n,s,l,h,f,g,v,A,C){ji=!1,Hs=null,zi.apply($h,arguments)}function su(n,s,l,h,f,g,v,A,C){if(Gs.apply(this,arguments),ji){if(ji){var B=Hs;ji=!1,Hs=null}else throw Error(t(198));xn||(xn=!0,Ca=B)}}function Dn(n){var s=n,l=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(l=s.return),n=s.return;while(n)}return s.tag===3?l:null}function $i(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function Vn(n){if(Dn(n)!==n)throw Error(t(188))}function ou(n){var s=n.alternate;if(!s){if(s=Dn(n),s===null)throw Error(t(188));return s!==n?null:n}for(var l=n,h=s;;){var f=l.return;if(f===null)break;var g=f.alternate;if(g===null){if(h=f.return,h!==null){l=h;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===l)return Vn(f),n;if(g===h)return Vn(f),s;g=g.sibling}throw Error(t(188))}if(l.return!==h.return)l=f,h=g;else{for(var v=!1,A=f.child;A;){if(A===l){v=!0,l=f,h=g;break}if(A===h){v=!0,h=f,l=g;break}A=A.sibling}if(!v){for(A=g.child;A;){if(A===l){v=!0,l=g,h=f;break}if(A===h){v=!0,h=g,l=f;break}A=A.sibling}if(!v)throw Error(t(189))}}if(l.alternate!==h)throw Error(t(190))}if(l.tag!==3)throw Error(t(188));return l.stateNode.current===l?n:s}function ka(n){return n=ou(n),n!==null?Ws(n):null}function Ws(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var s=Ws(n);if(s!==null)return s;n=n.sibling}return null}var Qs=e.unstable_scheduleCallback,xa=e.unstable_cancelCallback,au=e.unstable_shouldYield,qh=e.unstable_requestPaint,He=e.unstable_now,lu=e.unstable_getCurrentPriorityLevel,qi=e.unstable_ImmediatePriority,qr=e.unstable_UserBlockingPriority,_n=e.unstable_NormalPriority,Da=e.unstable_LowPriority,uu=e.unstable_IdlePriority,Ki=null,an=null;function cu(n){if(an&&typeof an.onCommitFiberRoot=="function")try{an.onCommitFiberRoot(Ki,n,void 0,(n.current.flags&128)===128)}catch{}}var jt=Math.clz32?Math.clz32:du,Va=Math.log,hu=Math.LN2;function du(n){return n>>>=0,n===0?32:31-(Va(n)/hu|0)|0}var Ys=64,Xs=4194304;function Kr(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Hi(n,s){var l=n.pendingLanes;if(l===0)return 0;var h=0,f=n.suspendedLanes,g=n.pingedLanes,v=l&268435455;if(v!==0){var A=v&~f;A!==0?h=Kr(A):(g&=v,g!==0&&(h=Kr(g)))}else v=l&~f,v!==0?h=Kr(v):g!==0&&(h=Kr(g));if(h===0)return 0;if(s!==0&&s!==h&&(s&f)===0&&(f=h&-h,g=s&-s,f>=g||f===16&&(g&4194240)!==0))return s;if((h&4)!==0&&(h|=l&16),s=n.entangledLanes,s!==0)for(n=n.entanglements,s&=h;0<s;)l=31-jt(s),f=1<<l,h|=n[l],s&=~f;return h}function Kh(n,s){switch(n){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yr(n,s){for(var l=n.suspendedLanes,h=n.pingedLanes,f=n.expirationTimes,g=n.pendingLanes;0<g;){var v=31-jt(g),A=1<<v,C=f[v];C===-1?((A&l)===0||(A&h)!==0)&&(f[v]=Kh(A,s)):C<=s&&(n.expiredLanes|=A),g&=~A}}function ln(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Gi(){var n=Ys;return Ys<<=1,(Ys&4194240)===0&&(Ys=64),n}function Hr(n){for(var s=[],l=0;31>l;l++)s.push(n);return s}function Gr(n,s,l){n.pendingLanes|=s,s!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,s=31-jt(s),n[s]=l}function qe(n,s){var l=n.pendingLanes&~s;n.pendingLanes=s,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=s,n.mutableReadLanes&=s,n.entangledLanes&=s,s=n.entanglements;var h=n.eventTimes;for(n=n.expirationTimes;0<l;){var f=31-jt(l),g=1<<f;s[f]=0,h[f]=-1,n[f]=-1,l&=~g}}function Wr(n,s){var l=n.entangledLanes|=s;for(n=n.entanglements;l;){var h=31-jt(l),f=1<<h;f&s|n[h]&s&&(n[h]|=s),l&=~f}}var xe=0;function Qr(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var fu,Js,pu,mu,gu,Na=!1,Qn=[],Rt=null,Nn=null,bn=null,Yr=new Map,vn=new Map,Yn=[],Hh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function yu(n,s){switch(n){case"focusin":case"focusout":Rt=null;break;case"dragenter":case"dragleave":Nn=null;break;case"mouseover":case"mouseout":bn=null;break;case"pointerover":case"pointerout":Yr.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":vn.delete(s.pointerId)}}function Qt(n,s,l,h,f,g){return n===null||n.nativeEvent!==g?(n={blockedOn:s,domEventName:l,eventSystemFlags:h,nativeEvent:g,targetContainers:[f]},s!==null&&(s=Wa(s),s!==null&&Js(s)),n):(n.eventSystemFlags|=h,s=n.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),n)}function Gh(n,s,l,h,f){switch(s){case"focusin":return Rt=Qt(Rt,n,s,l,h,f),!0;case"dragenter":return Nn=Qt(Nn,n,s,l,h,f),!0;case"mouseover":return bn=Qt(bn,n,s,l,h,f),!0;case"pointerover":var g=f.pointerId;return Yr.set(g,Qt(Yr.get(g)||null,n,s,l,h,f)),!0;case"gotpointercapture":return g=f.pointerId,vn.set(g,Qt(vn.get(g)||null,n,s,l,h,f)),!0}return!1}function _u(n){var s=Ji(n.target);if(s!==null){var l=Dn(s);if(l!==null){if(s=l.tag,s===13){if(s=$i(l),s!==null){n.blockedOn=s,gu(n.priority,function(){pu(l)});return}}else if(s===3&&l.stateNode.current.memoizedState.isDehydrated){n.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}n.blockedOn=null}function _r(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var l=Zs(n.domEventName,n.eventSystemFlags,s[0],n.nativeEvent);if(l===null){l=n.nativeEvent;var h=new l.constructor(l.type,l);Ui=h,l.target.dispatchEvent(h),Ui=null}else return s=Wa(l),s!==null&&Js(s),n.blockedOn=l,!1;s.shift()}return!0}function Wi(n,s,l){_r(n)&&l.delete(s)}function vu(){Na=!1,Rt!==null&&_r(Rt)&&(Rt=null),Nn!==null&&_r(Nn)&&(Nn=null),bn!==null&&_r(bn)&&(bn=null),Yr.forEach(Wi),vn.forEach(Wi)}function On(n,s){n.blockedOn===s&&(n.blockedOn=null,Na||(Na=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,vu)))}function Mn(n){function s(f){return On(f,n)}if(0<Qn.length){On(Qn[0],n);for(var l=1;l<Qn.length;l++){var h=Qn[l];h.blockedOn===n&&(h.blockedOn=null)}}for(Rt!==null&&On(Rt,n),Nn!==null&&On(Nn,n),bn!==null&&On(bn,n),Yr.forEach(s),vn.forEach(s),l=0;l<Yn.length;l++)h=Yn[l],h.blockedOn===n&&(h.blockedOn=null);for(;0<Yn.length&&(l=Yn[0],l.blockedOn===null);)_u(l),l.blockedOn===null&&Yn.shift()}var vr=pe.ReactCurrentBatchConfig,Xr=!0;function Ye(n,s,l,h){var f=xe,g=vr.transition;vr.transition=null;try{xe=1,ba(n,s,l,h)}finally{xe=f,vr.transition=g}}function Wh(n,s,l,h){var f=xe,g=vr.transition;vr.transition=null;try{xe=4,ba(n,s,l,h)}finally{xe=f,vr.transition=g}}function ba(n,s,l,h){if(Xr){var f=Zs(n,s,l,h);if(f===null)sd(n,s,h,Qi,l),yu(n,h);else if(Gh(f,n,s,l,h))h.stopPropagation();else if(yu(n,h),s&4&&-1<Hh.indexOf(n)){for(;f!==null;){var g=Wa(f);if(g!==null&&fu(g),g=Zs(n,s,l,h),g===null&&sd(n,s,h,Qi,l),g===f)break;f=g}f!==null&&h.stopPropagation()}else sd(n,s,h,null,l)}}var Qi=null;function Zs(n,s,l,h){if(Qi=null,n=js(h),n=Ji(n),n!==null)if(s=Dn(n),s===null)n=null;else if(l=s.tag,l===13){if(n=$i(s),n!==null)return n;n=null}else if(l===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null);return Qi=n,null}function Oa(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(lu()){case qi:return 1;case qr:return 4;case _n:case Da:return 16;case uu:return 536870912;default:return 16}default:return 16}}var un=null,eo=null,Yt=null;function Ma(){if(Yt)return Yt;var n,s=eo,l=s.length,h,f="value"in un?un.value:un.textContent,g=f.length;for(n=0;n<l&&s[n]===f[n];n++);var v=l-n;for(h=1;h<=v&&s[l-h]===f[g-h];h++);return Yt=f.slice(n,1<h?1-h:void 0)}function to(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function Xn(){return!0}function La(){return!1}function Pt(n){function s(l,h,f,g,v){this._reactName=l,this._targetInst=f,this.type=h,this.nativeEvent=g,this.target=v,this.currentTarget=null;for(var A in n)n.hasOwnProperty(A)&&(l=n[A],this[A]=l?l(g):g[A]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Xn:La,this.isPropagationStopped=La,this}return re(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Xn)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Xn)},persist:function(){},isPersistent:Xn}),s}var Ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},no=Pt(Ln),Jn=re({},Ln,{view:0,detail:0}),Qh=Pt(Jn),ro,Er,Jr,Yi=re({},Jn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zn,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Jr&&(Jr&&n.type==="mousemove"?(ro=n.screenX-Jr.screenX,Er=n.screenY-Jr.screenY):Er=ro=0,Jr=n),ro)},movementY:function(n){return"movementY"in n?n.movementY:Er}}),io=Pt(Yi),Fa=re({},Yi,{dataTransfer:0}),Eu=Pt(Fa),so=re({},Jn,{relatedTarget:0}),oo=Pt(so),Iu=re({},Ln,{animationName:0,elapsedTime:0,pseudoElement:0}),Ir=Pt(Iu),wu=re({},Ln,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Tu=Pt(wu),Su=re({},Ln,{data:0}),Ua=Pt(Su),ao={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$t={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Au={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ru(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=Au[n])?!!s[n]:!1}function Zn(){return Ru}var u=re({},Jn,{key:function(n){if(n.key){var s=ao[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=to(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?$t[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zn,charCode:function(n){return n.type==="keypress"?to(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?to(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),m=Pt(u),_=re({},Yi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),I=Pt(_),O=re({},Jn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zn}),z=Pt(O),J=re({},Ln,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ue=Pt(J),mt=re({},Yi,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Ne=Pt(mt),It=[9,13,27,32],ut=d&&"CompositionEvent"in window,En=null;d&&"documentMode"in document&&(En=document.documentMode);var cn=d&&"TextEvent"in window&&!En,Xi=d&&(!ut||En&&8<En&&11>=En),lo=" ",vm=!1;function Em(n,s){switch(n){case"keyup":return It.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Im(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var uo=!1;function tT(n,s){switch(n){case"compositionend":return Im(s);case"keypress":return s.which!==32?null:(vm=!0,lo);case"textInput":return n=s.data,n===lo&&vm?null:n;default:return null}}function nT(n,s){if(uo)return n==="compositionend"||!ut&&Em(n,s)?(n=Ma(),Yt=eo=un=null,uo=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Xi&&s.locale!=="ko"?null:s.data;default:return null}}var rT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wm(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!rT[n.type]:s==="textarea"}function Tm(n,s,l,h){Wn(h),s=Du(s,"onChange"),0<s.length&&(l=new no("onChange","change",null,l,h),n.push({event:l,listeners:s}))}var Ba=null,za=null;function iT(n){zm(n,0)}function Pu(n){var s=mo(n);if(Ls(s))return n}function sT(n,s){if(n==="change")return s}var Sm=!1;if(d){var Yh;if(d){var Xh="oninput"in document;if(!Xh){var Am=document.createElement("div");Am.setAttribute("oninput","return;"),Xh=typeof Am.oninput=="function"}Yh=Xh}else Yh=!1;Sm=Yh&&(!document.documentMode||9<document.documentMode)}function Rm(){Ba&&(Ba.detachEvent("onpropertychange",Pm),za=Ba=null)}function Pm(n){if(n.propertyName==="value"&&Pu(za)){var s=[];Tm(s,za,n,js(n)),Pa(iT,s)}}function oT(n,s,l){n==="focusin"?(Rm(),Ba=s,za=l,Ba.attachEvent("onpropertychange",Pm)):n==="focusout"&&Rm()}function aT(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Pu(za)}function lT(n,s){if(n==="click")return Pu(s)}function uT(n,s){if(n==="input"||n==="change")return Pu(s)}function cT(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var Fn=typeof Object.is=="function"?Object.is:cT;function ja(n,s){if(Fn(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var l=Object.keys(n),h=Object.keys(s);if(l.length!==h.length)return!1;for(h=0;h<l.length;h++){var f=l[h];if(!p.call(s,f)||!Fn(n[f],s[f]))return!1}return!0}function Cm(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function km(n,s){var l=Cm(n);n=0;for(var h;l;){if(l.nodeType===3){if(h=n+l.textContent.length,n<=s&&h>=s)return{node:l,offset:s-n};n=h}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Cm(l)}}function xm(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?xm(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function Dm(){for(var n=window,s=jr();s instanceof n.HTMLIFrameElement;){try{var l=typeof s.contentWindow.location.href=="string"}catch{l=!1}if(l)n=s.contentWindow;else break;s=jr(n.document)}return s}function Jh(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}function hT(n){var s=Dm(),l=n.focusedElem,h=n.selectionRange;if(s!==l&&l&&l.ownerDocument&&xm(l.ownerDocument.documentElement,l)){if(h!==null&&Jh(l)){if(s=h.start,n=h.end,n===void 0&&(n=s),"selectionStart"in l)l.selectionStart=s,l.selectionEnd=Math.min(n,l.value.length);else if(n=(s=l.ownerDocument||document)&&s.defaultView||window,n.getSelection){n=n.getSelection();var f=l.textContent.length,g=Math.min(h.start,f);h=h.end===void 0?g:Math.min(h.end,f),!n.extend&&g>h&&(f=h,h=g,g=f),f=km(l,g);var v=km(l,h);f&&v&&(n.rangeCount!==1||n.anchorNode!==f.node||n.anchorOffset!==f.offset||n.focusNode!==v.node||n.focusOffset!==v.offset)&&(s=s.createRange(),s.setStart(f.node,f.offset),n.removeAllRanges(),g>h?(n.addRange(s),n.extend(v.node,v.offset)):(s.setEnd(v.node,v.offset),n.addRange(s)))}}for(s=[],n=l;n=n.parentNode;)n.nodeType===1&&s.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<s.length;l++)n=s[l],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var dT=d&&"documentMode"in document&&11>=document.documentMode,co=null,Zh=null,$a=null,ed=!1;function Vm(n,s,l){var h=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;ed||co==null||co!==jr(h)||(h=co,"selectionStart"in h&&Jh(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),$a&&ja($a,h)||($a=h,h=Du(Zh,"onSelect"),0<h.length&&(s=new no("onSelect","select",null,s,l),n.push({event:s,listeners:h}),s.target=co)))}function Cu(n,s){var l={};return l[n.toLowerCase()]=s.toLowerCase(),l["Webkit"+n]="webkit"+s,l["Moz"+n]="moz"+s,l}var ho={animationend:Cu("Animation","AnimationEnd"),animationiteration:Cu("Animation","AnimationIteration"),animationstart:Cu("Animation","AnimationStart"),transitionend:Cu("Transition","TransitionEnd")},td={},Nm={};d&&(Nm=document.createElement("div").style,"AnimationEvent"in window||(delete ho.animationend.animation,delete ho.animationiteration.animation,delete ho.animationstart.animation),"TransitionEvent"in window||delete ho.transitionend.transition);function ku(n){if(td[n])return td[n];if(!ho[n])return n;var s=ho[n],l;for(l in s)if(s.hasOwnProperty(l)&&l in Nm)return td[n]=s[l];return n}var bm=ku("animationend"),Om=ku("animationiteration"),Mm=ku("animationstart"),Lm=ku("transitionend"),Fm=new Map,Um="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Zr(n,s){Fm.set(n,s),a(s,[n])}for(var nd=0;nd<Um.length;nd++){var rd=Um[nd],fT=rd.toLowerCase(),pT=rd[0].toUpperCase()+rd.slice(1);Zr(fT,"on"+pT)}Zr(bm,"onAnimationEnd"),Zr(Om,"onAnimationIteration"),Zr(Mm,"onAnimationStart"),Zr("dblclick","onDoubleClick"),Zr("focusin","onFocus"),Zr("focusout","onBlur"),Zr(Lm,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mT=new Set("cancel close invalid load scroll toggle".split(" ").concat(qa));function Bm(n,s,l){var h=n.type||"unknown-event";n.currentTarget=l,su(h,s,void 0,n),n.currentTarget=null}function zm(n,s){s=(s&4)!==0;for(var l=0;l<n.length;l++){var h=n[l],f=h.event;h=h.listeners;e:{var g=void 0;if(s)for(var v=h.length-1;0<=v;v--){var A=h[v],C=A.instance,B=A.currentTarget;if(A=A.listener,C!==g&&f.isPropagationStopped())break e;Bm(f,A,B),g=C}else for(v=0;v<h.length;v++){if(A=h[v],C=A.instance,B=A.currentTarget,A=A.listener,C!==g&&f.isPropagationStopped())break e;Bm(f,A,B),g=C}}}if(xn)throw n=Ca,xn=!1,Ca=null,n}function We(n,s){var l=s[hd];l===void 0&&(l=s[hd]=new Set);var h=n+"__bubble";l.has(h)||(jm(s,n,2,!1),l.add(h))}function id(n,s,l){var h=0;s&&(h|=4),jm(l,n,h,s)}var xu="_reactListening"+Math.random().toString(36).slice(2);function Ka(n){if(!n[xu]){n[xu]=!0,r.forEach(function(l){l!=="selectionchange"&&(mT.has(l)||id(l,!1,n),id(l,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[xu]||(s[xu]=!0,id("selectionchange",!1,s))}}function jm(n,s,l,h){switch(Oa(s)){case 1:var f=Ye;break;case 4:f=Wh;break;default:f=ba}l=f.bind(null,s,l,n),f=void 0,!Ks||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),h?f!==void 0?n.addEventListener(s,l,{capture:!0,passive:f}):n.addEventListener(s,l,!0):f!==void 0?n.addEventListener(s,l,{passive:f}):n.addEventListener(s,l,!1)}function sd(n,s,l,h,f){var g=h;if((s&1)===0&&(s&2)===0&&h!==null)e:for(;;){if(h===null)return;var v=h.tag;if(v===3||v===4){var A=h.stateNode.containerInfo;if(A===f||A.nodeType===8&&A.parentNode===f)break;if(v===4)for(v=h.return;v!==null;){var C=v.tag;if((C===3||C===4)&&(C=v.stateNode.containerInfo,C===f||C.nodeType===8&&C.parentNode===f))return;v=v.return}for(;A!==null;){if(v=Ji(A),v===null)return;if(C=v.tag,C===5||C===6){h=g=v;continue e}A=A.parentNode}}h=h.return}Pa(function(){var B=g,W=js(l),Q=[];e:{var G=Fm.get(n);if(G!==void 0){var ne=no,ae=n;switch(n){case"keypress":if(to(l)===0)break e;case"keydown":case"keyup":ne=m;break;case"focusin":ae="focus",ne=oo;break;case"focusout":ae="blur",ne=oo;break;case"beforeblur":case"afterblur":ne=oo;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ne=io;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ne=Eu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ne=z;break;case bm:case Om:case Mm:ne=Ir;break;case Lm:ne=Ue;break;case"scroll":ne=Qh;break;case"wheel":ne=Ne;break;case"copy":case"cut":case"paste":ne=Tu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ne=I}var ue=(s&4)!==0,lt=!ue&&n==="scroll",L=ue?G!==null?G+"Capture":null:G;ue=[];for(var D=B,F;D!==null;){F=D;var X=F.stateNode;if(F.tag===5&&X!==null&&(F=X,L!==null&&(X=at(D,L),X!=null&&ue.push(Ha(D,X,F)))),lt)break;D=D.return}0<ue.length&&(G=new ne(G,ae,null,l,W),Q.push({event:G,listeners:ue}))}}if((s&7)===0){e:{if(G=n==="mouseover"||n==="pointerover",ne=n==="mouseout"||n==="pointerout",G&&l!==Ui&&(ae=l.relatedTarget||l.fromElement)&&(Ji(ae)||ae[wr]))break e;if((ne||G)&&(G=W.window===W?W:(G=W.ownerDocument)?G.defaultView||G.parentWindow:window,ne?(ae=l.relatedTarget||l.toElement,ne=B,ae=ae?Ji(ae):null,ae!==null&&(lt=Dn(ae),ae!==lt||ae.tag!==5&&ae.tag!==6)&&(ae=null)):(ne=null,ae=B),ne!==ae)){if(ue=io,X="onMouseLeave",L="onMouseEnter",D="mouse",(n==="pointerout"||n==="pointerover")&&(ue=I,X="onPointerLeave",L="onPointerEnter",D="pointer"),lt=ne==null?G:mo(ne),F=ae==null?G:mo(ae),G=new ue(X,D+"leave",ne,l,W),G.target=lt,G.relatedTarget=F,X=null,Ji(W)===B&&(ue=new ue(L,D+"enter",ae,l,W),ue.target=F,ue.relatedTarget=lt,X=ue),lt=X,ne&&ae)t:{for(ue=ne,L=ae,D=0,F=ue;F;F=fo(F))D++;for(F=0,X=L;X;X=fo(X))F++;for(;0<D-F;)ue=fo(ue),D--;for(;0<F-D;)L=fo(L),F--;for(;D--;){if(ue===L||L!==null&&ue===L.alternate)break t;ue=fo(ue),L=fo(L)}ue=null}else ue=null;ne!==null&&$m(Q,G,ne,ue,!1),ae!==null&&lt!==null&&$m(Q,lt,ae,ue,!0)}}e:{if(G=B?mo(B):window,ne=G.nodeName&&G.nodeName.toLowerCase(),ne==="select"||ne==="input"&&G.type==="file")var ce=sT;else if(wm(G))if(Sm)ce=uT;else{ce=aT;var ye=oT}else(ne=G.nodeName)&&ne.toLowerCase()==="input"&&(G.type==="checkbox"||G.type==="radio")&&(ce=lT);if(ce&&(ce=ce(n,B))){Tm(Q,ce,l,W);break e}ye&&ye(n,G,B),n==="focusout"&&(ye=G._wrapperState)&&ye.controlled&&G.type==="number"&&Us(G,"number",G.value)}switch(ye=B?mo(B):window,n){case"focusin":(wm(ye)||ye.contentEditable==="true")&&(co=ye,Zh=B,$a=null);break;case"focusout":$a=Zh=co=null;break;case"mousedown":ed=!0;break;case"contextmenu":case"mouseup":case"dragend":ed=!1,Vm(Q,l,W);break;case"selectionchange":if(dT)break;case"keydown":case"keyup":Vm(Q,l,W)}var _e;if(ut)e:{switch(n){case"compositionstart":var we="onCompositionStart";break e;case"compositionend":we="onCompositionEnd";break e;case"compositionupdate":we="onCompositionUpdate";break e}we=void 0}else uo?Em(n,l)&&(we="onCompositionEnd"):n==="keydown"&&l.keyCode===229&&(we="onCompositionStart");we&&(Xi&&l.locale!=="ko"&&(uo||we!=="onCompositionStart"?we==="onCompositionEnd"&&uo&&(_e=Ma()):(un=W,eo="value"in un?un.value:un.textContent,uo=!0)),ye=Du(B,we),0<ye.length&&(we=new Ua(we,n,null,l,W),Q.push({event:we,listeners:ye}),_e?we.data=_e:(_e=Im(l),_e!==null&&(we.data=_e)))),(_e=cn?tT(n,l):nT(n,l))&&(B=Du(B,"onBeforeInput"),0<B.length&&(W=new Ua("onBeforeInput","beforeinput",null,l,W),Q.push({event:W,listeners:B}),W.data=_e))}zm(Q,s)})}function Ha(n,s,l){return{instance:n,listener:s,currentTarget:l}}function Du(n,s){for(var l=s+"Capture",h=[];n!==null;){var f=n,g=f.stateNode;f.tag===5&&g!==null&&(f=g,g=at(n,l),g!=null&&h.unshift(Ha(n,g,f)),g=at(n,s),g!=null&&h.push(Ha(n,g,f))),n=n.return}return h}function fo(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function $m(n,s,l,h,f){for(var g=s._reactName,v=[];l!==null&&l!==h;){var A=l,C=A.alternate,B=A.stateNode;if(C!==null&&C===h)break;A.tag===5&&B!==null&&(A=B,f?(C=at(l,g),C!=null&&v.unshift(Ha(l,C,A))):f||(C=at(l,g),C!=null&&v.push(Ha(l,C,A)))),l=l.return}v.length!==0&&n.push({event:s,listeners:v})}var gT=/\r\n?/g,yT=/\u0000|\uFFFD/g;function qm(n){return(typeof n=="string"?n:""+n).replace(gT,`
`).replace(yT,"")}function Vu(n,s,l){if(s=qm(s),qm(n)!==s&&l)throw Error(t(425))}function Nu(){}var od=null,ad=null;function ld(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var ud=typeof setTimeout=="function"?setTimeout:void 0,_T=typeof clearTimeout=="function"?clearTimeout:void 0,Km=typeof Promise=="function"?Promise:void 0,vT=typeof queueMicrotask=="function"?queueMicrotask:typeof Km<"u"?function(n){return Km.resolve(null).then(n).catch(ET)}:ud;function ET(n){setTimeout(function(){throw n})}function cd(n,s){var l=s,h=0;do{var f=l.nextSibling;if(n.removeChild(l),f&&f.nodeType===8)if(l=f.data,l==="/$"){if(h===0){n.removeChild(f),Mn(s);return}h--}else l!=="$"&&l!=="$?"&&l!=="$!"||h++;l=f}while(l);Mn(s)}function ei(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return n}function Hm(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var l=n.data;if(l==="$"||l==="$!"||l==="$?"){if(s===0)return n;s--}else l==="/$"&&s++}n=n.previousSibling}return null}var po=Math.random().toString(36).slice(2),er="__reactFiber$"+po,Ga="__reactProps$"+po,wr="__reactContainer$"+po,hd="__reactEvents$"+po,IT="__reactListeners$"+po,wT="__reactHandles$"+po;function Ji(n){var s=n[er];if(s)return s;for(var l=n.parentNode;l;){if(s=l[wr]||l[er]){if(l=s.alternate,s.child!==null||l!==null&&l.child!==null)for(n=Hm(n);n!==null;){if(l=n[er])return l;n=Hm(n)}return s}n=l,l=n.parentNode}return null}function Wa(n){return n=n[er]||n[wr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function mo(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function bu(n){return n[Ga]||null}var dd=[],go=-1;function ti(n){return{current:n}}function Qe(n){0>go||(n.current=dd[go],dd[go]=null,go--)}function Ge(n,s){go++,dd[go]=n.current,n.current=s}var ni={},bt=ti(ni),Xt=ti(!1),Zi=ni;function yo(n,s){var l=n.type.contextTypes;if(!l)return ni;var h=n.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===s)return h.__reactInternalMemoizedMaskedChildContext;var f={},g;for(g in l)f[g]=s[g];return h&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=f),f}function Jt(n){return n=n.childContextTypes,n!=null}function Ou(){Qe(Xt),Qe(bt)}function Gm(n,s,l){if(bt.current!==ni)throw Error(t(168));Ge(bt,s),Ge(Xt,l)}function Wm(n,s,l){var h=n.stateNode;if(s=s.childContextTypes,typeof h.getChildContext!="function")return l;h=h.getChildContext();for(var f in h)if(!(f in s))throw Error(t(108,Le(n)||"Unknown",f));return re({},l,h)}function Mu(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||ni,Zi=bt.current,Ge(bt,n),Ge(Xt,Xt.current),!0}function Qm(n,s,l){var h=n.stateNode;if(!h)throw Error(t(169));l?(n=Wm(n,s,Zi),h.__reactInternalMemoizedMergedChildContext=n,Qe(Xt),Qe(bt),Ge(bt,n)):Qe(Xt),Ge(Xt,l)}var Tr=null,Lu=!1,fd=!1;function Ym(n){Tr===null?Tr=[n]:Tr.push(n)}function TT(n){Lu=!0,Ym(n)}function ri(){if(!fd&&Tr!==null){fd=!0;var n=0,s=xe;try{var l=Tr;for(xe=1;n<l.length;n++){var h=l[n];do h=h(!0);while(h!==null)}Tr=null,Lu=!1}catch(f){throw Tr!==null&&(Tr=Tr.slice(n+1)),Qs(qi,ri),f}finally{xe=s,fd=!1}}return null}var _o=[],vo=0,Fu=null,Uu=0,In=[],wn=0,es=null,Sr=1,Ar="";function ts(n,s){_o[vo++]=Uu,_o[vo++]=Fu,Fu=n,Uu=s}function Xm(n,s,l){In[wn++]=Sr,In[wn++]=Ar,In[wn++]=es,es=n;var h=Sr;n=Ar;var f=32-jt(h)-1;h&=~(1<<f),l+=1;var g=32-jt(s)+f;if(30<g){var v=f-f%5;g=(h&(1<<v)-1).toString(32),h>>=v,f-=v,Sr=1<<32-jt(s)+f|l<<f|h,Ar=g+n}else Sr=1<<g|l<<f|h,Ar=n}function pd(n){n.return!==null&&(ts(n,1),Xm(n,1,0))}function md(n){for(;n===Fu;)Fu=_o[--vo],_o[vo]=null,Uu=_o[--vo],_o[vo]=null;for(;n===es;)es=In[--wn],In[wn]=null,Ar=In[--wn],In[wn]=null,Sr=In[--wn],In[wn]=null}var hn=null,dn=null,Xe=!1,Un=null;function Jm(n,s){var l=Rn(5,null,null,0);l.elementType="DELETED",l.stateNode=s,l.return=n,s=n.deletions,s===null?(n.deletions=[l],n.flags|=16):s.push(l)}function Zm(n,s){switch(n.tag){case 5:var l=n.type;return s=s.nodeType!==1||l.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(n.stateNode=s,hn=n,dn=ei(s.firstChild),!0):!1;case 6:return s=n.pendingProps===""||s.nodeType!==3?null:s,s!==null?(n.stateNode=s,hn=n,dn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(l=es!==null?{id:Sr,overflow:Ar}:null,n.memoizedState={dehydrated:s,treeContext:l,retryLane:1073741824},l=Rn(18,null,null,0),l.stateNode=s,l.return=n,n.child=l,hn=n,dn=null,!0):!1;default:return!1}}function gd(n){return(n.mode&1)!==0&&(n.flags&128)===0}function yd(n){if(Xe){var s=dn;if(s){var l=s;if(!Zm(n,s)){if(gd(n))throw Error(t(418));s=ei(l.nextSibling);var h=hn;s&&Zm(n,s)?Jm(h,l):(n.flags=n.flags&-4097|2,Xe=!1,hn=n)}}else{if(gd(n))throw Error(t(418));n.flags=n.flags&-4097|2,Xe=!1,hn=n}}}function eg(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;hn=n}function Bu(n){if(n!==hn)return!1;if(!Xe)return eg(n),Xe=!0,!1;var s;if((s=n.tag!==3)&&!(s=n.tag!==5)&&(s=n.type,s=s!=="head"&&s!=="body"&&!ld(n.type,n.memoizedProps)),s&&(s=dn)){if(gd(n))throw tg(),Error(t(418));for(;s;)Jm(n,s),s=ei(s.nextSibling)}if(eg(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8){var l=n.data;if(l==="/$"){if(s===0){dn=ei(n.nextSibling);break e}s--}else l!=="$"&&l!=="$!"&&l!=="$?"||s++}n=n.nextSibling}dn=null}}else dn=hn?ei(n.stateNode.nextSibling):null;return!0}function tg(){for(var n=dn;n;)n=ei(n.nextSibling)}function Eo(){dn=hn=null,Xe=!1}function _d(n){Un===null?Un=[n]:Un.push(n)}var ST=pe.ReactCurrentBatchConfig;function Qa(n,s,l){if(n=l.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(t(309));var h=l.stateNode}if(!h)throw Error(t(147,n));var f=h,g=""+n;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===g?s.ref:(s=function(v){var A=f.refs;v===null?delete A[g]:A[g]=v},s._stringRef=g,s)}if(typeof n!="string")throw Error(t(284));if(!l._owner)throw Error(t(290,n))}return n}function zu(n,s){throw n=Object.prototype.toString.call(s),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n))}function ng(n){var s=n._init;return s(n._payload)}function rg(n){function s(L,D){if(n){var F=L.deletions;F===null?(L.deletions=[D],L.flags|=16):F.push(D)}}function l(L,D){if(!n)return null;for(;D!==null;)s(L,D),D=D.sibling;return null}function h(L,D){for(L=new Map;D!==null;)D.key!==null?L.set(D.key,D):L.set(D.index,D),D=D.sibling;return L}function f(L,D){return L=hi(L,D),L.index=0,L.sibling=null,L}function g(L,D,F){return L.index=F,n?(F=L.alternate,F!==null?(F=F.index,F<D?(L.flags|=2,D):F):(L.flags|=2,D)):(L.flags|=1048576,D)}function v(L){return n&&L.alternate===null&&(L.flags|=2),L}function A(L,D,F,X){return D===null||D.tag!==6?(D=cf(F,L.mode,X),D.return=L,D):(D=f(D,F),D.return=L,D)}function C(L,D,F,X){var ce=F.type;return ce===k?W(L,D,F.props.children,X,F.key):D!==null&&(D.elementType===ce||typeof ce=="object"&&ce!==null&&ce.$$typeof===Nt&&ng(ce)===D.type)?(X=f(D,F.props),X.ref=Qa(L,D,F),X.return=L,X):(X=hc(F.type,F.key,F.props,null,L.mode,X),X.ref=Qa(L,D,F),X.return=L,X)}function B(L,D,F,X){return D===null||D.tag!==4||D.stateNode.containerInfo!==F.containerInfo||D.stateNode.implementation!==F.implementation?(D=hf(F,L.mode,X),D.return=L,D):(D=f(D,F.children||[]),D.return=L,D)}function W(L,D,F,X,ce){return D===null||D.tag!==7?(D=us(F,L.mode,X,ce),D.return=L,D):(D=f(D,F),D.return=L,D)}function Q(L,D,F){if(typeof D=="string"&&D!==""||typeof D=="number")return D=cf(""+D,L.mode,F),D.return=L,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case Se:return F=hc(D.type,D.key,D.props,null,L.mode,F),F.ref=Qa(L,null,D),F.return=L,F;case me:return D=hf(D,L.mode,F),D.return=L,D;case Nt:var X=D._init;return Q(L,X(D._payload),F)}if(fr(D)||ge(D))return D=us(D,L.mode,F,null),D.return=L,D;zu(L,D)}return null}function G(L,D,F,X){var ce=D!==null?D.key:null;if(typeof F=="string"&&F!==""||typeof F=="number")return ce!==null?null:A(L,D,""+F,X);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case Se:return F.key===ce?C(L,D,F,X):null;case me:return F.key===ce?B(L,D,F,X):null;case Nt:return ce=F._init,G(L,D,ce(F._payload),X)}if(fr(F)||ge(F))return ce!==null?null:W(L,D,F,X,null);zu(L,F)}return null}function ne(L,D,F,X,ce){if(typeof X=="string"&&X!==""||typeof X=="number")return L=L.get(F)||null,A(D,L,""+X,ce);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case Se:return L=L.get(X.key===null?F:X.key)||null,C(D,L,X,ce);case me:return L=L.get(X.key===null?F:X.key)||null,B(D,L,X,ce);case Nt:var ye=X._init;return ne(L,D,F,ye(X._payload),ce)}if(fr(X)||ge(X))return L=L.get(F)||null,W(D,L,X,ce,null);zu(D,X)}return null}function ae(L,D,F,X){for(var ce=null,ye=null,_e=D,we=D=0,St=null;_e!==null&&we<F.length;we++){_e.index>we?(St=_e,_e=null):St=_e.sibling;var Me=G(L,_e,F[we],X);if(Me===null){_e===null&&(_e=St);break}n&&_e&&Me.alternate===null&&s(L,_e),D=g(Me,D,we),ye===null?ce=Me:ye.sibling=Me,ye=Me,_e=St}if(we===F.length)return l(L,_e),Xe&&ts(L,we),ce;if(_e===null){for(;we<F.length;we++)_e=Q(L,F[we],X),_e!==null&&(D=g(_e,D,we),ye===null?ce=_e:ye.sibling=_e,ye=_e);return Xe&&ts(L,we),ce}for(_e=h(L,_e);we<F.length;we++)St=ne(_e,L,we,F[we],X),St!==null&&(n&&St.alternate!==null&&_e.delete(St.key===null?we:St.key),D=g(St,D,we),ye===null?ce=St:ye.sibling=St,ye=St);return n&&_e.forEach(function(di){return s(L,di)}),Xe&&ts(L,we),ce}function ue(L,D,F,X){var ce=ge(F);if(typeof ce!="function")throw Error(t(150));if(F=ce.call(F),F==null)throw Error(t(151));for(var ye=ce=null,_e=D,we=D=0,St=null,Me=F.next();_e!==null&&!Me.done;we++,Me=F.next()){_e.index>we?(St=_e,_e=null):St=_e.sibling;var di=G(L,_e,Me.value,X);if(di===null){_e===null&&(_e=St);break}n&&_e&&di.alternate===null&&s(L,_e),D=g(di,D,we),ye===null?ce=di:ye.sibling=di,ye=di,_e=St}if(Me.done)return l(L,_e),Xe&&ts(L,we),ce;if(_e===null){for(;!Me.done;we++,Me=F.next())Me=Q(L,Me.value,X),Me!==null&&(D=g(Me,D,we),ye===null?ce=Me:ye.sibling=Me,ye=Me);return Xe&&ts(L,we),ce}for(_e=h(L,_e);!Me.done;we++,Me=F.next())Me=ne(_e,L,we,Me.value,X),Me!==null&&(n&&Me.alternate!==null&&_e.delete(Me.key===null?we:Me.key),D=g(Me,D,we),ye===null?ce=Me:ye.sibling=Me,ye=Me);return n&&_e.forEach(function(r0){return s(L,r0)}),Xe&&ts(L,we),ce}function lt(L,D,F,X){if(typeof F=="object"&&F!==null&&F.type===k&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case Se:e:{for(var ce=F.key,ye=D;ye!==null;){if(ye.key===ce){if(ce=F.type,ce===k){if(ye.tag===7){l(L,ye.sibling),D=f(ye,F.props.children),D.return=L,L=D;break e}}else if(ye.elementType===ce||typeof ce=="object"&&ce!==null&&ce.$$typeof===Nt&&ng(ce)===ye.type){l(L,ye.sibling),D=f(ye,F.props),D.ref=Qa(L,ye,F),D.return=L,L=D;break e}l(L,ye);break}else s(L,ye);ye=ye.sibling}F.type===k?(D=us(F.props.children,L.mode,X,F.key),D.return=L,L=D):(X=hc(F.type,F.key,F.props,null,L.mode,X),X.ref=Qa(L,D,F),X.return=L,L=X)}return v(L);case me:e:{for(ye=F.key;D!==null;){if(D.key===ye)if(D.tag===4&&D.stateNode.containerInfo===F.containerInfo&&D.stateNode.implementation===F.implementation){l(L,D.sibling),D=f(D,F.children||[]),D.return=L,L=D;break e}else{l(L,D);break}else s(L,D);D=D.sibling}D=hf(F,L.mode,X),D.return=L,L=D}return v(L);case Nt:return ye=F._init,lt(L,D,ye(F._payload),X)}if(fr(F))return ae(L,D,F,X);if(ge(F))return ue(L,D,F,X);zu(L,F)}return typeof F=="string"&&F!==""||typeof F=="number"?(F=""+F,D!==null&&D.tag===6?(l(L,D.sibling),D=f(D,F),D.return=L,L=D):(l(L,D),D=cf(F,L.mode,X),D.return=L,L=D),v(L)):l(L,D)}return lt}var Io=rg(!0),ig=rg(!1),ju=ti(null),$u=null,wo=null,vd=null;function Ed(){vd=wo=$u=null}function Id(n){var s=ju.current;Qe(ju),n._currentValue=s}function wd(n,s,l){for(;n!==null;){var h=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,h!==null&&(h.childLanes|=s)):h!==null&&(h.childLanes&s)!==s&&(h.childLanes|=s),n===l)break;n=n.return}}function To(n,s){$u=n,vd=wo=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&s)!==0&&(Zt=!0),n.firstContext=null)}function Tn(n){var s=n._currentValue;if(vd!==n)if(n={context:n,memoizedValue:s,next:null},wo===null){if($u===null)throw Error(t(308));wo=n,$u.dependencies={lanes:0,firstContext:n}}else wo=wo.next=n;return s}var ns=null;function Td(n){ns===null?ns=[n]:ns.push(n)}function sg(n,s,l,h){var f=s.interleaved;return f===null?(l.next=l,Td(s)):(l.next=f.next,f.next=l),s.interleaved=l,Rr(n,h)}function Rr(n,s){n.lanes|=s;var l=n.alternate;for(l!==null&&(l.lanes|=s),l=n,n=n.return;n!==null;)n.childLanes|=s,l=n.alternate,l!==null&&(l.childLanes|=s),l=n,n=n.return;return l.tag===3?l.stateNode:null}var ii=!1;function Sd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function og(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Pr(n,s){return{eventTime:n,lane:s,tag:0,payload:null,callback:null,next:null}}function si(n,s,l){var h=n.updateQueue;if(h===null)return null;if(h=h.shared,(Oe&2)!==0){var f=h.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),h.pending=s,Rr(n,l)}return f=h.interleaved,f===null?(s.next=s,Td(h)):(s.next=f.next,f.next=s),h.interleaved=s,Rr(n,l)}function qu(n,s,l){if(s=s.updateQueue,s!==null&&(s=s.shared,(l&4194240)!==0)){var h=s.lanes;h&=n.pendingLanes,l|=h,s.lanes=l,Wr(n,l)}}function ag(n,s){var l=n.updateQueue,h=n.alternate;if(h!==null&&(h=h.updateQueue,l===h)){var f=null,g=null;if(l=l.firstBaseUpdate,l!==null){do{var v={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};g===null?f=g=v:g=g.next=v,l=l.next}while(l!==null);g===null?f=g=s:g=g.next=s}else f=g=s;l={baseState:h.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:h.shared,effects:h.effects},n.updateQueue=l;return}n=l.lastBaseUpdate,n===null?l.firstBaseUpdate=s:n.next=s,l.lastBaseUpdate=s}function Ku(n,s,l,h){var f=n.updateQueue;ii=!1;var g=f.firstBaseUpdate,v=f.lastBaseUpdate,A=f.shared.pending;if(A!==null){f.shared.pending=null;var C=A,B=C.next;C.next=null,v===null?g=B:v.next=B,v=C;var W=n.alternate;W!==null&&(W=W.updateQueue,A=W.lastBaseUpdate,A!==v&&(A===null?W.firstBaseUpdate=B:A.next=B,W.lastBaseUpdate=C))}if(g!==null){var Q=f.baseState;v=0,W=B=C=null,A=g;do{var G=A.lane,ne=A.eventTime;if((h&G)===G){W!==null&&(W=W.next={eventTime:ne,lane:0,tag:A.tag,payload:A.payload,callback:A.callback,next:null});e:{var ae=n,ue=A;switch(G=s,ne=l,ue.tag){case 1:if(ae=ue.payload,typeof ae=="function"){Q=ae.call(ne,Q,G);break e}Q=ae;break e;case 3:ae.flags=ae.flags&-65537|128;case 0:if(ae=ue.payload,G=typeof ae=="function"?ae.call(ne,Q,G):ae,G==null)break e;Q=re({},Q,G);break e;case 2:ii=!0}}A.callback!==null&&A.lane!==0&&(n.flags|=64,G=f.effects,G===null?f.effects=[A]:G.push(A))}else ne={eventTime:ne,lane:G,tag:A.tag,payload:A.payload,callback:A.callback,next:null},W===null?(B=W=ne,C=Q):W=W.next=ne,v|=G;if(A=A.next,A===null){if(A=f.shared.pending,A===null)break;G=A,A=G.next,G.next=null,f.lastBaseUpdate=G,f.shared.pending=null}}while(!0);if(W===null&&(C=Q),f.baseState=C,f.firstBaseUpdate=B,f.lastBaseUpdate=W,s=f.shared.interleaved,s!==null){f=s;do v|=f.lane,f=f.next;while(f!==s)}else g===null&&(f.shared.lanes=0);ss|=v,n.lanes=v,n.memoizedState=Q}}function lg(n,s,l){if(n=s.effects,s.effects=null,n!==null)for(s=0;s<n.length;s++){var h=n[s],f=h.callback;if(f!==null){if(h.callback=null,h=l,typeof f!="function")throw Error(t(191,f));f.call(h)}}}var Ya={},tr=ti(Ya),Xa=ti(Ya),Ja=ti(Ya);function rs(n){if(n===Ya)throw Error(t(174));return n}function Ad(n,s){switch(Ge(Ja,s),Ge(Xa,n),Ge(tr,Ya),n=s.nodeType,n){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:pt(null,"");break;default:n=n===8?s.parentNode:s,s=n.namespaceURI||null,n=n.tagName,s=pt(s,n)}Qe(tr),Ge(tr,s)}function So(){Qe(tr),Qe(Xa),Qe(Ja)}function ug(n){rs(Ja.current);var s=rs(tr.current),l=pt(s,n.type);s!==l&&(Ge(Xa,n),Ge(tr,l))}function Rd(n){Xa.current===n&&(Qe(tr),Qe(Xa))}var et=ti(0);function Hu(n){for(var s=n;s!==null;){if(s.tag===13){var l=s.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Pd=[];function Cd(){for(var n=0;n<Pd.length;n++)Pd[n]._workInProgressVersionPrimary=null;Pd.length=0}var Gu=pe.ReactCurrentDispatcher,kd=pe.ReactCurrentBatchConfig,is=0,tt=null,gt=null,wt=null,Wu=!1,Za=!1,el=0,AT=0;function Ot(){throw Error(t(321))}function xd(n,s){if(s===null)return!1;for(var l=0;l<s.length&&l<n.length;l++)if(!Fn(n[l],s[l]))return!1;return!0}function Dd(n,s,l,h,f,g){if(is=g,tt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Gu.current=n===null||n.memoizedState===null?kT:xT,n=l(h,f),Za){g=0;do{if(Za=!1,el=0,25<=g)throw Error(t(301));g+=1,wt=gt=null,s.updateQueue=null,Gu.current=DT,n=l(h,f)}while(Za)}if(Gu.current=Xu,s=gt!==null&&gt.next!==null,is=0,wt=gt=tt=null,Wu=!1,s)throw Error(t(300));return n}function Vd(){var n=el!==0;return el=0,n}function nr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wt===null?tt.memoizedState=wt=n:wt=wt.next=n,wt}function Sn(){if(gt===null){var n=tt.alternate;n=n!==null?n.memoizedState:null}else n=gt.next;var s=wt===null?tt.memoizedState:wt.next;if(s!==null)wt=s,gt=n;else{if(n===null)throw Error(t(310));gt=n,n={memoizedState:gt.memoizedState,baseState:gt.baseState,baseQueue:gt.baseQueue,queue:gt.queue,next:null},wt===null?tt.memoizedState=wt=n:wt=wt.next=n}return wt}function tl(n,s){return typeof s=="function"?s(n):s}function Nd(n){var s=Sn(),l=s.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=n;var h=gt,f=h.baseQueue,g=l.pending;if(g!==null){if(f!==null){var v=f.next;f.next=g.next,g.next=v}h.baseQueue=f=g,l.pending=null}if(f!==null){g=f.next,h=h.baseState;var A=v=null,C=null,B=g;do{var W=B.lane;if((is&W)===W)C!==null&&(C=C.next={lane:0,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),h=B.hasEagerState?B.eagerState:n(h,B.action);else{var Q={lane:W,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null};C===null?(A=C=Q,v=h):C=C.next=Q,tt.lanes|=W,ss|=W}B=B.next}while(B!==null&&B!==g);C===null?v=h:C.next=A,Fn(h,s.memoizedState)||(Zt=!0),s.memoizedState=h,s.baseState=v,s.baseQueue=C,l.lastRenderedState=h}if(n=l.interleaved,n!==null){f=n;do g=f.lane,tt.lanes|=g,ss|=g,f=f.next;while(f!==n)}else f===null&&(l.lanes=0);return[s.memoizedState,l.dispatch]}function bd(n){var s=Sn(),l=s.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=n;var h=l.dispatch,f=l.pending,g=s.memoizedState;if(f!==null){l.pending=null;var v=f=f.next;do g=n(g,v.action),v=v.next;while(v!==f);Fn(g,s.memoizedState)||(Zt=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),l.lastRenderedState=g}return[g,h]}function cg(){}function hg(n,s){var l=tt,h=Sn(),f=s(),g=!Fn(h.memoizedState,f);if(g&&(h.memoizedState=f,Zt=!0),h=h.queue,Od(pg.bind(null,l,h,n),[n]),h.getSnapshot!==s||g||wt!==null&&wt.memoizedState.tag&1){if(l.flags|=2048,nl(9,fg.bind(null,l,h,f,s),void 0,null),Tt===null)throw Error(t(349));(is&30)!==0||dg(l,s,f)}return f}function dg(n,s,l){n.flags|=16384,n={getSnapshot:s,value:l},s=tt.updateQueue,s===null?(s={lastEffect:null,stores:null},tt.updateQueue=s,s.stores=[n]):(l=s.stores,l===null?s.stores=[n]:l.push(n))}function fg(n,s,l,h){s.value=l,s.getSnapshot=h,mg(s)&&gg(n)}function pg(n,s,l){return l(function(){mg(s)&&gg(n)})}function mg(n){var s=n.getSnapshot;n=n.value;try{var l=s();return!Fn(n,l)}catch{return!0}}function gg(n){var s=Rr(n,1);s!==null&&$n(s,n,1,-1)}function yg(n){var s=nr();return typeof n=="function"&&(n=n()),s.memoizedState=s.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:tl,lastRenderedState:n},s.queue=n,n=n.dispatch=CT.bind(null,tt,n),[s.memoizedState,n]}function nl(n,s,l,h){return n={tag:n,create:s,destroy:l,deps:h,next:null},s=tt.updateQueue,s===null?(s={lastEffect:null,stores:null},tt.updateQueue=s,s.lastEffect=n.next=n):(l=s.lastEffect,l===null?s.lastEffect=n.next=n:(h=l.next,l.next=n,n.next=h,s.lastEffect=n)),n}function _g(){return Sn().memoizedState}function Qu(n,s,l,h){var f=nr();tt.flags|=n,f.memoizedState=nl(1|s,l,void 0,h===void 0?null:h)}function Yu(n,s,l,h){var f=Sn();h=h===void 0?null:h;var g=void 0;if(gt!==null){var v=gt.memoizedState;if(g=v.destroy,h!==null&&xd(h,v.deps)){f.memoizedState=nl(s,l,g,h);return}}tt.flags|=n,f.memoizedState=nl(1|s,l,g,h)}function vg(n,s){return Qu(8390656,8,n,s)}function Od(n,s){return Yu(2048,8,n,s)}function Eg(n,s){return Yu(4,2,n,s)}function Ig(n,s){return Yu(4,4,n,s)}function wg(n,s){if(typeof s=="function")return n=n(),s(n),function(){s(null)};if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function Tg(n,s,l){return l=l!=null?l.concat([n]):null,Yu(4,4,wg.bind(null,s,n),l)}function Md(){}function Sg(n,s){var l=Sn();s=s===void 0?null:s;var h=l.memoizedState;return h!==null&&s!==null&&xd(s,h[1])?h[0]:(l.memoizedState=[n,s],n)}function Ag(n,s){var l=Sn();s=s===void 0?null:s;var h=l.memoizedState;return h!==null&&s!==null&&xd(s,h[1])?h[0]:(n=n(),l.memoizedState=[n,s],n)}function Rg(n,s,l){return(is&21)===0?(n.baseState&&(n.baseState=!1,Zt=!0),n.memoizedState=l):(Fn(l,s)||(l=Gi(),tt.lanes|=l,ss|=l,n.baseState=!0),s)}function RT(n,s){var l=xe;xe=l!==0&&4>l?l:4,n(!0);var h=kd.transition;kd.transition={};try{n(!1),s()}finally{xe=l,kd.transition=h}}function Pg(){return Sn().memoizedState}function PT(n,s,l){var h=ui(n);if(l={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null},Cg(n))kg(s,l);else if(l=sg(n,s,l,h),l!==null){var f=Kt();$n(l,n,h,f),xg(l,s,h)}}function CT(n,s,l){var h=ui(n),f={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null};if(Cg(n))kg(s,f);else{var g=n.alternate;if(n.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var v=s.lastRenderedState,A=g(v,l);if(f.hasEagerState=!0,f.eagerState=A,Fn(A,v)){var C=s.interleaved;C===null?(f.next=f,Td(s)):(f.next=C.next,C.next=f),s.interleaved=f;return}}catch{}finally{}l=sg(n,s,f,h),l!==null&&(f=Kt(),$n(l,n,h,f),xg(l,s,h))}}function Cg(n){var s=n.alternate;return n===tt||s!==null&&s===tt}function kg(n,s){Za=Wu=!0;var l=n.pending;l===null?s.next=s:(s.next=l.next,l.next=s),n.pending=s}function xg(n,s,l){if((l&4194240)!==0){var h=s.lanes;h&=n.pendingLanes,l|=h,s.lanes=l,Wr(n,l)}}var Xu={readContext:Tn,useCallback:Ot,useContext:Ot,useEffect:Ot,useImperativeHandle:Ot,useInsertionEffect:Ot,useLayoutEffect:Ot,useMemo:Ot,useReducer:Ot,useRef:Ot,useState:Ot,useDebugValue:Ot,useDeferredValue:Ot,useTransition:Ot,useMutableSource:Ot,useSyncExternalStore:Ot,useId:Ot,unstable_isNewReconciler:!1},kT={readContext:Tn,useCallback:function(n,s){return nr().memoizedState=[n,s===void 0?null:s],n},useContext:Tn,useEffect:vg,useImperativeHandle:function(n,s,l){return l=l!=null?l.concat([n]):null,Qu(4194308,4,wg.bind(null,s,n),l)},useLayoutEffect:function(n,s){return Qu(4194308,4,n,s)},useInsertionEffect:function(n,s){return Qu(4,2,n,s)},useMemo:function(n,s){var l=nr();return s=s===void 0?null:s,n=n(),l.memoizedState=[n,s],n},useReducer:function(n,s,l){var h=nr();return s=l!==void 0?l(s):s,h.memoizedState=h.baseState=s,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:s},h.queue=n,n=n.dispatch=PT.bind(null,tt,n),[h.memoizedState,n]},useRef:function(n){var s=nr();return n={current:n},s.memoizedState=n},useState:yg,useDebugValue:Md,useDeferredValue:function(n){return nr().memoizedState=n},useTransition:function(){var n=yg(!1),s=n[0];return n=RT.bind(null,n[1]),nr().memoizedState=n,[s,n]},useMutableSource:function(){},useSyncExternalStore:function(n,s,l){var h=tt,f=nr();if(Xe){if(l===void 0)throw Error(t(407));l=l()}else{if(l=s(),Tt===null)throw Error(t(349));(is&30)!==0||dg(h,s,l)}f.memoizedState=l;var g={value:l,getSnapshot:s};return f.queue=g,vg(pg.bind(null,h,g,n),[n]),h.flags|=2048,nl(9,fg.bind(null,h,g,l,s),void 0,null),l},useId:function(){var n=nr(),s=Tt.identifierPrefix;if(Xe){var l=Ar,h=Sr;l=(h&~(1<<32-jt(h)-1)).toString(32)+l,s=":"+s+"R"+l,l=el++,0<l&&(s+="H"+l.toString(32)),s+=":"}else l=AT++,s=":"+s+"r"+l.toString(32)+":";return n.memoizedState=s},unstable_isNewReconciler:!1},xT={readContext:Tn,useCallback:Sg,useContext:Tn,useEffect:Od,useImperativeHandle:Tg,useInsertionEffect:Eg,useLayoutEffect:Ig,useMemo:Ag,useReducer:Nd,useRef:_g,useState:function(){return Nd(tl)},useDebugValue:Md,useDeferredValue:function(n){var s=Sn();return Rg(s,gt.memoizedState,n)},useTransition:function(){var n=Nd(tl)[0],s=Sn().memoizedState;return[n,s]},useMutableSource:cg,useSyncExternalStore:hg,useId:Pg,unstable_isNewReconciler:!1},DT={readContext:Tn,useCallback:Sg,useContext:Tn,useEffect:Od,useImperativeHandle:Tg,useInsertionEffect:Eg,useLayoutEffect:Ig,useMemo:Ag,useReducer:bd,useRef:_g,useState:function(){return bd(tl)},useDebugValue:Md,useDeferredValue:function(n){var s=Sn();return gt===null?s.memoizedState=n:Rg(s,gt.memoizedState,n)},useTransition:function(){var n=bd(tl)[0],s=Sn().memoizedState;return[n,s]},useMutableSource:cg,useSyncExternalStore:hg,useId:Pg,unstable_isNewReconciler:!1};function Bn(n,s){if(n&&n.defaultProps){s=re({},s),n=n.defaultProps;for(var l in n)s[l]===void 0&&(s[l]=n[l]);return s}return s}function Ld(n,s,l,h){s=n.memoizedState,l=l(h,s),l=l==null?s:re({},s,l),n.memoizedState=l,n.lanes===0&&(n.updateQueue.baseState=l)}var Ju={isMounted:function(n){return(n=n._reactInternals)?Dn(n)===n:!1},enqueueSetState:function(n,s,l){n=n._reactInternals;var h=Kt(),f=ui(n),g=Pr(h,f);g.payload=s,l!=null&&(g.callback=l),s=si(n,g,f),s!==null&&($n(s,n,f,h),qu(s,n,f))},enqueueReplaceState:function(n,s,l){n=n._reactInternals;var h=Kt(),f=ui(n),g=Pr(h,f);g.tag=1,g.payload=s,l!=null&&(g.callback=l),s=si(n,g,f),s!==null&&($n(s,n,f,h),qu(s,n,f))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var l=Kt(),h=ui(n),f=Pr(l,h);f.tag=2,s!=null&&(f.callback=s),s=si(n,f,h),s!==null&&($n(s,n,h,l),qu(s,n,h))}};function Dg(n,s,l,h,f,g,v){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(h,g,v):s.prototype&&s.prototype.isPureReactComponent?!ja(l,h)||!ja(f,g):!0}function Vg(n,s,l){var h=!1,f=ni,g=s.contextType;return typeof g=="object"&&g!==null?g=Tn(g):(f=Jt(s)?Zi:bt.current,h=s.contextTypes,g=(h=h!=null)?yo(n,f):ni),s=new s(l,g),n.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Ju,n.stateNode=s,s._reactInternals=n,h&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=f,n.__reactInternalMemoizedMaskedChildContext=g),s}function Ng(n,s,l,h){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,h),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,h),s.state!==n&&Ju.enqueueReplaceState(s,s.state,null)}function Fd(n,s,l,h){var f=n.stateNode;f.props=l,f.state=n.memoizedState,f.refs={},Sd(n);var g=s.contextType;typeof g=="object"&&g!==null?f.context=Tn(g):(g=Jt(s)?Zi:bt.current,f.context=yo(n,g)),f.state=n.memoizedState,g=s.getDerivedStateFromProps,typeof g=="function"&&(Ld(n,s,g,l),f.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(s=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),s!==f.state&&Ju.enqueueReplaceState(f,f.state,null),Ku(n,l,f,h),f.state=n.memoizedState),typeof f.componentDidMount=="function"&&(n.flags|=4194308)}function Ao(n,s){try{var l="",h=s;do l+=Pe(h),h=h.return;while(h);var f=l}catch(g){f=`
Error generating stack: `+g.message+`
`+g.stack}return{value:n,source:s,stack:f,digest:null}}function Ud(n,s,l){return{value:n,source:null,stack:l??null,digest:s??null}}function Bd(n,s){try{console.error(s.value)}catch(l){setTimeout(function(){throw l})}}var VT=typeof WeakMap=="function"?WeakMap:Map;function bg(n,s,l){l=Pr(-1,l),l.tag=3,l.payload={element:null};var h=s.value;return l.callback=function(){sc||(sc=!0,tf=h),Bd(n,s)},l}function Og(n,s,l){l=Pr(-1,l),l.tag=3;var h=n.type.getDerivedStateFromError;if(typeof h=="function"){var f=s.value;l.payload=function(){return h(f)},l.callback=function(){Bd(n,s)}}var g=n.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(l.callback=function(){Bd(n,s),typeof h!="function"&&(ai===null?ai=new Set([this]):ai.add(this));var v=s.stack;this.componentDidCatch(s.value,{componentStack:v!==null?v:""})}),l}function Mg(n,s,l){var h=n.pingCache;if(h===null){h=n.pingCache=new VT;var f=new Set;h.set(s,f)}else f=h.get(s),f===void 0&&(f=new Set,h.set(s,f));f.has(l)||(f.add(l),n=HT.bind(null,n,s,l),s.then(n,n))}function Lg(n){do{var s;if((s=n.tag===13)&&(s=n.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return n;n=n.return}while(n!==null);return null}function Fg(n,s,l,h,f){return(n.mode&1)===0?(n===s?n.flags|=65536:(n.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(s=Pr(-1,1),s.tag=2,si(l,s,1))),l.lanes|=1),n):(n.flags|=65536,n.lanes=f,n)}var NT=pe.ReactCurrentOwner,Zt=!1;function qt(n,s,l,h){s.child=n===null?ig(s,null,l,h):Io(s,n.child,l,h)}function Ug(n,s,l,h,f){l=l.render;var g=s.ref;return To(s,f),h=Dd(n,s,l,h,g,f),l=Vd(),n!==null&&!Zt?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~f,Cr(n,s,f)):(Xe&&l&&pd(s),s.flags|=1,qt(n,s,h,f),s.child)}function Bg(n,s,l,h,f){if(n===null){var g=l.type;return typeof g=="function"&&!uf(g)&&g.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(s.tag=15,s.type=g,zg(n,s,g,h,f)):(n=hc(l.type,null,h,s,s.mode,f),n.ref=s.ref,n.return=s,s.child=n)}if(g=n.child,(n.lanes&f)===0){var v=g.memoizedProps;if(l=l.compare,l=l!==null?l:ja,l(v,h)&&n.ref===s.ref)return Cr(n,s,f)}return s.flags|=1,n=hi(g,h),n.ref=s.ref,n.return=s,s.child=n}function zg(n,s,l,h,f){if(n!==null){var g=n.memoizedProps;if(ja(g,h)&&n.ref===s.ref)if(Zt=!1,s.pendingProps=h=g,(n.lanes&f)!==0)(n.flags&131072)!==0&&(Zt=!0);else return s.lanes=n.lanes,Cr(n,s,f)}return zd(n,s,l,h,f)}function jg(n,s,l){var h=s.pendingProps,f=h.children,g=n!==null?n.memoizedState:null;if(h.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ge(Po,fn),fn|=l;else{if((l&1073741824)===0)return n=g!==null?g.baseLanes|l:l,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:n,cachePool:null,transitions:null},s.updateQueue=null,Ge(Po,fn),fn|=n,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=g!==null?g.baseLanes:l,Ge(Po,fn),fn|=h}else g!==null?(h=g.baseLanes|l,s.memoizedState=null):h=l,Ge(Po,fn),fn|=h;return qt(n,s,f,l),s.child}function $g(n,s){var l=s.ref;(n===null&&l!==null||n!==null&&n.ref!==l)&&(s.flags|=512,s.flags|=2097152)}function zd(n,s,l,h,f){var g=Jt(l)?Zi:bt.current;return g=yo(s,g),To(s,f),l=Dd(n,s,l,h,g,f),h=Vd(),n!==null&&!Zt?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~f,Cr(n,s,f)):(Xe&&h&&pd(s),s.flags|=1,qt(n,s,l,f),s.child)}function qg(n,s,l,h,f){if(Jt(l)){var g=!0;Mu(s)}else g=!1;if(To(s,f),s.stateNode===null)ec(n,s),Vg(s,l,h),Fd(s,l,h,f),h=!0;else if(n===null){var v=s.stateNode,A=s.memoizedProps;v.props=A;var C=v.context,B=l.contextType;typeof B=="object"&&B!==null?B=Tn(B):(B=Jt(l)?Zi:bt.current,B=yo(s,B));var W=l.getDerivedStateFromProps,Q=typeof W=="function"||typeof v.getSnapshotBeforeUpdate=="function";Q||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(A!==h||C!==B)&&Ng(s,v,h,B),ii=!1;var G=s.memoizedState;v.state=G,Ku(s,h,v,f),C=s.memoizedState,A!==h||G!==C||Xt.current||ii?(typeof W=="function"&&(Ld(s,l,W,h),C=s.memoizedState),(A=ii||Dg(s,l,A,h,G,C,B))?(Q||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(s.flags|=4194308)):(typeof v.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=h,s.memoizedState=C),v.props=h,v.state=C,v.context=B,h=A):(typeof v.componentDidMount=="function"&&(s.flags|=4194308),h=!1)}else{v=s.stateNode,og(n,s),A=s.memoizedProps,B=s.type===s.elementType?A:Bn(s.type,A),v.props=B,Q=s.pendingProps,G=v.context,C=l.contextType,typeof C=="object"&&C!==null?C=Tn(C):(C=Jt(l)?Zi:bt.current,C=yo(s,C));var ne=l.getDerivedStateFromProps;(W=typeof ne=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(A!==Q||G!==C)&&Ng(s,v,h,C),ii=!1,G=s.memoizedState,v.state=G,Ku(s,h,v,f);var ae=s.memoizedState;A!==Q||G!==ae||Xt.current||ii?(typeof ne=="function"&&(Ld(s,l,ne,h),ae=s.memoizedState),(B=ii||Dg(s,l,B,h,G,ae,C)||!1)?(W||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(h,ae,C),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(h,ae,C)),typeof v.componentDidUpdate=="function"&&(s.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof v.componentDidUpdate!="function"||A===n.memoizedProps&&G===n.memoizedState||(s.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||A===n.memoizedProps&&G===n.memoizedState||(s.flags|=1024),s.memoizedProps=h,s.memoizedState=ae),v.props=h,v.state=ae,v.context=C,h=B):(typeof v.componentDidUpdate!="function"||A===n.memoizedProps&&G===n.memoizedState||(s.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||A===n.memoizedProps&&G===n.memoizedState||(s.flags|=1024),h=!1)}return jd(n,s,l,h,g,f)}function jd(n,s,l,h,f,g){$g(n,s);var v=(s.flags&128)!==0;if(!h&&!v)return f&&Qm(s,l,!1),Cr(n,s,g);h=s.stateNode,NT.current=s;var A=v&&typeof l.getDerivedStateFromError!="function"?null:h.render();return s.flags|=1,n!==null&&v?(s.child=Io(s,n.child,null,g),s.child=Io(s,null,A,g)):qt(n,s,A,g),s.memoizedState=h.state,f&&Qm(s,l,!0),s.child}function Kg(n){var s=n.stateNode;s.pendingContext?Gm(n,s.pendingContext,s.pendingContext!==s.context):s.context&&Gm(n,s.context,!1),Ad(n,s.containerInfo)}function Hg(n,s,l,h,f){return Eo(),_d(f),s.flags|=256,qt(n,s,l,h),s.child}var $d={dehydrated:null,treeContext:null,retryLane:0};function qd(n){return{baseLanes:n,cachePool:null,transitions:null}}function Gg(n,s,l){var h=s.pendingProps,f=et.current,g=!1,v=(s.flags&128)!==0,A;if((A=v)||(A=n!==null&&n.memoizedState===null?!1:(f&2)!==0),A?(g=!0,s.flags&=-129):(n===null||n.memoizedState!==null)&&(f|=1),Ge(et,f&1),n===null)return yd(s),n=s.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((s.mode&1)===0?s.lanes=1:n.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(v=h.children,n=h.fallback,g?(h=s.mode,g=s.child,v={mode:"hidden",children:v},(h&1)===0&&g!==null?(g.childLanes=0,g.pendingProps=v):g=dc(v,h,0,null),n=us(n,h,l,null),g.return=s,n.return=s,g.sibling=n,s.child=g,s.child.memoizedState=qd(l),s.memoizedState=$d,n):Kd(s,v));if(f=n.memoizedState,f!==null&&(A=f.dehydrated,A!==null))return bT(n,s,v,h,A,f,l);if(g){g=h.fallback,v=s.mode,f=n.child,A=f.sibling;var C={mode:"hidden",children:h.children};return(v&1)===0&&s.child!==f?(h=s.child,h.childLanes=0,h.pendingProps=C,s.deletions=null):(h=hi(f,C),h.subtreeFlags=f.subtreeFlags&14680064),A!==null?g=hi(A,g):(g=us(g,v,l,null),g.flags|=2),g.return=s,h.return=s,h.sibling=g,s.child=h,h=g,g=s.child,v=n.child.memoizedState,v=v===null?qd(l):{baseLanes:v.baseLanes|l,cachePool:null,transitions:v.transitions},g.memoizedState=v,g.childLanes=n.childLanes&~l,s.memoizedState=$d,h}return g=n.child,n=g.sibling,h=hi(g,{mode:"visible",children:h.children}),(s.mode&1)===0&&(h.lanes=l),h.return=s,h.sibling=null,n!==null&&(l=s.deletions,l===null?(s.deletions=[n],s.flags|=16):l.push(n)),s.child=h,s.memoizedState=null,h}function Kd(n,s){return s=dc({mode:"visible",children:s},n.mode,0,null),s.return=n,n.child=s}function Zu(n,s,l,h){return h!==null&&_d(h),Io(s,n.child,null,l),n=Kd(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function bT(n,s,l,h,f,g,v){if(l)return s.flags&256?(s.flags&=-257,h=Ud(Error(t(422))),Zu(n,s,v,h)):s.memoizedState!==null?(s.child=n.child,s.flags|=128,null):(g=h.fallback,f=s.mode,h=dc({mode:"visible",children:h.children},f,0,null),g=us(g,f,v,null),g.flags|=2,h.return=s,g.return=s,h.sibling=g,s.child=h,(s.mode&1)!==0&&Io(s,n.child,null,v),s.child.memoizedState=qd(v),s.memoizedState=$d,g);if((s.mode&1)===0)return Zu(n,s,v,null);if(f.data==="$!"){if(h=f.nextSibling&&f.nextSibling.dataset,h)var A=h.dgst;return h=A,g=Error(t(419)),h=Ud(g,h,void 0),Zu(n,s,v,h)}if(A=(v&n.childLanes)!==0,Zt||A){if(h=Tt,h!==null){switch(v&-v){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=(f&(h.suspendedLanes|v))!==0?0:f,f!==0&&f!==g.retryLane&&(g.retryLane=f,Rr(n,f),$n(h,n,f,-1))}return lf(),h=Ud(Error(t(421))),Zu(n,s,v,h)}return f.data==="$?"?(s.flags|=128,s.child=n.child,s=GT.bind(null,n),f._reactRetry=s,null):(n=g.treeContext,dn=ei(f.nextSibling),hn=s,Xe=!0,Un=null,n!==null&&(In[wn++]=Sr,In[wn++]=Ar,In[wn++]=es,Sr=n.id,Ar=n.overflow,es=s),s=Kd(s,h.children),s.flags|=4096,s)}function Wg(n,s,l){n.lanes|=s;var h=n.alternate;h!==null&&(h.lanes|=s),wd(n.return,s,l)}function Hd(n,s,l,h,f){var g=n.memoizedState;g===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:h,tail:l,tailMode:f}:(g.isBackwards=s,g.rendering=null,g.renderingStartTime=0,g.last=h,g.tail=l,g.tailMode=f)}function Qg(n,s,l){var h=s.pendingProps,f=h.revealOrder,g=h.tail;if(qt(n,s,h.children,l),h=et.current,(h&2)!==0)h=h&1|2,s.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Wg(n,l,s);else if(n.tag===19)Wg(n,l,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}h&=1}if(Ge(et,h),(s.mode&1)===0)s.memoizedState=null;else switch(f){case"forwards":for(l=s.child,f=null;l!==null;)n=l.alternate,n!==null&&Hu(n)===null&&(f=l),l=l.sibling;l=f,l===null?(f=s.child,s.child=null):(f=l.sibling,l.sibling=null),Hd(s,!1,f,l,g);break;case"backwards":for(l=null,f=s.child,s.child=null;f!==null;){if(n=f.alternate,n!==null&&Hu(n)===null){s.child=f;break}n=f.sibling,f.sibling=l,l=f,f=n}Hd(s,!0,l,null,g);break;case"together":Hd(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function ec(n,s){(s.mode&1)===0&&n!==null&&(n.alternate=null,s.alternate=null,s.flags|=2)}function Cr(n,s,l){if(n!==null&&(s.dependencies=n.dependencies),ss|=s.lanes,(l&s.childLanes)===0)return null;if(n!==null&&s.child!==n.child)throw Error(t(153));if(s.child!==null){for(n=s.child,l=hi(n,n.pendingProps),s.child=l,l.return=s;n.sibling!==null;)n=n.sibling,l=l.sibling=hi(n,n.pendingProps),l.return=s;l.sibling=null}return s.child}function OT(n,s,l){switch(s.tag){case 3:Kg(s),Eo();break;case 5:ug(s);break;case 1:Jt(s.type)&&Mu(s);break;case 4:Ad(s,s.stateNode.containerInfo);break;case 10:var h=s.type._context,f=s.memoizedProps.value;Ge(ju,h._currentValue),h._currentValue=f;break;case 13:if(h=s.memoizedState,h!==null)return h.dehydrated!==null?(Ge(et,et.current&1),s.flags|=128,null):(l&s.child.childLanes)!==0?Gg(n,s,l):(Ge(et,et.current&1),n=Cr(n,s,l),n!==null?n.sibling:null);Ge(et,et.current&1);break;case 19:if(h=(l&s.childLanes)!==0,(n.flags&128)!==0){if(h)return Qg(n,s,l);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Ge(et,et.current),h)break;return null;case 22:case 23:return s.lanes=0,jg(n,s,l)}return Cr(n,s,l)}var Yg,Gd,Xg,Jg;Yg=function(n,s){for(var l=s.child;l!==null;){if(l.tag===5||l.tag===6)n.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},Gd=function(){},Xg=function(n,s,l,h){var f=n.memoizedProps;if(f!==h){n=s.stateNode,rs(tr.current);var g=null;switch(l){case"input":f=Mi(n,f),h=Mi(n,h),g=[];break;case"select":f=re({},f,{value:void 0}),h=re({},h,{value:void 0}),g=[];break;case"textarea":f=ya(n,f),h=ya(n,h),g=[];break;default:typeof f.onClick!="function"&&typeof h.onClick=="function"&&(n.onclick=Nu)}Ta(l,h);var v;l=null;for(B in f)if(!h.hasOwnProperty(B)&&f.hasOwnProperty(B)&&f[B]!=null)if(B==="style"){var A=f[B];for(v in A)A.hasOwnProperty(v)&&(l||(l={}),l[v]="")}else B!=="dangerouslySetInnerHTML"&&B!=="children"&&B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&B!=="autoFocus"&&(o.hasOwnProperty(B)?g||(g=[]):(g=g||[]).push(B,null));for(B in h){var C=h[B];if(A=f!=null?f[B]:void 0,h.hasOwnProperty(B)&&C!==A&&(C!=null||A!=null))if(B==="style")if(A){for(v in A)!A.hasOwnProperty(v)||C&&C.hasOwnProperty(v)||(l||(l={}),l[v]="");for(v in C)C.hasOwnProperty(v)&&A[v]!==C[v]&&(l||(l={}),l[v]=C[v])}else l||(g||(g=[]),g.push(B,l)),l=C;else B==="dangerouslySetInnerHTML"?(C=C?C.__html:void 0,A=A?A.__html:void 0,C!=null&&A!==C&&(g=g||[]).push(B,C)):B==="children"?typeof C!="string"&&typeof C!="number"||(g=g||[]).push(B,""+C):B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&(o.hasOwnProperty(B)?(C!=null&&B==="onScroll"&&We("scroll",n),g||A===C||(g=[])):(g=g||[]).push(B,C))}l&&(g=g||[]).push("style",l);var B=g;(s.updateQueue=B)&&(s.flags|=4)}},Jg=function(n,s,l,h){l!==h&&(s.flags|=4)};function rl(n,s){if(!Xe)switch(n.tailMode){case"hidden":s=n.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?n.tail=null:l.sibling=null;break;case"collapsed":l=n.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:h.sibling=null}}function Mt(n){var s=n.alternate!==null&&n.alternate.child===n.child,l=0,h=0;if(s)for(var f=n.child;f!==null;)l|=f.lanes|f.childLanes,h|=f.subtreeFlags&14680064,h|=f.flags&14680064,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)l|=f.lanes|f.childLanes,h|=f.subtreeFlags,h|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=h,n.childLanes=l,s}function MT(n,s,l){var h=s.pendingProps;switch(md(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mt(s),null;case 1:return Jt(s.type)&&Ou(),Mt(s),null;case 3:return h=s.stateNode,So(),Qe(Xt),Qe(bt),Cd(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(n===null||n.child===null)&&(Bu(s)?s.flags|=4:n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Un!==null&&(sf(Un),Un=null))),Gd(n,s),Mt(s),null;case 5:Rd(s);var f=rs(Ja.current);if(l=s.type,n!==null&&s.stateNode!=null)Xg(n,s,l,h,f),n.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!h){if(s.stateNode===null)throw Error(t(166));return Mt(s),null}if(n=rs(tr.current),Bu(s)){h=s.stateNode,l=s.type;var g=s.memoizedProps;switch(h[er]=s,h[Ga]=g,n=(s.mode&1)!==0,l){case"dialog":We("cancel",h),We("close",h);break;case"iframe":case"object":case"embed":We("load",h);break;case"video":case"audio":for(f=0;f<qa.length;f++)We(qa[f],h);break;case"source":We("error",h);break;case"img":case"image":case"link":We("error",h),We("load",h);break;case"details":We("toggle",h);break;case"input":Fs(h,g),We("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!g.multiple},We("invalid",h);break;case"textarea":Bs(h,g),We("invalid",h)}Ta(l,g),f=null;for(var v in g)if(g.hasOwnProperty(v)){var A=g[v];v==="children"?typeof A=="string"?h.textContent!==A&&(g.suppressHydrationWarning!==!0&&Vu(h.textContent,A,n),f=["children",A]):typeof A=="number"&&h.textContent!==""+A&&(g.suppressHydrationWarning!==!0&&Vu(h.textContent,A,n),f=["children",""+A]):o.hasOwnProperty(v)&&A!=null&&v==="onScroll"&&We("scroll",h)}switch(l){case"input":dr(h),iu(h,g,!0);break;case"textarea":dr(h),_a(h);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(h.onclick=Nu)}h=f,s.updateQueue=h,h!==null&&(s.flags|=4)}else{v=f.nodeType===9?f:f.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=ft(l)),n==="http://www.w3.org/1999/xhtml"?l==="script"?(n=v.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof h.is=="string"?n=v.createElement(l,{is:h.is}):(n=v.createElement(l),l==="select"&&(v=n,h.multiple?v.multiple=!0:h.size&&(v.size=h.size))):n=v.createElementNS(n,l),n[er]=s,n[Ga]=h,Yg(n,s,!1,!1),s.stateNode=n;e:{switch(v=Sa(l,h),l){case"dialog":We("cancel",n),We("close",n),f=h;break;case"iframe":case"object":case"embed":We("load",n),f=h;break;case"video":case"audio":for(f=0;f<qa.length;f++)We(qa[f],n);f=h;break;case"source":We("error",n),f=h;break;case"img":case"image":case"link":We("error",n),We("load",n),f=h;break;case"details":We("toggle",n),f=h;break;case"input":Fs(n,h),f=Mi(n,h),We("invalid",n);break;case"option":f=h;break;case"select":n._wrapperState={wasMultiple:!!h.multiple},f=re({},h,{value:void 0}),We("invalid",n);break;case"textarea":Bs(n,h),f=ya(n,h),We("invalid",n);break;default:f=h}Ta(l,f),A=f;for(g in A)if(A.hasOwnProperty(g)){var C=A[g];g==="style"?Ia(n,C):g==="dangerouslySetInnerHTML"?(C=C?C.__html:void 0,C!=null&&va(n,C)):g==="children"?typeof C=="string"?(l!=="textarea"||C!=="")&&$r(n,C):typeof C=="number"&&$r(n,""+C):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(o.hasOwnProperty(g)?C!=null&&g==="onScroll"&&We("scroll",n):C!=null&&te(n,g,C,v))}switch(l){case"input":dr(n),iu(n,h,!1);break;case"textarea":dr(n),_a(n);break;case"option":h.value!=null&&n.setAttribute("value",""+Fe(h.value));break;case"select":n.multiple=!!h.multiple,g=h.value,g!=null?pr(n,!!h.multiple,g,!1):h.defaultValue!=null&&pr(n,!!h.multiple,h.defaultValue,!0);break;default:typeof f.onClick=="function"&&(n.onclick=Nu)}switch(l){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Mt(s),null;case 6:if(n&&s.stateNode!=null)Jg(n,s,n.memoizedProps,h);else{if(typeof h!="string"&&s.stateNode===null)throw Error(t(166));if(l=rs(Ja.current),rs(tr.current),Bu(s)){if(h=s.stateNode,l=s.memoizedProps,h[er]=s,(g=h.nodeValue!==l)&&(n=hn,n!==null))switch(n.tag){case 3:Vu(h.nodeValue,l,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Vu(h.nodeValue,l,(n.mode&1)!==0)}g&&(s.flags|=4)}else h=(l.nodeType===9?l:l.ownerDocument).createTextNode(h),h[er]=s,s.stateNode=h}return Mt(s),null;case 13:if(Qe(et),h=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Xe&&dn!==null&&(s.mode&1)!==0&&(s.flags&128)===0)tg(),Eo(),s.flags|=98560,g=!1;else if(g=Bu(s),h!==null&&h.dehydrated!==null){if(n===null){if(!g)throw Error(t(318));if(g=s.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(t(317));g[er]=s}else Eo(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Mt(s),g=!1}else Un!==null&&(sf(Un),Un=null),g=!0;if(!g)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=l,s):(h=h!==null,h!==(n!==null&&n.memoizedState!==null)&&h&&(s.child.flags|=8192,(s.mode&1)!==0&&(n===null||(et.current&1)!==0?yt===0&&(yt=3):lf())),s.updateQueue!==null&&(s.flags|=4),Mt(s),null);case 4:return So(),Gd(n,s),n===null&&Ka(s.stateNode.containerInfo),Mt(s),null;case 10:return Id(s.type._context),Mt(s),null;case 17:return Jt(s.type)&&Ou(),Mt(s),null;case 19:if(Qe(et),g=s.memoizedState,g===null)return Mt(s),null;if(h=(s.flags&128)!==0,v=g.rendering,v===null)if(h)rl(g,!1);else{if(yt!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(v=Hu(n),v!==null){for(s.flags|=128,rl(g,!1),h=v.updateQueue,h!==null&&(s.updateQueue=h,s.flags|=4),s.subtreeFlags=0,h=l,l=s.child;l!==null;)g=l,n=h,g.flags&=14680066,v=g.alternate,v===null?(g.childLanes=0,g.lanes=n,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=v.childLanes,g.lanes=v.lanes,g.child=v.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=v.memoizedProps,g.memoizedState=v.memoizedState,g.updateQueue=v.updateQueue,g.type=v.type,n=v.dependencies,g.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),l=l.sibling;return Ge(et,et.current&1|2),s.child}n=n.sibling}g.tail!==null&&He()>Co&&(s.flags|=128,h=!0,rl(g,!1),s.lanes=4194304)}else{if(!h)if(n=Hu(v),n!==null){if(s.flags|=128,h=!0,l=n.updateQueue,l!==null&&(s.updateQueue=l,s.flags|=4),rl(g,!0),g.tail===null&&g.tailMode==="hidden"&&!v.alternate&&!Xe)return Mt(s),null}else 2*He()-g.renderingStartTime>Co&&l!==1073741824&&(s.flags|=128,h=!0,rl(g,!1),s.lanes=4194304);g.isBackwards?(v.sibling=s.child,s.child=v):(l=g.last,l!==null?l.sibling=v:s.child=v,g.last=v)}return g.tail!==null?(s=g.tail,g.rendering=s,g.tail=s.sibling,g.renderingStartTime=He(),s.sibling=null,l=et.current,Ge(et,h?l&1|2:l&1),s):(Mt(s),null);case 22:case 23:return af(),h=s.memoizedState!==null,n!==null&&n.memoizedState!==null!==h&&(s.flags|=8192),h&&(s.mode&1)!==0?(fn&1073741824)!==0&&(Mt(s),s.subtreeFlags&6&&(s.flags|=8192)):Mt(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function LT(n,s){switch(md(s),s.tag){case 1:return Jt(s.type)&&Ou(),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return So(),Qe(Xt),Qe(bt),Cd(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 5:return Rd(s),null;case 13:if(Qe(et),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(t(340));Eo()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return Qe(et),null;case 4:return So(),null;case 10:return Id(s.type._context),null;case 22:case 23:return af(),null;case 24:return null;default:return null}}var tc=!1,Lt=!1,FT=typeof WeakSet=="function"?WeakSet:Set,oe=null;function Ro(n,s){var l=n.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(h){it(n,s,h)}else l.current=null}function Wd(n,s,l){try{l()}catch(h){it(n,s,h)}}var Zg=!1;function UT(n,s){if(od=Xr,n=Dm(),Jh(n)){if("selectionStart"in n)var l={start:n.selectionStart,end:n.selectionEnd};else e:{l=(l=n.ownerDocument)&&l.defaultView||window;var h=l.getSelection&&l.getSelection();if(h&&h.rangeCount!==0){l=h.anchorNode;var f=h.anchorOffset,g=h.focusNode;h=h.focusOffset;try{l.nodeType,g.nodeType}catch{l=null;break e}var v=0,A=-1,C=-1,B=0,W=0,Q=n,G=null;t:for(;;){for(var ne;Q!==l||f!==0&&Q.nodeType!==3||(A=v+f),Q!==g||h!==0&&Q.nodeType!==3||(C=v+h),Q.nodeType===3&&(v+=Q.nodeValue.length),(ne=Q.firstChild)!==null;)G=Q,Q=ne;for(;;){if(Q===n)break t;if(G===l&&++B===f&&(A=v),G===g&&++W===h&&(C=v),(ne=Q.nextSibling)!==null)break;Q=G,G=Q.parentNode}Q=ne}l=A===-1||C===-1?null:{start:A,end:C}}else l=null}l=l||{start:0,end:0}}else l=null;for(ad={focusedElem:n,selectionRange:l},Xr=!1,oe=s;oe!==null;)if(s=oe,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,oe=n;else for(;oe!==null;){s=oe;try{var ae=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(ae!==null){var ue=ae.memoizedProps,lt=ae.memoizedState,L=s.stateNode,D=L.getSnapshotBeforeUpdate(s.elementType===s.type?ue:Bn(s.type,ue),lt);L.__reactInternalSnapshotBeforeUpdate=D}break;case 3:var F=s.stateNode.containerInfo;F.nodeType===1?F.textContent="":F.nodeType===9&&F.documentElement&&F.removeChild(F.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(X){it(s,s.return,X)}if(n=s.sibling,n!==null){n.return=s.return,oe=n;break}oe=s.return}return ae=Zg,Zg=!1,ae}function il(n,s,l){var h=s.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var f=h=h.next;do{if((f.tag&n)===n){var g=f.destroy;f.destroy=void 0,g!==void 0&&Wd(s,l,g)}f=f.next}while(f!==h)}}function nc(n,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var l=s=s.next;do{if((l.tag&n)===n){var h=l.create;l.destroy=h()}l=l.next}while(l!==s)}}function Qd(n){var s=n.ref;if(s!==null){var l=n.stateNode;switch(n.tag){case 5:n=l;break;default:n=l}typeof s=="function"?s(n):s.current=n}}function ey(n){var s=n.alternate;s!==null&&(n.alternate=null,ey(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&(delete s[er],delete s[Ga],delete s[hd],delete s[IT],delete s[wT])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function ty(n){return n.tag===5||n.tag===3||n.tag===4}function ny(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||ty(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Yd(n,s,l){var h=n.tag;if(h===5||h===6)n=n.stateNode,s?l.nodeType===8?l.parentNode.insertBefore(n,s):l.insertBefore(n,s):(l.nodeType===8?(s=l.parentNode,s.insertBefore(n,l)):(s=l,s.appendChild(n)),l=l._reactRootContainer,l!=null||s.onclick!==null||(s.onclick=Nu));else if(h!==4&&(n=n.child,n!==null))for(Yd(n,s,l),n=n.sibling;n!==null;)Yd(n,s,l),n=n.sibling}function Xd(n,s,l){var h=n.tag;if(h===5||h===6)n=n.stateNode,s?l.insertBefore(n,s):l.appendChild(n);else if(h!==4&&(n=n.child,n!==null))for(Xd(n,s,l),n=n.sibling;n!==null;)Xd(n,s,l),n=n.sibling}var Ct=null,zn=!1;function oi(n,s,l){for(l=l.child;l!==null;)ry(n,s,l),l=l.sibling}function ry(n,s,l){if(an&&typeof an.onCommitFiberUnmount=="function")try{an.onCommitFiberUnmount(Ki,l)}catch{}switch(l.tag){case 5:Lt||Ro(l,s);case 6:var h=Ct,f=zn;Ct=null,oi(n,s,l),Ct=h,zn=f,Ct!==null&&(zn?(n=Ct,l=l.stateNode,n.nodeType===8?n.parentNode.removeChild(l):n.removeChild(l)):Ct.removeChild(l.stateNode));break;case 18:Ct!==null&&(zn?(n=Ct,l=l.stateNode,n.nodeType===8?cd(n.parentNode,l):n.nodeType===1&&cd(n,l),Mn(n)):cd(Ct,l.stateNode));break;case 4:h=Ct,f=zn,Ct=l.stateNode.containerInfo,zn=!0,oi(n,s,l),Ct=h,zn=f;break;case 0:case 11:case 14:case 15:if(!Lt&&(h=l.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){f=h=h.next;do{var g=f,v=g.destroy;g=g.tag,v!==void 0&&((g&2)!==0||(g&4)!==0)&&Wd(l,s,v),f=f.next}while(f!==h)}oi(n,s,l);break;case 1:if(!Lt&&(Ro(l,s),h=l.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=l.memoizedProps,h.state=l.memoizedState,h.componentWillUnmount()}catch(A){it(l,s,A)}oi(n,s,l);break;case 21:oi(n,s,l);break;case 22:l.mode&1?(Lt=(h=Lt)||l.memoizedState!==null,oi(n,s,l),Lt=h):oi(n,s,l);break;default:oi(n,s,l)}}function iy(n){var s=n.updateQueue;if(s!==null){n.updateQueue=null;var l=n.stateNode;l===null&&(l=n.stateNode=new FT),s.forEach(function(h){var f=WT.bind(null,n,h);l.has(h)||(l.add(h),h.then(f,f))})}}function jn(n,s){var l=s.deletions;if(l!==null)for(var h=0;h<l.length;h++){var f=l[h];try{var g=n,v=s,A=v;e:for(;A!==null;){switch(A.tag){case 5:Ct=A.stateNode,zn=!1;break e;case 3:Ct=A.stateNode.containerInfo,zn=!0;break e;case 4:Ct=A.stateNode.containerInfo,zn=!0;break e}A=A.return}if(Ct===null)throw Error(t(160));ry(g,v,f),Ct=null,zn=!1;var C=f.alternate;C!==null&&(C.return=null),f.return=null}catch(B){it(f,s,B)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)sy(s,n),s=s.sibling}function sy(n,s){var l=n.alternate,h=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(jn(s,n),rr(n),h&4){try{il(3,n,n.return),nc(3,n)}catch(ue){it(n,n.return,ue)}try{il(5,n,n.return)}catch(ue){it(n,n.return,ue)}}break;case 1:jn(s,n),rr(n),h&512&&l!==null&&Ro(l,l.return);break;case 5:if(jn(s,n),rr(n),h&512&&l!==null&&Ro(l,l.return),n.flags&32){var f=n.stateNode;try{$r(f,"")}catch(ue){it(n,n.return,ue)}}if(h&4&&(f=n.stateNode,f!=null)){var g=n.memoizedProps,v=l!==null?l.memoizedProps:g,A=n.type,C=n.updateQueue;if(n.updateQueue=null,C!==null)try{A==="input"&&g.type==="radio"&&g.name!=null&&ma(f,g),Sa(A,v);var B=Sa(A,g);for(v=0;v<C.length;v+=2){var W=C[v],Q=C[v+1];W==="style"?Ia(f,Q):W==="dangerouslySetInnerHTML"?va(f,Q):W==="children"?$r(f,Q):te(f,W,Q,B)}switch(A){case"input":ga(f,g);break;case"textarea":zs(f,g);break;case"select":var G=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!g.multiple;var ne=g.value;ne!=null?pr(f,!!g.multiple,ne,!1):G!==!!g.multiple&&(g.defaultValue!=null?pr(f,!!g.multiple,g.defaultValue,!0):pr(f,!!g.multiple,g.multiple?[]:"",!1))}f[Ga]=g}catch(ue){it(n,n.return,ue)}}break;case 6:if(jn(s,n),rr(n),h&4){if(n.stateNode===null)throw Error(t(162));f=n.stateNode,g=n.memoizedProps;try{f.nodeValue=g}catch(ue){it(n,n.return,ue)}}break;case 3:if(jn(s,n),rr(n),h&4&&l!==null&&l.memoizedState.isDehydrated)try{Mn(s.containerInfo)}catch(ue){it(n,n.return,ue)}break;case 4:jn(s,n),rr(n);break;case 13:jn(s,n),rr(n),f=n.child,f.flags&8192&&(g=f.memoizedState!==null,f.stateNode.isHidden=g,!g||f.alternate!==null&&f.alternate.memoizedState!==null||(ef=He())),h&4&&iy(n);break;case 22:if(W=l!==null&&l.memoizedState!==null,n.mode&1?(Lt=(B=Lt)||W,jn(s,n),Lt=B):jn(s,n),rr(n),h&8192){if(B=n.memoizedState!==null,(n.stateNode.isHidden=B)&&!W&&(n.mode&1)!==0)for(oe=n,W=n.child;W!==null;){for(Q=oe=W;oe!==null;){switch(G=oe,ne=G.child,G.tag){case 0:case 11:case 14:case 15:il(4,G,G.return);break;case 1:Ro(G,G.return);var ae=G.stateNode;if(typeof ae.componentWillUnmount=="function"){h=G,l=G.return;try{s=h,ae.props=s.memoizedProps,ae.state=s.memoizedState,ae.componentWillUnmount()}catch(ue){it(h,l,ue)}}break;case 5:Ro(G,G.return);break;case 22:if(G.memoizedState!==null){ly(Q);continue}}ne!==null?(ne.return=G,oe=ne):ly(Q)}W=W.sibling}e:for(W=null,Q=n;;){if(Q.tag===5){if(W===null){W=Q;try{f=Q.stateNode,B?(g=f.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(A=Q.stateNode,C=Q.memoizedProps.style,v=C!=null&&C.hasOwnProperty("display")?C.display:null,A.style.display=Ea("display",v))}catch(ue){it(n,n.return,ue)}}}else if(Q.tag===6){if(W===null)try{Q.stateNode.nodeValue=B?"":Q.memoizedProps}catch(ue){it(n,n.return,ue)}}else if((Q.tag!==22&&Q.tag!==23||Q.memoizedState===null||Q===n)&&Q.child!==null){Q.child.return=Q,Q=Q.child;continue}if(Q===n)break e;for(;Q.sibling===null;){if(Q.return===null||Q.return===n)break e;W===Q&&(W=null),Q=Q.return}W===Q&&(W=null),Q.sibling.return=Q.return,Q=Q.sibling}}break;case 19:jn(s,n),rr(n),h&4&&iy(n);break;case 21:break;default:jn(s,n),rr(n)}}function rr(n){var s=n.flags;if(s&2){try{e:{for(var l=n.return;l!==null;){if(ty(l)){var h=l;break e}l=l.return}throw Error(t(160))}switch(h.tag){case 5:var f=h.stateNode;h.flags&32&&($r(f,""),h.flags&=-33);var g=ny(n);Xd(n,g,f);break;case 3:case 4:var v=h.stateNode.containerInfo,A=ny(n);Yd(n,A,v);break;default:throw Error(t(161))}}catch(C){it(n,n.return,C)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function BT(n,s,l){oe=n,oy(n)}function oy(n,s,l){for(var h=(n.mode&1)!==0;oe!==null;){var f=oe,g=f.child;if(f.tag===22&&h){var v=f.memoizedState!==null||tc;if(!v){var A=f.alternate,C=A!==null&&A.memoizedState!==null||Lt;A=tc;var B=Lt;if(tc=v,(Lt=C)&&!B)for(oe=f;oe!==null;)v=oe,C=v.child,v.tag===22&&v.memoizedState!==null?uy(f):C!==null?(C.return=v,oe=C):uy(f);for(;g!==null;)oe=g,oy(g),g=g.sibling;oe=f,tc=A,Lt=B}ay(n)}else(f.subtreeFlags&8772)!==0&&g!==null?(g.return=f,oe=g):ay(n)}}function ay(n){for(;oe!==null;){var s=oe;if((s.flags&8772)!==0){var l=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:Lt||nc(5,s);break;case 1:var h=s.stateNode;if(s.flags&4&&!Lt)if(l===null)h.componentDidMount();else{var f=s.elementType===s.type?l.memoizedProps:Bn(s.type,l.memoizedProps);h.componentDidUpdate(f,l.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var g=s.updateQueue;g!==null&&lg(s,g,h);break;case 3:var v=s.updateQueue;if(v!==null){if(l=null,s.child!==null)switch(s.child.tag){case 5:l=s.child.stateNode;break;case 1:l=s.child.stateNode}lg(s,v,l)}break;case 5:var A=s.stateNode;if(l===null&&s.flags&4){l=A;var C=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":C.autoFocus&&l.focus();break;case"img":C.src&&(l.src=C.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var B=s.alternate;if(B!==null){var W=B.memoizedState;if(W!==null){var Q=W.dehydrated;Q!==null&&Mn(Q)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Lt||s.flags&512&&Qd(s)}catch(G){it(s,s.return,G)}}if(s===n){oe=null;break}if(l=s.sibling,l!==null){l.return=s.return,oe=l;break}oe=s.return}}function ly(n){for(;oe!==null;){var s=oe;if(s===n){oe=null;break}var l=s.sibling;if(l!==null){l.return=s.return,oe=l;break}oe=s.return}}function uy(n){for(;oe!==null;){var s=oe;try{switch(s.tag){case 0:case 11:case 15:var l=s.return;try{nc(4,s)}catch(C){it(s,l,C)}break;case 1:var h=s.stateNode;if(typeof h.componentDidMount=="function"){var f=s.return;try{h.componentDidMount()}catch(C){it(s,f,C)}}var g=s.return;try{Qd(s)}catch(C){it(s,g,C)}break;case 5:var v=s.return;try{Qd(s)}catch(C){it(s,v,C)}}}catch(C){it(s,s.return,C)}if(s===n){oe=null;break}var A=s.sibling;if(A!==null){A.return=s.return,oe=A;break}oe=s.return}}var zT=Math.ceil,rc=pe.ReactCurrentDispatcher,Jd=pe.ReactCurrentOwner,An=pe.ReactCurrentBatchConfig,Oe=0,Tt=null,ct=null,kt=0,fn=0,Po=ti(0),yt=0,sl=null,ss=0,ic=0,Zd=0,ol=null,en=null,ef=0,Co=1/0,kr=null,sc=!1,tf=null,ai=null,oc=!1,li=null,ac=0,al=0,nf=null,lc=-1,uc=0;function Kt(){return(Oe&6)!==0?He():lc!==-1?lc:lc=He()}function ui(n){return(n.mode&1)===0?1:(Oe&2)!==0&&kt!==0?kt&-kt:ST.transition!==null?(uc===0&&(uc=Gi()),uc):(n=xe,n!==0||(n=window.event,n=n===void 0?16:Oa(n.type)),n)}function $n(n,s,l,h){if(50<al)throw al=0,nf=null,Error(t(185));Gr(n,l,h),((Oe&2)===0||n!==Tt)&&(n===Tt&&((Oe&2)===0&&(ic|=l),yt===4&&ci(n,kt)),tn(n,h),l===1&&Oe===0&&(s.mode&1)===0&&(Co=He()+500,Lu&&ri()))}function tn(n,s){var l=n.callbackNode;yr(n,s);var h=Hi(n,n===Tt?kt:0);if(h===0)l!==null&&xa(l),n.callbackNode=null,n.callbackPriority=0;else if(s=h&-h,n.callbackPriority!==s){if(l!=null&&xa(l),s===1)n.tag===0?TT(hy.bind(null,n)):Ym(hy.bind(null,n)),vT(function(){(Oe&6)===0&&ri()}),l=null;else{switch(Qr(h)){case 1:l=qi;break;case 4:l=qr;break;case 16:l=_n;break;case 536870912:l=uu;break;default:l=_n}l=vy(l,cy.bind(null,n))}n.callbackPriority=s,n.callbackNode=l}}function cy(n,s){if(lc=-1,uc=0,(Oe&6)!==0)throw Error(t(327));var l=n.callbackNode;if(ko()&&n.callbackNode!==l)return null;var h=Hi(n,n===Tt?kt:0);if(h===0)return null;if((h&30)!==0||(h&n.expiredLanes)!==0||s)s=cc(n,h);else{s=h;var f=Oe;Oe|=2;var g=fy();(Tt!==n||kt!==s)&&(kr=null,Co=He()+500,as(n,s));do try{qT();break}catch(A){dy(n,A)}while(!0);Ed(),rc.current=g,Oe=f,ct!==null?s=0:(Tt=null,kt=0,s=yt)}if(s!==0){if(s===2&&(f=ln(n),f!==0&&(h=f,s=rf(n,f))),s===1)throw l=sl,as(n,0),ci(n,h),tn(n,He()),l;if(s===6)ci(n,h);else{if(f=n.current.alternate,(h&30)===0&&!jT(f)&&(s=cc(n,h),s===2&&(g=ln(n),g!==0&&(h=g,s=rf(n,g))),s===1))throw l=sl,as(n,0),ci(n,h),tn(n,He()),l;switch(n.finishedWork=f,n.finishedLanes=h,s){case 0:case 1:throw Error(t(345));case 2:ls(n,en,kr);break;case 3:if(ci(n,h),(h&130023424)===h&&(s=ef+500-He(),10<s)){if(Hi(n,0)!==0)break;if(f=n.suspendedLanes,(f&h)!==h){Kt(),n.pingedLanes|=n.suspendedLanes&f;break}n.timeoutHandle=ud(ls.bind(null,n,en,kr),s);break}ls(n,en,kr);break;case 4:if(ci(n,h),(h&4194240)===h)break;for(s=n.eventTimes,f=-1;0<h;){var v=31-jt(h);g=1<<v,v=s[v],v>f&&(f=v),h&=~g}if(h=f,h=He()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*zT(h/1960))-h,10<h){n.timeoutHandle=ud(ls.bind(null,n,en,kr),h);break}ls(n,en,kr);break;case 5:ls(n,en,kr);break;default:throw Error(t(329))}}}return tn(n,He()),n.callbackNode===l?cy.bind(null,n):null}function rf(n,s){var l=ol;return n.current.memoizedState.isDehydrated&&(as(n,s).flags|=256),n=cc(n,s),n!==2&&(s=en,en=l,s!==null&&sf(s)),n}function sf(n){en===null?en=n:en.push.apply(en,n)}function jT(n){for(var s=n;;){if(s.flags&16384){var l=s.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var h=0;h<l.length;h++){var f=l[h],g=f.getSnapshot;f=f.value;try{if(!Fn(g(),f))return!1}catch{return!1}}}if(l=s.child,s.subtreeFlags&16384&&l!==null)l.return=s,s=l;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function ci(n,s){for(s&=~Zd,s&=~ic,n.suspendedLanes|=s,n.pingedLanes&=~s,n=n.expirationTimes;0<s;){var l=31-jt(s),h=1<<l;n[l]=-1,s&=~h}}function hy(n){if((Oe&6)!==0)throw Error(t(327));ko();var s=Hi(n,0);if((s&1)===0)return tn(n,He()),null;var l=cc(n,s);if(n.tag!==0&&l===2){var h=ln(n);h!==0&&(s=h,l=rf(n,h))}if(l===1)throw l=sl,as(n,0),ci(n,s),tn(n,He()),l;if(l===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=s,ls(n,en,kr),tn(n,He()),null}function of(n,s){var l=Oe;Oe|=1;try{return n(s)}finally{Oe=l,Oe===0&&(Co=He()+500,Lu&&ri())}}function os(n){li!==null&&li.tag===0&&(Oe&6)===0&&ko();var s=Oe;Oe|=1;var l=An.transition,h=xe;try{if(An.transition=null,xe=1,n)return n()}finally{xe=h,An.transition=l,Oe=s,(Oe&6)===0&&ri()}}function af(){fn=Po.current,Qe(Po)}function as(n,s){n.finishedWork=null,n.finishedLanes=0;var l=n.timeoutHandle;if(l!==-1&&(n.timeoutHandle=-1,_T(l)),ct!==null)for(l=ct.return;l!==null;){var h=l;switch(md(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&Ou();break;case 3:So(),Qe(Xt),Qe(bt),Cd();break;case 5:Rd(h);break;case 4:So();break;case 13:Qe(et);break;case 19:Qe(et);break;case 10:Id(h.type._context);break;case 22:case 23:af()}l=l.return}if(Tt=n,ct=n=hi(n.current,null),kt=fn=s,yt=0,sl=null,Zd=ic=ss=0,en=ol=null,ns!==null){for(s=0;s<ns.length;s++)if(l=ns[s],h=l.interleaved,h!==null){l.interleaved=null;var f=h.next,g=l.pending;if(g!==null){var v=g.next;g.next=f,h.next=v}l.pending=h}ns=null}return n}function dy(n,s){do{var l=ct;try{if(Ed(),Gu.current=Xu,Wu){for(var h=tt.memoizedState;h!==null;){var f=h.queue;f!==null&&(f.pending=null),h=h.next}Wu=!1}if(is=0,wt=gt=tt=null,Za=!1,el=0,Jd.current=null,l===null||l.return===null){yt=1,sl=s,ct=null;break}e:{var g=n,v=l.return,A=l,C=s;if(s=kt,A.flags|=32768,C!==null&&typeof C=="object"&&typeof C.then=="function"){var B=C,W=A,Q=W.tag;if((W.mode&1)===0&&(Q===0||Q===11||Q===15)){var G=W.alternate;G?(W.updateQueue=G.updateQueue,W.memoizedState=G.memoizedState,W.lanes=G.lanes):(W.updateQueue=null,W.memoizedState=null)}var ne=Lg(v);if(ne!==null){ne.flags&=-257,Fg(ne,v,A,g,s),ne.mode&1&&Mg(g,B,s),s=ne,C=B;var ae=s.updateQueue;if(ae===null){var ue=new Set;ue.add(C),s.updateQueue=ue}else ae.add(C);break e}else{if((s&1)===0){Mg(g,B,s),lf();break e}C=Error(t(426))}}else if(Xe&&A.mode&1){var lt=Lg(v);if(lt!==null){(lt.flags&65536)===0&&(lt.flags|=256),Fg(lt,v,A,g,s),_d(Ao(C,A));break e}}g=C=Ao(C,A),yt!==4&&(yt=2),ol===null?ol=[g]:ol.push(g),g=v;do{switch(g.tag){case 3:g.flags|=65536,s&=-s,g.lanes|=s;var L=bg(g,C,s);ag(g,L);break e;case 1:A=C;var D=g.type,F=g.stateNode;if((g.flags&128)===0&&(typeof D.getDerivedStateFromError=="function"||F!==null&&typeof F.componentDidCatch=="function"&&(ai===null||!ai.has(F)))){g.flags|=65536,s&=-s,g.lanes|=s;var X=Og(g,A,s);ag(g,X);break e}}g=g.return}while(g!==null)}my(l)}catch(ce){s=ce,ct===l&&l!==null&&(ct=l=l.return);continue}break}while(!0)}function fy(){var n=rc.current;return rc.current=Xu,n===null?Xu:n}function lf(){(yt===0||yt===3||yt===2)&&(yt=4),Tt===null||(ss&268435455)===0&&(ic&268435455)===0||ci(Tt,kt)}function cc(n,s){var l=Oe;Oe|=2;var h=fy();(Tt!==n||kt!==s)&&(kr=null,as(n,s));do try{$T();break}catch(f){dy(n,f)}while(!0);if(Ed(),Oe=l,rc.current=h,ct!==null)throw Error(t(261));return Tt=null,kt=0,yt}function $T(){for(;ct!==null;)py(ct)}function qT(){for(;ct!==null&&!au();)py(ct)}function py(n){var s=_y(n.alternate,n,fn);n.memoizedProps=n.pendingProps,s===null?my(n):ct=s,Jd.current=null}function my(n){var s=n;do{var l=s.alternate;if(n=s.return,(s.flags&32768)===0){if(l=MT(l,s,fn),l!==null){ct=l;return}}else{if(l=LT(l,s),l!==null){l.flags&=32767,ct=l;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{yt=6,ct=null;return}}if(s=s.sibling,s!==null){ct=s;return}ct=s=n}while(s!==null);yt===0&&(yt=5)}function ls(n,s,l){var h=xe,f=An.transition;try{An.transition=null,xe=1,KT(n,s,l,h)}finally{An.transition=f,xe=h}return null}function KT(n,s,l,h){do ko();while(li!==null);if((Oe&6)!==0)throw Error(t(327));l=n.finishedWork;var f=n.finishedLanes;if(l===null)return null;if(n.finishedWork=null,n.finishedLanes=0,l===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var g=l.lanes|l.childLanes;if(qe(n,g),n===Tt&&(ct=Tt=null,kt=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||oc||(oc=!0,vy(_n,function(){return ko(),null})),g=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||g){g=An.transition,An.transition=null;var v=xe;xe=1;var A=Oe;Oe|=4,Jd.current=null,UT(n,l),sy(l,n),hT(ad),Xr=!!od,ad=od=null,n.current=l,BT(l),qh(),Oe=A,xe=v,An.transition=g}else n.current=l;if(oc&&(oc=!1,li=n,ac=f),g=n.pendingLanes,g===0&&(ai=null),cu(l.stateNode),tn(n,He()),s!==null)for(h=n.onRecoverableError,l=0;l<s.length;l++)f=s[l],h(f.value,{componentStack:f.stack,digest:f.digest});if(sc)throw sc=!1,n=tf,tf=null,n;return(ac&1)!==0&&n.tag!==0&&ko(),g=n.pendingLanes,(g&1)!==0?n===nf?al++:(al=0,nf=n):al=0,ri(),null}function ko(){if(li!==null){var n=Qr(ac),s=An.transition,l=xe;try{if(An.transition=null,xe=16>n?16:n,li===null)var h=!1;else{if(n=li,li=null,ac=0,(Oe&6)!==0)throw Error(t(331));var f=Oe;for(Oe|=4,oe=n.current;oe!==null;){var g=oe,v=g.child;if((oe.flags&16)!==0){var A=g.deletions;if(A!==null){for(var C=0;C<A.length;C++){var B=A[C];for(oe=B;oe!==null;){var W=oe;switch(W.tag){case 0:case 11:case 15:il(8,W,g)}var Q=W.child;if(Q!==null)Q.return=W,oe=Q;else for(;oe!==null;){W=oe;var G=W.sibling,ne=W.return;if(ey(W),W===B){oe=null;break}if(G!==null){G.return=ne,oe=G;break}oe=ne}}}var ae=g.alternate;if(ae!==null){var ue=ae.child;if(ue!==null){ae.child=null;do{var lt=ue.sibling;ue.sibling=null,ue=lt}while(ue!==null)}}oe=g}}if((g.subtreeFlags&2064)!==0&&v!==null)v.return=g,oe=v;else e:for(;oe!==null;){if(g=oe,(g.flags&2048)!==0)switch(g.tag){case 0:case 11:case 15:il(9,g,g.return)}var L=g.sibling;if(L!==null){L.return=g.return,oe=L;break e}oe=g.return}}var D=n.current;for(oe=D;oe!==null;){v=oe;var F=v.child;if((v.subtreeFlags&2064)!==0&&F!==null)F.return=v,oe=F;else e:for(v=D;oe!==null;){if(A=oe,(A.flags&2048)!==0)try{switch(A.tag){case 0:case 11:case 15:nc(9,A)}}catch(ce){it(A,A.return,ce)}if(A===v){oe=null;break e}var X=A.sibling;if(X!==null){X.return=A.return,oe=X;break e}oe=A.return}}if(Oe=f,ri(),an&&typeof an.onPostCommitFiberRoot=="function")try{an.onPostCommitFiberRoot(Ki,n)}catch{}h=!0}return h}finally{xe=l,An.transition=s}}return!1}function gy(n,s,l){s=Ao(l,s),s=bg(n,s,1),n=si(n,s,1),s=Kt(),n!==null&&(Gr(n,1,s),tn(n,s))}function it(n,s,l){if(n.tag===3)gy(n,n,l);else for(;s!==null;){if(s.tag===3){gy(s,n,l);break}else if(s.tag===1){var h=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(ai===null||!ai.has(h))){n=Ao(l,n),n=Og(s,n,1),s=si(s,n,1),n=Kt(),s!==null&&(Gr(s,1,n),tn(s,n));break}}s=s.return}}function HT(n,s,l){var h=n.pingCache;h!==null&&h.delete(s),s=Kt(),n.pingedLanes|=n.suspendedLanes&l,Tt===n&&(kt&l)===l&&(yt===4||yt===3&&(kt&130023424)===kt&&500>He()-ef?as(n,0):Zd|=l),tn(n,s)}function yy(n,s){s===0&&((n.mode&1)===0?s=1:(s=Xs,Xs<<=1,(Xs&130023424)===0&&(Xs=4194304)));var l=Kt();n=Rr(n,s),n!==null&&(Gr(n,s,l),tn(n,l))}function GT(n){var s=n.memoizedState,l=0;s!==null&&(l=s.retryLane),yy(n,l)}function WT(n,s){var l=0;switch(n.tag){case 13:var h=n.stateNode,f=n.memoizedState;f!==null&&(l=f.retryLane);break;case 19:h=n.stateNode;break;default:throw Error(t(314))}h!==null&&h.delete(s),yy(n,l)}var _y;_y=function(n,s,l){if(n!==null)if(n.memoizedProps!==s.pendingProps||Xt.current)Zt=!0;else{if((n.lanes&l)===0&&(s.flags&128)===0)return Zt=!1,OT(n,s,l);Zt=(n.flags&131072)!==0}else Zt=!1,Xe&&(s.flags&1048576)!==0&&Xm(s,Uu,s.index);switch(s.lanes=0,s.tag){case 2:var h=s.type;ec(n,s),n=s.pendingProps;var f=yo(s,bt.current);To(s,l),f=Dd(null,s,h,n,f,l);var g=Vd();return s.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Jt(h)?(g=!0,Mu(s)):g=!1,s.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,Sd(s),f.updater=Ju,s.stateNode=f,f._reactInternals=s,Fd(s,h,n,l),s=jd(null,s,h,!0,g,l)):(s.tag=0,Xe&&g&&pd(s),qt(null,s,f,l),s=s.child),s;case 16:h=s.elementType;e:{switch(ec(n,s),n=s.pendingProps,f=h._init,h=f(h._payload),s.type=h,f=s.tag=YT(h),n=Bn(h,n),f){case 0:s=zd(null,s,h,n,l);break e;case 1:s=qg(null,s,h,n,l);break e;case 11:s=Ug(null,s,h,n,l);break e;case 14:s=Bg(null,s,h,Bn(h.type,n),l);break e}throw Error(t(306,h,""))}return s;case 0:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:Bn(h,f),zd(n,s,h,f,l);case 1:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:Bn(h,f),qg(n,s,h,f,l);case 3:e:{if(Kg(s),n===null)throw Error(t(387));h=s.pendingProps,g=s.memoizedState,f=g.element,og(n,s),Ku(s,h,null,l);var v=s.memoizedState;if(h=v.element,g.isDehydrated)if(g={element:h,isDehydrated:!1,cache:v.cache,pendingSuspenseBoundaries:v.pendingSuspenseBoundaries,transitions:v.transitions},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){f=Ao(Error(t(423)),s),s=Hg(n,s,h,l,f);break e}else if(h!==f){f=Ao(Error(t(424)),s),s=Hg(n,s,h,l,f);break e}else for(dn=ei(s.stateNode.containerInfo.firstChild),hn=s,Xe=!0,Un=null,l=ig(s,null,h,l),s.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(Eo(),h===f){s=Cr(n,s,l);break e}qt(n,s,h,l)}s=s.child}return s;case 5:return ug(s),n===null&&yd(s),h=s.type,f=s.pendingProps,g=n!==null?n.memoizedProps:null,v=f.children,ld(h,f)?v=null:g!==null&&ld(h,g)&&(s.flags|=32),$g(n,s),qt(n,s,v,l),s.child;case 6:return n===null&&yd(s),null;case 13:return Gg(n,s,l);case 4:return Ad(s,s.stateNode.containerInfo),h=s.pendingProps,n===null?s.child=Io(s,null,h,l):qt(n,s,h,l),s.child;case 11:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:Bn(h,f),Ug(n,s,h,f,l);case 7:return qt(n,s,s.pendingProps,l),s.child;case 8:return qt(n,s,s.pendingProps.children,l),s.child;case 12:return qt(n,s,s.pendingProps.children,l),s.child;case 10:e:{if(h=s.type._context,f=s.pendingProps,g=s.memoizedProps,v=f.value,Ge(ju,h._currentValue),h._currentValue=v,g!==null)if(Fn(g.value,v)){if(g.children===f.children&&!Xt.current){s=Cr(n,s,l);break e}}else for(g=s.child,g!==null&&(g.return=s);g!==null;){var A=g.dependencies;if(A!==null){v=g.child;for(var C=A.firstContext;C!==null;){if(C.context===h){if(g.tag===1){C=Pr(-1,l&-l),C.tag=2;var B=g.updateQueue;if(B!==null){B=B.shared;var W=B.pending;W===null?C.next=C:(C.next=W.next,W.next=C),B.pending=C}}g.lanes|=l,C=g.alternate,C!==null&&(C.lanes|=l),wd(g.return,l,s),A.lanes|=l;break}C=C.next}}else if(g.tag===10)v=g.type===s.type?null:g.child;else if(g.tag===18){if(v=g.return,v===null)throw Error(t(341));v.lanes|=l,A=v.alternate,A!==null&&(A.lanes|=l),wd(v,l,s),v=g.sibling}else v=g.child;if(v!==null)v.return=g;else for(v=g;v!==null;){if(v===s){v=null;break}if(g=v.sibling,g!==null){g.return=v.return,v=g;break}v=v.return}g=v}qt(n,s,f.children,l),s=s.child}return s;case 9:return f=s.type,h=s.pendingProps.children,To(s,l),f=Tn(f),h=h(f),s.flags|=1,qt(n,s,h,l),s.child;case 14:return h=s.type,f=Bn(h,s.pendingProps),f=Bn(h.type,f),Bg(n,s,h,f,l);case 15:return zg(n,s,s.type,s.pendingProps,l);case 17:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:Bn(h,f),ec(n,s),s.tag=1,Jt(h)?(n=!0,Mu(s)):n=!1,To(s,l),Vg(s,h,f),Fd(s,h,f,l),jd(null,s,h,!0,n,l);case 19:return Qg(n,s,l);case 22:return jg(n,s,l)}throw Error(t(156,s.tag))};function vy(n,s){return Qs(n,s)}function QT(n,s,l,h){this.tag=n,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rn(n,s,l,h){return new QT(n,s,l,h)}function uf(n){return n=n.prototype,!(!n||!n.isReactComponent)}function YT(n){if(typeof n=="function")return uf(n)?1:0;if(n!=null){if(n=n.$$typeof,n===b)return 11;if(n===Vt)return 14}return 2}function hi(n,s){var l=n.alternate;return l===null?(l=Rn(n.tag,s,n.key,n.mode),l.elementType=n.elementType,l.type=n.type,l.stateNode=n.stateNode,l.alternate=n,n.alternate=l):(l.pendingProps=s,l.type=n.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=n.flags&14680064,l.childLanes=n.childLanes,l.lanes=n.lanes,l.child=n.child,l.memoizedProps=n.memoizedProps,l.memoizedState=n.memoizedState,l.updateQueue=n.updateQueue,s=n.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},l.sibling=n.sibling,l.index=n.index,l.ref=n.ref,l}function hc(n,s,l,h,f,g){var v=2;if(h=n,typeof n=="function")uf(n)&&(v=1);else if(typeof n=="string")v=5;else e:switch(n){case k:return us(l.children,f,g,s);case S:v=8,f|=8;break;case P:return n=Rn(12,l,s,f|2),n.elementType=P,n.lanes=g,n;case R:return n=Rn(13,l,s,f),n.elementType=R,n.lanes=g,n;case ot:return n=Rn(19,l,s,f),n.elementType=ot,n.lanes=g,n;case je:return dc(l,f,g,s);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case x:v=10;break e;case V:v=9;break e;case b:v=11;break e;case Vt:v=14;break e;case Nt:v=16,h=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return s=Rn(v,l,s,f),s.elementType=n,s.type=h,s.lanes=g,s}function us(n,s,l,h){return n=Rn(7,n,h,s),n.lanes=l,n}function dc(n,s,l,h){return n=Rn(22,n,h,s),n.elementType=je,n.lanes=l,n.stateNode={isHidden:!1},n}function cf(n,s,l){return n=Rn(6,n,null,s),n.lanes=l,n}function hf(n,s,l){return s=Rn(4,n.children!==null?n.children:[],n.key,s),s.lanes=l,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}function XT(n,s,l,h,f){this.tag=s,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Hr(0),this.expirationTimes=Hr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hr(0),this.identifierPrefix=h,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function df(n,s,l,h,f,g,v,A,C){return n=new XT(n,s,l,A,C),s===1?(s=1,g===!0&&(s|=8)):s=0,g=Rn(3,null,null,s),n.current=g,g.stateNode=n,g.memoizedState={element:h,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},Sd(g),n}function JT(n,s,l){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:me,key:h==null?null:""+h,children:n,containerInfo:s,implementation:l}}function Ey(n){if(!n)return ni;n=n._reactInternals;e:{if(Dn(n)!==n||n.tag!==1)throw Error(t(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Jt(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(n.tag===1){var l=n.type;if(Jt(l))return Wm(n,l,s)}return s}function Iy(n,s,l,h,f,g,v,A,C){return n=df(l,h,!0,n,f,g,v,A,C),n.context=Ey(null),l=n.current,h=Kt(),f=ui(l),g=Pr(h,f),g.callback=s??null,si(l,g,f),n.current.lanes=f,Gr(n,f,h),tn(n,h),n}function fc(n,s,l,h){var f=s.current,g=Kt(),v=ui(f);return l=Ey(l),s.context===null?s.context=l:s.pendingContext=l,s=Pr(g,v),s.payload={element:n},h=h===void 0?null:h,h!==null&&(s.callback=h),n=si(f,s,v),n!==null&&($n(n,f,v,g),qu(n,f,v)),v}function pc(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function wy(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var l=n.retryLane;n.retryLane=l!==0&&l<s?l:s}}function ff(n,s){wy(n,s),(n=n.alternate)&&wy(n,s)}function ZT(){return null}var Ty=typeof reportError=="function"?reportError:function(n){console.error(n)};function pf(n){this._internalRoot=n}mc.prototype.render=pf.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(t(409));fc(n,s,null,null)},mc.prototype.unmount=pf.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;os(function(){fc(null,n,null,null)}),s[wr]=null}};function mc(n){this._internalRoot=n}mc.prototype.unstable_scheduleHydration=function(n){if(n){var s=mu();n={blockedOn:null,target:n,priority:s};for(var l=0;l<Yn.length&&s!==0&&s<Yn[l].priority;l++);Yn.splice(l,0,n),l===0&&_u(n)}};function mf(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function gc(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Sy(){}function e0(n,s,l,h,f){if(f){if(typeof h=="function"){var g=h;h=function(){var B=pc(v);g.call(B)}}var v=Iy(s,h,n,0,null,!1,!1,"",Sy);return n._reactRootContainer=v,n[wr]=v.current,Ka(n.nodeType===8?n.parentNode:n),os(),v}for(;f=n.lastChild;)n.removeChild(f);if(typeof h=="function"){var A=h;h=function(){var B=pc(C);A.call(B)}}var C=df(n,0,!1,null,null,!1,!1,"",Sy);return n._reactRootContainer=C,n[wr]=C.current,Ka(n.nodeType===8?n.parentNode:n),os(function(){fc(s,C,l,h)}),C}function yc(n,s,l,h,f){var g=l._reactRootContainer;if(g){var v=g;if(typeof f=="function"){var A=f;f=function(){var C=pc(v);A.call(C)}}fc(s,v,n,f)}else v=e0(l,s,n,f,h);return pc(v)}fu=function(n){switch(n.tag){case 3:var s=n.stateNode;if(s.current.memoizedState.isDehydrated){var l=Kr(s.pendingLanes);l!==0&&(Wr(s,l|1),tn(s,He()),(Oe&6)===0&&(Co=He()+500,ri()))}break;case 13:os(function(){var h=Rr(n,1);if(h!==null){var f=Kt();$n(h,n,1,f)}}),ff(n,1)}},Js=function(n){if(n.tag===13){var s=Rr(n,134217728);if(s!==null){var l=Kt();$n(s,n,134217728,l)}ff(n,134217728)}},pu=function(n){if(n.tag===13){var s=ui(n),l=Rr(n,s);if(l!==null){var h=Kt();$n(l,n,s,h)}ff(n,s)}},mu=function(){return xe},gu=function(n,s){var l=xe;try{return xe=n,s()}finally{xe=l}},$s=function(n,s,l){switch(s){case"input":if(ga(n,l),s=l.name,l.type==="radio"&&s!=null){for(l=n;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<l.length;s++){var h=l[s];if(h!==n&&h.form===n.form){var f=bu(h);if(!f)throw Error(t(90));Ls(h),ga(h,f)}}}break;case"textarea":zs(n,l);break;case"select":s=l.value,s!=null&&pr(n,!!l.multiple,s,!1)}},Bi=of,Ra=os;var t0={usingClientEntryPoint:!1,Events:[Wa,mo,bu,Wn,Aa,of]},ll={findFiberByHostInstance:Ji,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},n0={bundleType:ll.bundleType,version:ll.version,rendererPackageName:ll.rendererPackageName,rendererConfig:ll.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:pe.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=ka(n),n===null?null:n.stateNode},findFiberByHostInstance:ll.findFiberByHostInstance||ZT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _c=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_c.isDisabled&&_c.supportsFiber)try{Ki=_c.inject(n0),an=_c}catch{}}return nn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=t0,nn.createPortal=function(n,s){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!mf(s))throw Error(t(200));return JT(n,s,null,l)},nn.createRoot=function(n,s){if(!mf(n))throw Error(t(299));var l=!1,h="",f=Ty;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onRecoverableError!==void 0&&(f=s.onRecoverableError)),s=df(n,1,!1,null,null,l,!1,h,f),n[wr]=s.current,Ka(n.nodeType===8?n.parentNode:n),new pf(s)},nn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=ka(s),n=n===null?null:n.stateNode,n},nn.flushSync=function(n){return os(n)},nn.hydrate=function(n,s,l){if(!gc(s))throw Error(t(200));return yc(null,n,s,!0,l)},nn.hydrateRoot=function(n,s,l){if(!mf(n))throw Error(t(405));var h=l!=null&&l.hydratedSources||null,f=!1,g="",v=Ty;if(l!=null&&(l.unstable_strictMode===!0&&(f=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onRecoverableError!==void 0&&(v=l.onRecoverableError)),s=Iy(s,null,n,1,l??null,f,!1,g,v),n[wr]=s.current,Ka(n),h)for(n=0;n<h.length;n++)l=h[n],f=l._getVersion,f=f(l._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[l,f]:s.mutableSourceEagerHydrationData.push(l,f);return new mc(s)},nn.render=function(n,s,l){if(!gc(s))throw Error(t(200));return yc(null,n,s,!1,l)},nn.unmountComponentAtNode=function(n){if(!gc(n))throw Error(t(40));return n._reactRootContainer?(os(function(){yc(null,null,n,!1,function(){n._reactRootContainer=null,n[wr]=null})}),!0):!1},nn.unstable_batchedUpdates=of,nn.unstable_renderSubtreeIntoContainer=function(n,s,l,h){if(!gc(l))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return yc(n,s,l,!1,h)},nn.version="18.3.1-next-f1338f8080-20240426",nn}var Ny;function h0(){if(Ny)return _f.exports;Ny=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),_f.exports=c0(),_f.exports}var by;function d0(){if(by)return vc;by=1;var i=h0();return vc.createRoot=i.createRoot,vc.hydrateRoot=i.hydrateRoot,vc}var f0=d0();const p0=Nv(f0),m0=()=>{};var Oy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bv=function(i){const e=[];let t=0;for(let r=0;r<i.length;r++){let o=i.charCodeAt(r);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&r+1<i.length&&(i.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++r)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},g0=function(i){const e=[];let t=0,r=0;for(;t<i.length;){const o=i[t++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const a=i[t++];e[r++]=String.fromCharCode((o&31)<<6|a&63)}else if(o>239&&o<365){const a=i[t++],c=i[t++],d=i[t++],p=((o&7)<<18|(a&63)<<12|(c&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(p>>10)),e[r++]=String.fromCharCode(56320+(p&1023))}else{const a=i[t++],c=i[t++];e[r++]=String.fromCharCode((o&15)<<12|(a&63)<<6|c&63)}}return e.join("")},Ov={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<i.length;o+=3){const a=i[o],c=o+1<i.length,d=c?i[o+1]:0,p=o+2<i.length,y=p?i[o+2]:0,E=a>>2,w=(a&3)<<4|d>>4;let T=(d&15)<<2|y>>6,U=y&63;p||(U=64,c||(T=64)),r.push(t[E],t[w],t[T],t[U])}return r.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(bv(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):g0(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<i.length;){const a=t[i.charAt(o++)],d=o<i.length?t[i.charAt(o)]:0;++o;const y=o<i.length?t[i.charAt(o)]:64;++o;const w=o<i.length?t[i.charAt(o)]:64;if(++o,a==null||d==null||y==null||w==null)throw new y0;const T=a<<2|d>>4;if(r.push(T),y!==64){const U=d<<4&240|y>>2;if(r.push(U),w!==64){const $=y<<6&192|w;r.push($)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class y0 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const _0=function(i){const e=bv(i);return Ov.encodeByteArray(e,!0)},qc=function(i){return _0(i).replace(/\./g,"")},Mv=function(i){try{return Ov.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lv(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v0=()=>Lv().__FIREBASE_DEFAULTS__,E0=()=>{if(typeof process>"u"||typeof Oy>"u")return;const i=Oy.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},I0=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&Mv(i[1]);return e&&JSON.parse(e)},mh=()=>{try{return m0()||v0()||E0()||I0()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},Fv=i=>{var e,t;return(t=(e=mh())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[i]},w0=i=>{const e=Fv(i);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Uv=()=>{var i;return(i=mh())===null||i===void 0?void 0:i.config},Bv=i=>{var e;return(e=mh())===null||e===void 0?void 0:e[`_${i}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kl(i){return i.endsWith(".cloudworkstations.dev")}async function zv(i){return(await fetch(i,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S0(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",o=i.iat||0,a=i.sub||i.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},i);return[qc(JSON.stringify(t)),qc(JSON.stringify(c)),""].join(".")}const Il={};function A0(){const i={prod:[],emulator:[]};for(const e of Object.keys(Il))Il[e]?i.emulator.push(e):i.prod.push(e);return i}function R0(i){let e=document.getElementById(i),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),t=!0),{created:t,element:e}}let My=!1;function gh(i,e){if(typeof window>"u"||typeof document>"u"||!Kl(window.location.host)||Il[i]===e||Il[i]||My)return;Il[i]=e;function t(T){return`__firebase__banner__${T}`}const r="__firebase__banner",a=A0().prod.length>0;function c(){const T=document.getElementById(r);T&&T.remove()}function d(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function p(T,U){T.setAttribute("width","24"),T.setAttribute("id",U),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function y(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{My=!0,c()},T}function E(T,U){T.setAttribute("id",U),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function w(){const T=R0(r),U=t("text"),$=document.getElementById(U)||document.createElement("span"),H=t("learnmore"),j=document.getElementById(H)||document.createElement("a"),ve=t("preprendIcon"),se=document.getElementById(ve)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const te=T.element;d(te),E(j,H);const pe=y();p(se,ve),te.append(se,$,j,pe),document.body.appendChild(te)}a?($.innerText="Preview backend disconnected.",se.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(se.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,$.innerText="Preview backend running in this workspace."),$.setAttribute("id",U)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _t(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function P0(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_t())}function jv(){var i;const e=(i=mh())===null||i===void 0?void 0:i.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function C0(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function k0(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function x0(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function D0(){const i=_t();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function $v(){return!jv()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function qv(){return!jv()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function Kv(){try{return typeof indexedDB=="object"}catch{return!1}}function V0(){return new Promise((i,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(r),i(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var a;e(((a=o.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N0="FirebaseError";class Ur extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=N0,Object.setPrototypeOf(this,Ur.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Hl.prototype.create)}}class Hl{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},o=`${this.service}/${e}`,a=this.errors[e],c=a?b0(a,r):"Error",d=`${this.serviceName}: ${c} (${o}).`;return new Ur(o,d,r)}}function b0(i,e){return i.replace(O0,(t,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const O0=/\{\$([^}]+)}/g;function M0(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function Ss(i,e){if(i===e)return!0;const t=Object.keys(i),r=Object.keys(e);for(const o of t){if(!r.includes(o))return!1;const a=i[o],c=e[o];if(Ly(a)&&Ly(c)){if(!Ss(a,c))return!1}else if(a!==c)return!1}for(const o of r)if(!t.includes(o))return!1;return!0}function Ly(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gl(i){const e=[];for(const[t,r]of Object.entries(i))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function L0(i,e){const t=new F0(i,e);return t.subscribe.bind(t)}class F0{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let o;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");U0(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:r},o.next===void 0&&(o.next=If),o.error===void 0&&(o.error=If),o.complete===void 0&&(o.complete=If);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function U0(i,e){if(typeof i!="object"||i===null)return!1;for(const t of e)if(t in i&&typeof i[t]=="function")return!0;return!1}function If(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function on(i){return i&&i._delegate?i._delegate:i}class As{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B0{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new T0;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(o)return null;throw a}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(j0(e))try{this.getOrInitializeService({instanceIdentifier:hs})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:o});r.resolve(a)}catch{}}}}clearInstance(e=hs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=hs){return this.instances.has(e)}getOptions(e=hs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);r===d&&c.resolve(o)}return o}onInit(e,t){var r;const o=this.normalizeInstanceIdentifier(t),a=(r=this.onInitCallbacks.get(o))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(o,a);const c=this.instances.get(o);return c&&e(c,o),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const o of r)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:z0(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=hs){return this.component?this.component.multipleInstances?e:hs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function z0(i){return i===hs?void 0:i}function j0(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $0{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new B0(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ke;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(ke||(ke={}));const q0={debug:ke.DEBUG,verbose:ke.VERBOSE,info:ke.INFO,warn:ke.WARN,error:ke.ERROR,silent:ke.SILENT},K0=ke.INFO,H0={[ke.DEBUG]:"log",[ke.VERBOSE]:"log",[ke.INFO]:"info",[ke.WARN]:"warn",[ke.ERROR]:"error"},G0=(i,e,...t)=>{if(e<i.logLevel)return;const r=new Date().toISOString(),o=H0[e];if(o)console[o](`[${r}]  ${i.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class pp{constructor(e){this.name=e,this._logLevel=K0,this._logHandler=G0,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?q0[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ke.DEBUG,...e),this._logHandler(this,ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ke.VERBOSE,...e),this._logHandler(this,ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ke.INFO,...e),this._logHandler(this,ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ke.WARN,...e),this._logHandler(this,ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ke.ERROR,...e),this._logHandler(this,ke.ERROR,...e)}}const W0=(i,e)=>e.some(t=>i instanceof t);let Fy,Uy;function Q0(){return Fy||(Fy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Y0(){return Uy||(Uy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Hv=new WeakMap,bf=new WeakMap,Gv=new WeakMap,wf=new WeakMap,mp=new WeakMap;function X0(i){const e=new Promise((t,r)=>{const o=()=>{i.removeEventListener("success",a),i.removeEventListener("error",c)},a=()=>{t(Ti(i.result)),o()},c=()=>{r(i.error),o()};i.addEventListener("success",a),i.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&Hv.set(t,i)}).catch(()=>{}),mp.set(e,i),e}function J0(i){if(bf.has(i))return;const e=new Promise((t,r)=>{const o=()=>{i.removeEventListener("complete",a),i.removeEventListener("error",c),i.removeEventListener("abort",c)},a=()=>{t(),o()},c=()=>{r(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",a),i.addEventListener("error",c),i.addEventListener("abort",c)});bf.set(i,e)}let Of={get(i,e,t){if(i instanceof IDBTransaction){if(e==="done")return bf.get(i);if(e==="objectStoreNames")return i.objectStoreNames||Gv.get(i);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ti(i[e])},set(i,e,t){return i[e]=t,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function Z0(i){Of=i(Of)}function eS(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=i.call(Tf(this),e,...t);return Gv.set(r,e.sort?e.sort():[e]),Ti(r)}:Y0().includes(i)?function(...e){return i.apply(Tf(this),e),Ti(Hv.get(this))}:function(...e){return Ti(i.apply(Tf(this),e))}}function tS(i){return typeof i=="function"?eS(i):(i instanceof IDBTransaction&&J0(i),W0(i,Q0())?new Proxy(i,Of):i)}function Ti(i){if(i instanceof IDBRequest)return X0(i);if(wf.has(i))return wf.get(i);const e=tS(i);return e!==i&&(wf.set(i,e),mp.set(e,i)),e}const Tf=i=>mp.get(i);function nS(i,e,{blocked:t,upgrade:r,blocking:o,terminated:a}={}){const c=indexedDB.open(i,e),d=Ti(c);return r&&c.addEventListener("upgradeneeded",p=>{r(Ti(c.result),p.oldVersion,p.newVersion,Ti(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),d.then(p=>{a&&p.addEventListener("close",()=>a()),o&&p.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),d}const rS=["get","getKey","getAll","getAllKeys","count"],iS=["put","add","delete","clear"],Sf=new Map;function By(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(Sf.get(e))return Sf.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,o=iS.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(o||rS.includes(t)))return;const a=async function(c,...d){const p=this.transaction(c,o?"readwrite":"readonly");let y=p.store;return r&&(y=y.index(d.shift())),(await Promise.all([y[t](...d),o&&p.done]))[0]};return Sf.set(e,a),a}Z0(i=>({...i,get:(e,t,r)=>By(e,t)||i.get(e,t,r),has:(e,t)=>!!By(e,t)||i.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(oS(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function oS(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Mf="@firebase/app",zy="0.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nr=new pp("@firebase/app"),aS="@firebase/app-compat",lS="@firebase/analytics-compat",uS="@firebase/analytics",cS="@firebase/app-check-compat",hS="@firebase/app-check",dS="@firebase/auth",fS="@firebase/auth-compat",pS="@firebase/database",mS="@firebase/data-connect",gS="@firebase/database-compat",yS="@firebase/functions",_S="@firebase/functions-compat",vS="@firebase/installations",ES="@firebase/installations-compat",IS="@firebase/messaging",wS="@firebase/messaging-compat",TS="@firebase/performance",SS="@firebase/performance-compat",AS="@firebase/remote-config",RS="@firebase/remote-config-compat",PS="@firebase/storage",CS="@firebase/storage-compat",kS="@firebase/firestore",xS="@firebase/ai",DS="@firebase/firestore-compat",VS="firebase",NS="11.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lf="[DEFAULT]",bS={[Mf]:"fire-core",[aS]:"fire-core-compat",[uS]:"fire-analytics",[lS]:"fire-analytics-compat",[hS]:"fire-app-check",[cS]:"fire-app-check-compat",[dS]:"fire-auth",[fS]:"fire-auth-compat",[pS]:"fire-rtdb",[mS]:"fire-data-connect",[gS]:"fire-rtdb-compat",[yS]:"fire-fn",[_S]:"fire-fn-compat",[vS]:"fire-iid",[ES]:"fire-iid-compat",[IS]:"fire-fcm",[wS]:"fire-fcm-compat",[TS]:"fire-perf",[SS]:"fire-perf-compat",[AS]:"fire-rc",[RS]:"fire-rc-compat",[PS]:"fire-gcs",[CS]:"fire-gcs-compat",[kS]:"fire-fst",[DS]:"fire-fst-compat",[xS]:"fire-vertex","fire-js":"fire-js",[VS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kc=new Map,OS=new Map,Ff=new Map;function jy(i,e){try{i.container.addComponent(e)}catch(t){Nr.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,t)}}function Ho(i){const e=i.name;if(Ff.has(e))return Nr.debug(`There were multiple attempts to register component ${e}.`),!1;Ff.set(e,i);for(const t of Kc.values())jy(t,i);for(const t of OS.values())jy(t,i);return!0}function gp(i,e){const t=i.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),i.container.getProvider(e)}function sr(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Si=new Hl("app","Firebase",MS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new As("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Si.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ua=NS;function Wv(i,e={}){let t=i;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Lf,automaticDataCollectionEnabled:!0},e),o=r.name;if(typeof o!="string"||!o)throw Si.create("bad-app-name",{appName:String(o)});if(t||(t=Uv()),!t)throw Si.create("no-options");const a=Kc.get(o);if(a){if(Ss(t,a.options)&&Ss(r,a.config))return a;throw Si.create("duplicate-app",{appName:o})}const c=new $0(o);for(const p of Ff.values())c.addComponent(p);const d=new LS(t,r,c);return Kc.set(o,d),d}function Qv(i=Lf){const e=Kc.get(i);if(!e&&i===Lf&&Uv())return Wv();if(!e)throw Si.create("no-app",{appName:i});return e}function Ai(i,e,t){var r;let o=(r=bS[i])!==null&&r!==void 0?r:i;t&&(o+=`-${t}`);const a=o.match(/\s|\//),c=e.match(/\s|\//);if(a||c){const d=[`Unable to register library "${o}" with version "${e}":`];a&&d.push(`library name "${o}" contains illegal characters (whitespace or "/")`),a&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Nr.warn(d.join(" "));return}Ho(new As(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FS="firebase-heartbeat-database",US=1,Vl="firebase-heartbeat-store";let Af=null;function Yv(){return Af||(Af=nS(FS,US,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(Vl)}catch(t){console.warn(t)}}}}).catch(i=>{throw Si.create("idb-open",{originalErrorMessage:i.message})})),Af}async function BS(i){try{const t=(await Yv()).transaction(Vl),r=await t.objectStore(Vl).get(Xv(i));return await t.done,r}catch(e){if(e instanceof Ur)Nr.warn(e.message);else{const t=Si.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Nr.warn(t.message)}}}async function $y(i,e){try{const r=(await Yv()).transaction(Vl,"readwrite");await r.objectStore(Vl).put(e,Xv(i)),await r.done}catch(t){if(t instanceof Ur)Nr.warn(t.message);else{const r=Si.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Nr.warn(r.message)}}}function Xv(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zS=1024,jS=30;class $S{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new KS(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=qy();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(c=>c.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:o}),this._heartbeatsCache.heartbeats.length>jS){const c=HS(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Nr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=qy(),{heartbeatsToSend:r,unsentEntries:o}=qS(this._heartbeatsCache.heartbeats),a=qc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return Nr.warn(t),""}}}function qy(){return new Date().toISOString().substring(0,10)}function qS(i,e=zS){const t=[];let r=i.slice();for(const o of i){const a=t.find(c=>c.agent===o.agent);if(a){if(a.dates.push(o.date),Ky(t)>e){a.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Ky(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class KS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Kv()?V0().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await BS(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return $y(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return $y(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function Ky(i){return qc(JSON.stringify({version:2,heartbeats:i})).length}function HS(i){if(i.length===0)return-1;let e=0,t=i[0].date;for(let r=1;r<i.length;r++)i[r].date<t&&(t=i[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GS(i){Ho(new As("platform-logger",e=>new sS(e),"PRIVATE")),Ho(new As("heartbeat",e=>new $S(e),"PRIVATE")),Ai(Mf,zy,i),Ai(Mf,zy,"esm2017"),Ai("fire-js","")}GS("");var WS="firebase",QS="11.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ai(WS,QS,"app");var Hy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ri,Jv;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,S){function P(){}P.prototype=S.prototype,k.D=S.prototype,k.prototype=new P,k.prototype.constructor=k,k.C=function(x,V,b){for(var R=Array(arguments.length-2),ot=2;ot<arguments.length;ot++)R[ot-2]=arguments[ot];return S.prototype[V].apply(x,R)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(k,S,P){P||(P=0);var x=Array(16);if(typeof S=="string")for(var V=0;16>V;++V)x[V]=S.charCodeAt(P++)|S.charCodeAt(P++)<<8|S.charCodeAt(P++)<<16|S.charCodeAt(P++)<<24;else for(V=0;16>V;++V)x[V]=S[P++]|S[P++]<<8|S[P++]<<16|S[P++]<<24;S=k.g[0],P=k.g[1],V=k.g[2];var b=k.g[3],R=S+(b^P&(V^b))+x[0]+3614090360&4294967295;S=P+(R<<7&4294967295|R>>>25),R=b+(V^S&(P^V))+x[1]+3905402710&4294967295,b=S+(R<<12&4294967295|R>>>20),R=V+(P^b&(S^P))+x[2]+606105819&4294967295,V=b+(R<<17&4294967295|R>>>15),R=P+(S^V&(b^S))+x[3]+3250441966&4294967295,P=V+(R<<22&4294967295|R>>>10),R=S+(b^P&(V^b))+x[4]+4118548399&4294967295,S=P+(R<<7&4294967295|R>>>25),R=b+(V^S&(P^V))+x[5]+1200080426&4294967295,b=S+(R<<12&4294967295|R>>>20),R=V+(P^b&(S^P))+x[6]+2821735955&4294967295,V=b+(R<<17&4294967295|R>>>15),R=P+(S^V&(b^S))+x[7]+4249261313&4294967295,P=V+(R<<22&4294967295|R>>>10),R=S+(b^P&(V^b))+x[8]+1770035416&4294967295,S=P+(R<<7&4294967295|R>>>25),R=b+(V^S&(P^V))+x[9]+2336552879&4294967295,b=S+(R<<12&4294967295|R>>>20),R=V+(P^b&(S^P))+x[10]+4294925233&4294967295,V=b+(R<<17&4294967295|R>>>15),R=P+(S^V&(b^S))+x[11]+2304563134&4294967295,P=V+(R<<22&4294967295|R>>>10),R=S+(b^P&(V^b))+x[12]+1804603682&4294967295,S=P+(R<<7&4294967295|R>>>25),R=b+(V^S&(P^V))+x[13]+4254626195&4294967295,b=S+(R<<12&4294967295|R>>>20),R=V+(P^b&(S^P))+x[14]+2792965006&4294967295,V=b+(R<<17&4294967295|R>>>15),R=P+(S^V&(b^S))+x[15]+1236535329&4294967295,P=V+(R<<22&4294967295|R>>>10),R=S+(V^b&(P^V))+x[1]+4129170786&4294967295,S=P+(R<<5&4294967295|R>>>27),R=b+(P^V&(S^P))+x[6]+3225465664&4294967295,b=S+(R<<9&4294967295|R>>>23),R=V+(S^P&(b^S))+x[11]+643717713&4294967295,V=b+(R<<14&4294967295|R>>>18),R=P+(b^S&(V^b))+x[0]+3921069994&4294967295,P=V+(R<<20&4294967295|R>>>12),R=S+(V^b&(P^V))+x[5]+3593408605&4294967295,S=P+(R<<5&4294967295|R>>>27),R=b+(P^V&(S^P))+x[10]+38016083&4294967295,b=S+(R<<9&4294967295|R>>>23),R=V+(S^P&(b^S))+x[15]+3634488961&4294967295,V=b+(R<<14&4294967295|R>>>18),R=P+(b^S&(V^b))+x[4]+3889429448&4294967295,P=V+(R<<20&4294967295|R>>>12),R=S+(V^b&(P^V))+x[9]+568446438&4294967295,S=P+(R<<5&4294967295|R>>>27),R=b+(P^V&(S^P))+x[14]+3275163606&4294967295,b=S+(R<<9&4294967295|R>>>23),R=V+(S^P&(b^S))+x[3]+4107603335&4294967295,V=b+(R<<14&4294967295|R>>>18),R=P+(b^S&(V^b))+x[8]+1163531501&4294967295,P=V+(R<<20&4294967295|R>>>12),R=S+(V^b&(P^V))+x[13]+2850285829&4294967295,S=P+(R<<5&4294967295|R>>>27),R=b+(P^V&(S^P))+x[2]+4243563512&4294967295,b=S+(R<<9&4294967295|R>>>23),R=V+(S^P&(b^S))+x[7]+1735328473&4294967295,V=b+(R<<14&4294967295|R>>>18),R=P+(b^S&(V^b))+x[12]+2368359562&4294967295,P=V+(R<<20&4294967295|R>>>12),R=S+(P^V^b)+x[5]+4294588738&4294967295,S=P+(R<<4&4294967295|R>>>28),R=b+(S^P^V)+x[8]+2272392833&4294967295,b=S+(R<<11&4294967295|R>>>21),R=V+(b^S^P)+x[11]+1839030562&4294967295,V=b+(R<<16&4294967295|R>>>16),R=P+(V^b^S)+x[14]+4259657740&4294967295,P=V+(R<<23&4294967295|R>>>9),R=S+(P^V^b)+x[1]+2763975236&4294967295,S=P+(R<<4&4294967295|R>>>28),R=b+(S^P^V)+x[4]+1272893353&4294967295,b=S+(R<<11&4294967295|R>>>21),R=V+(b^S^P)+x[7]+4139469664&4294967295,V=b+(R<<16&4294967295|R>>>16),R=P+(V^b^S)+x[10]+3200236656&4294967295,P=V+(R<<23&4294967295|R>>>9),R=S+(P^V^b)+x[13]+681279174&4294967295,S=P+(R<<4&4294967295|R>>>28),R=b+(S^P^V)+x[0]+3936430074&4294967295,b=S+(R<<11&4294967295|R>>>21),R=V+(b^S^P)+x[3]+3572445317&4294967295,V=b+(R<<16&4294967295|R>>>16),R=P+(V^b^S)+x[6]+76029189&4294967295,P=V+(R<<23&4294967295|R>>>9),R=S+(P^V^b)+x[9]+3654602809&4294967295,S=P+(R<<4&4294967295|R>>>28),R=b+(S^P^V)+x[12]+3873151461&4294967295,b=S+(R<<11&4294967295|R>>>21),R=V+(b^S^P)+x[15]+530742520&4294967295,V=b+(R<<16&4294967295|R>>>16),R=P+(V^b^S)+x[2]+3299628645&4294967295,P=V+(R<<23&4294967295|R>>>9),R=S+(V^(P|~b))+x[0]+4096336452&4294967295,S=P+(R<<6&4294967295|R>>>26),R=b+(P^(S|~V))+x[7]+1126891415&4294967295,b=S+(R<<10&4294967295|R>>>22),R=V+(S^(b|~P))+x[14]+2878612391&4294967295,V=b+(R<<15&4294967295|R>>>17),R=P+(b^(V|~S))+x[5]+4237533241&4294967295,P=V+(R<<21&4294967295|R>>>11),R=S+(V^(P|~b))+x[12]+1700485571&4294967295,S=P+(R<<6&4294967295|R>>>26),R=b+(P^(S|~V))+x[3]+2399980690&4294967295,b=S+(R<<10&4294967295|R>>>22),R=V+(S^(b|~P))+x[10]+4293915773&4294967295,V=b+(R<<15&4294967295|R>>>17),R=P+(b^(V|~S))+x[1]+2240044497&4294967295,P=V+(R<<21&4294967295|R>>>11),R=S+(V^(P|~b))+x[8]+1873313359&4294967295,S=P+(R<<6&4294967295|R>>>26),R=b+(P^(S|~V))+x[15]+4264355552&4294967295,b=S+(R<<10&4294967295|R>>>22),R=V+(S^(b|~P))+x[6]+2734768916&4294967295,V=b+(R<<15&4294967295|R>>>17),R=P+(b^(V|~S))+x[13]+1309151649&4294967295,P=V+(R<<21&4294967295|R>>>11),R=S+(V^(P|~b))+x[4]+4149444226&4294967295,S=P+(R<<6&4294967295|R>>>26),R=b+(P^(S|~V))+x[11]+3174756917&4294967295,b=S+(R<<10&4294967295|R>>>22),R=V+(S^(b|~P))+x[2]+718787259&4294967295,V=b+(R<<15&4294967295|R>>>17),R=P+(b^(V|~S))+x[9]+3951481745&4294967295,k.g[0]=k.g[0]+S&4294967295,k.g[1]=k.g[1]+(V+(R<<21&4294967295|R>>>11))&4294967295,k.g[2]=k.g[2]+V&4294967295,k.g[3]=k.g[3]+b&4294967295}r.prototype.u=function(k,S){S===void 0&&(S=k.length);for(var P=S-this.blockSize,x=this.B,V=this.h,b=0;b<S;){if(V==0)for(;b<=P;)o(this,k,b),b+=this.blockSize;if(typeof k=="string"){for(;b<S;)if(x[V++]=k.charCodeAt(b++),V==this.blockSize){o(this,x),V=0;break}}else for(;b<S;)if(x[V++]=k[b++],V==this.blockSize){o(this,x),V=0;break}}this.h=V,this.o+=S},r.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var S=1;S<k.length-8;++S)k[S]=0;var P=8*this.o;for(S=k.length-8;S<k.length;++S)k[S]=P&255,P/=256;for(this.u(k),k=Array(16),S=P=0;4>S;++S)for(var x=0;32>x;x+=8)k[P++]=this.g[S]>>>x&255;return k};function a(k,S){var P=d;return Object.prototype.hasOwnProperty.call(P,k)?P[k]:P[k]=S(k)}function c(k,S){this.h=S;for(var P=[],x=!0,V=k.length-1;0<=V;V--){var b=k[V]|0;x&&b==S||(P[V]=b,x=!1)}this.g=P}var d={};function p(k){return-128<=k&&128>k?a(k,function(S){return new c([S|0],0>S?-1:0)}):new c([k|0],0>k?-1:0)}function y(k){if(isNaN(k)||!isFinite(k))return w;if(0>k)return j(y(-k));for(var S=[],P=1,x=0;k>=P;x++)S[x]=k/P|0,P*=4294967296;return new c(S,0)}function E(k,S){if(k.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(k.charAt(0)=="-")return j(E(k.substring(1),S));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var P=y(Math.pow(S,8)),x=w,V=0;V<k.length;V+=8){var b=Math.min(8,k.length-V),R=parseInt(k.substring(V,V+b),S);8>b?(b=y(Math.pow(S,b)),x=x.j(b).add(y(R))):(x=x.j(P),x=x.add(y(R)))}return x}var w=p(0),T=p(1),U=p(16777216);i=c.prototype,i.m=function(){if(H(this))return-j(this).m();for(var k=0,S=1,P=0;P<this.g.length;P++){var x=this.i(P);k+=(0<=x?x:4294967296+x)*S,S*=4294967296}return k},i.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if($(this))return"0";if(H(this))return"-"+j(this).toString(k);for(var S=y(Math.pow(k,6)),P=this,x="";;){var V=pe(P,S).g;P=ve(P,V.j(S));var b=((0<P.g.length?P.g[0]:P.h)>>>0).toString(k);if(P=V,$(P))return b+x;for(;6>b.length;)b="0"+b;x=b+x}},i.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function $(k){if(k.h!=0)return!1;for(var S=0;S<k.g.length;S++)if(k.g[S]!=0)return!1;return!0}function H(k){return k.h==-1}i.l=function(k){return k=ve(this,k),H(k)?-1:$(k)?0:1};function j(k){for(var S=k.g.length,P=[],x=0;x<S;x++)P[x]=~k.g[x];return new c(P,~k.h).add(T)}i.abs=function(){return H(this)?j(this):this},i.add=function(k){for(var S=Math.max(this.g.length,k.g.length),P=[],x=0,V=0;V<=S;V++){var b=x+(this.i(V)&65535)+(k.i(V)&65535),R=(b>>>16)+(this.i(V)>>>16)+(k.i(V)>>>16);x=R>>>16,b&=65535,R&=65535,P[V]=R<<16|b}return new c(P,P[P.length-1]&-2147483648?-1:0)};function ve(k,S){return k.add(j(S))}i.j=function(k){if($(this)||$(k))return w;if(H(this))return H(k)?j(this).j(j(k)):j(j(this).j(k));if(H(k))return j(this.j(j(k)));if(0>this.l(U)&&0>k.l(U))return y(this.m()*k.m());for(var S=this.g.length+k.g.length,P=[],x=0;x<2*S;x++)P[x]=0;for(x=0;x<this.g.length;x++)for(var V=0;V<k.g.length;V++){var b=this.i(x)>>>16,R=this.i(x)&65535,ot=k.i(V)>>>16,Vt=k.i(V)&65535;P[2*x+2*V]+=R*Vt,se(P,2*x+2*V),P[2*x+2*V+1]+=b*Vt,se(P,2*x+2*V+1),P[2*x+2*V+1]+=R*ot,se(P,2*x+2*V+1),P[2*x+2*V+2]+=b*ot,se(P,2*x+2*V+2)}for(x=0;x<S;x++)P[x]=P[2*x+1]<<16|P[2*x];for(x=S;x<2*S;x++)P[x]=0;return new c(P,0)};function se(k,S){for(;(k[S]&65535)!=k[S];)k[S+1]+=k[S]>>>16,k[S]&=65535,S++}function te(k,S){this.g=k,this.h=S}function pe(k,S){if($(S))throw Error("division by zero");if($(k))return new te(w,w);if(H(k))return S=pe(j(k),S),new te(j(S.g),j(S.h));if(H(S))return S=pe(k,j(S)),new te(j(S.g),S.h);if(30<k.g.length){if(H(k)||H(S))throw Error("slowDivide_ only works with positive integers.");for(var P=T,x=S;0>=x.l(k);)P=Se(P),x=Se(x);var V=me(P,1),b=me(x,1);for(x=me(x,2),P=me(P,2);!$(x);){var R=b.add(x);0>=R.l(k)&&(V=V.add(P),b=R),x=me(x,1),P=me(P,1)}return S=ve(k,V.j(S)),new te(V,S)}for(V=w;0<=k.l(S);){for(P=Math.max(1,Math.floor(k.m()/S.m())),x=Math.ceil(Math.log(P)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),b=y(P),R=b.j(S);H(R)||0<R.l(k);)P-=x,b=y(P),R=b.j(S);$(b)&&(b=T),V=V.add(b),k=ve(k,R)}return new te(V,k)}i.A=function(k){return pe(this,k).h},i.and=function(k){for(var S=Math.max(this.g.length,k.g.length),P=[],x=0;x<S;x++)P[x]=this.i(x)&k.i(x);return new c(P,this.h&k.h)},i.or=function(k){for(var S=Math.max(this.g.length,k.g.length),P=[],x=0;x<S;x++)P[x]=this.i(x)|k.i(x);return new c(P,this.h|k.h)},i.xor=function(k){for(var S=Math.max(this.g.length,k.g.length),P=[],x=0;x<S;x++)P[x]=this.i(x)^k.i(x);return new c(P,this.h^k.h)};function Se(k){for(var S=k.g.length+1,P=[],x=0;x<S;x++)P[x]=k.i(x)<<1|k.i(x-1)>>>31;return new c(P,k.h)}function me(k,S){var P=S>>5;S%=32;for(var x=k.g.length-P,V=[],b=0;b<x;b++)V[b]=0<S?k.i(b+P)>>>S|k.i(b+P+1)<<32-S:k.i(b+P);return new c(V,k.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Jv=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=y,c.fromString=E,Ri=c}).apply(typeof Hy<"u"?Hy:typeof self<"u"?self:typeof window<"u"?window:{});var Ec=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Zv,gl,eE,Cc,Uf,tE,nE,rE;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,_){return u==Array.prototype||u==Object.prototype||(u[m]=_.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ec=="object"&&Ec];for(var m=0;m<u.length;++m){var _=u[m];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var r=t(this);function o(u,m){if(m)e:{var _=r;u=u.split(".");for(var I=0;I<u.length-1;I++){var O=u[I];if(!(O in _))break e;_=_[O]}u=u[u.length-1],I=_[u],m=m(I),m!=I&&m!=null&&e(_,u,{configurable:!0,writable:!0,value:m})}}function a(u,m){u instanceof String&&(u+="");var _=0,I=!1,O={next:function(){if(!I&&_<u.length){var z=_++;return{value:m(z,u[z]),done:!1}}return I=!0,{done:!0,value:void 0}}};return O[Symbol.iterator]=function(){return O},O}o("Array.prototype.values",function(u){return u||function(){return a(this,function(m,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function p(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function y(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function E(u,m,_){return u.call.apply(u.bind,arguments)}function w(u,m,_){if(!u)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var O=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(O,I),u.apply(m,O)}}return function(){return u.apply(m,arguments)}}function T(u,m,_){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?E:w,T.apply(null,arguments)}function U(u,m){var _=Array.prototype.slice.call(arguments,1);return function(){var I=_.slice();return I.push.apply(I,arguments),u.apply(this,I)}}function $(u,m){function _(){}_.prototype=m.prototype,u.aa=m.prototype,u.prototype=new _,u.prototype.constructor=u,u.Qb=function(I,O,z){for(var J=Array(arguments.length-2),Ue=2;Ue<arguments.length;Ue++)J[Ue-2]=arguments[Ue];return m.prototype[O].apply(I,J)}}function H(u){const m=u.length;if(0<m){const _=Array(m);for(let I=0;I<m;I++)_[I]=u[I];return _}return[]}function j(u,m){for(let _=1;_<arguments.length;_++){const I=arguments[_];if(p(I)){const O=u.length||0,z=I.length||0;u.length=O+z;for(let J=0;J<z;J++)u[O+J]=I[J]}else u.push(I)}}class ve{constructor(m,_){this.i=m,this.j=_,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function se(u){return/^[\s\xa0]*$/.test(u)}function te(){var u=d.navigator;return u&&(u=u.userAgent)?u:""}function pe(u){return pe[" "](u),u}pe[" "]=function(){};var Se=te().indexOf("Gecko")!=-1&&!(te().toLowerCase().indexOf("webkit")!=-1&&te().indexOf("Edge")==-1)&&!(te().indexOf("Trident")!=-1||te().indexOf("MSIE")!=-1)&&te().indexOf("Edge")==-1;function me(u,m,_){for(const I in u)m.call(_,u[I],I,u)}function k(u,m){for(const _ in u)m.call(void 0,u[_],_,u)}function S(u){const m={};for(const _ in u)m[_]=u[_];return m}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(u,m){let _,I;for(let O=1;O<arguments.length;O++){I=arguments[O];for(_ in I)u[_]=I[_];for(let z=0;z<P.length;z++)_=P[z],Object.prototype.hasOwnProperty.call(I,_)&&(u[_]=I[_])}}function V(u){var m=1;u=u.split(":");const _=[];for(;0<m&&u.length;)_.push(u.shift()),m--;return u.length&&_.push(u.join(":")),_}function b(u){d.setTimeout(()=>{throw u},0)}function R(){var u=ge;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class ot{constructor(){this.h=this.g=null}add(m,_){const I=Vt.get();I.set(m,_),this.h?this.h.next=I:this.g=I,this.h=I}}var Vt=new ve(()=>new Nt,u=>u.reset());class Nt{constructor(){this.next=this.g=this.h=null}set(m,_){this.h=m,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let je,Z=!1,ge=new ot,re=()=>{const u=d.Promise.resolve(void 0);je=()=>{u.then(N)}};var N=()=>{for(var u;u=R();){try{u.h.call(u.g)}catch(_){b(_)}var m=Vt;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}Z=!1};function K(){this.s=this.s,this.C=this.C}K.prototype.s=!1,K.prototype.ma=function(){this.s||(this.s=!0,this.N())},K.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function de(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}de.prototype.h=function(){this.defaultPrevented=!0};var Ae=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};d.addEventListener("test",_,m),d.removeEventListener("test",_,m)}catch{}return u}();function Pe(u,m){if(de.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var _=this.type=u.type,I=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(Se){e:{try{pe(m.nodeName);var O=!0;break e}catch{}O=!1}O||(m=null)}}else _=="mouseover"?m=u.fromElement:_=="mouseout"&&(m=u.toElement);this.relatedTarget=m,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Ve[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Pe.aa.h.call(this)}}$(Pe,de);var Ve={2:"touch",3:"pen",4:"mouse"};Pe.prototype.h=function(){Pe.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Le="closure_listenable_"+(1e6*Math.random()|0),Fe=0;function Ke(u,m,_,I,O){this.listener=u,this.proxy=null,this.src=m,this.type=_,this.capture=!!I,this.ha=O,this.key=++Fe,this.da=this.fa=!1}function Et(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function dr(u){this.src=u,this.g={},this.h=0}dr.prototype.add=function(u,m,_,I,O){var z=u.toString();u=this.g[z],u||(u=this.g[z]=[],this.h++);var J=jr(u,m,I,O);return-1<J?(m=u[J],_||(m.fa=!1)):(m=new Ke(m,this.src,z,!!I,O),m.fa=_,u.push(m)),m};function Ls(u,m){var _=m.type;if(_ in u.g){var I=u.g[_],O=Array.prototype.indexOf.call(I,m,void 0),z;(z=0<=O)&&Array.prototype.splice.call(I,O,1),z&&(Et(m),u.g[_].length==0&&(delete u.g[_],u.h--))}}function jr(u,m,_,I){for(var O=0;O<u.length;++O){var z=u[O];if(!z.da&&z.listener==m&&z.capture==!!_&&z.ha==I)return O}return-1}var Mi="closure_lm_"+(1e6*Math.random()|0),Fs={};function ma(u,m,_,I,O){if(Array.isArray(m)){for(var z=0;z<m.length;z++)ma(u,m[z],_,I,O);return null}return _=_a(_),u&&u[Le]?u.K(m,_,y(I)?!!I.capture:!1,O):ga(u,m,_,!1,I,O)}function ga(u,m,_,I,O,z){if(!m)throw Error("Invalid event type");var J=y(O)?!!O.capture:!!O,Ue=Bs(u);if(Ue||(u[Mi]=Ue=new dr(u)),_=Ue.add(m,_,I,J,z),_.proxy)return _;if(I=iu(),_.proxy=I,I.src=u,I.listener=_,u.addEventListener)Ae||(O=J),O===void 0&&(O=!1),u.addEventListener(m.toString(),I,O);else if(u.attachEvent)u.attachEvent(pr(m.toString()),I);else if(u.addListener&&u.removeListener)u.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return _}function iu(){function u(_){return m.call(u.src,u.listener,_)}const m=ya;return u}function Us(u,m,_,I,O){if(Array.isArray(m))for(var z=0;z<m.length;z++)Us(u,m[z],_,I,O);else I=y(I)?!!I.capture:!!I,_=_a(_),u&&u[Le]?(u=u.i,m=String(m).toString(),m in u.g&&(z=u.g[m],_=jr(z,_,I,O),-1<_&&(Et(z[_]),Array.prototype.splice.call(z,_,1),z.length==0&&(delete u.g[m],u.h--)))):u&&(u=Bs(u))&&(m=u.g[m.toString()],u=-1,m&&(u=jr(m,_,I,O)),(_=-1<u?m[u]:null)&&fr(_))}function fr(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[Le])Ls(m.i,u);else{var _=u.type,I=u.proxy;m.removeEventListener?m.removeEventListener(_,I,u.capture):m.detachEvent?m.detachEvent(pr(_),I):m.addListener&&m.removeListener&&m.removeListener(I),(_=Bs(m))?(Ls(_,u),_.h==0&&(_.src=null,m[Mi]=null)):Et(u)}}}function pr(u){return u in Fs?Fs[u]:Fs[u]="on"+u}function ya(u,m){if(u.da)u=!0;else{m=new Pe(m,this);var _=u.listener,I=u.ha||u.src;u.fa&&fr(u),u=_.call(I,m)}return u}function Bs(u){return u=u[Mi],u instanceof dr?u:null}var zs="__closure_events_fn_"+(1e9*Math.random()>>>0);function _a(u){return typeof u=="function"?u:(u[zs]||(u[zs]=function(m){return u.handleEvent(m)}),u[zs])}function ft(){K.call(this),this.i=new dr(this),this.M=this,this.F=null}$(ft,K),ft.prototype[Le]=!0,ft.prototype.removeEventListener=function(u,m,_,I){Us(this,u,m,_,I)};function pt(u,m){var _,I=u.F;if(I)for(_=[];I;I=I.F)_.push(I);if(u=u.M,I=m.type||m,typeof m=="string")m=new de(m,u);else if(m instanceof de)m.target=m.target||u;else{var O=m;m=new de(I,u),x(m,O)}if(O=!0,_)for(var z=_.length-1;0<=z;z--){var J=m.g=_[z];O=mr(J,I,!0,m)&&O}if(J=m.g=u,O=mr(J,I,!0,m)&&O,O=mr(J,I,!1,m)&&O,_)for(z=0;z<_.length;z++)J=m.g=_[z],O=mr(J,I,!1,m)&&O}ft.prototype.N=function(){if(ft.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var _=u.g[m],I=0;I<_.length;I++)Et(_[I]);delete u.g[m],u.h--}}this.F=null},ft.prototype.K=function(u,m,_,I){return this.i.add(String(u),m,!1,_,I)},ft.prototype.L=function(u,m,_,I){return this.i.add(String(u),m,!0,_,I)};function mr(u,m,_,I){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var O=!0,z=0;z<m.length;++z){var J=m[z];if(J&&!J.da&&J.capture==_){var Ue=J.listener,mt=J.ha||J.src;J.fa&&Ls(u.i,J),O=Ue.call(mt,I)!==!1&&O}}return O&&!I.defaultPrevented}function va(u,m,_){if(typeof u=="function")_&&(u=T(u,_));else if(u&&typeof u.handleEvent=="function")u=T(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:d.setTimeout(u,m||0)}function $r(u){u.g=va(()=>{u.g=null,u.i&&(u.i=!1,$r(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class Li extends K{constructor(m,_){super(),this.m=m,this.l=_,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:$r(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Fi(u){K.call(this),this.h=u,this.g={}}$(Fi,K);var Ea=[];function Ia(u){me(u.g,function(m,_){this.g.hasOwnProperty(_)&&fr(m)},u),u.g={}}Fi.prototype.N=function(){Fi.aa.N.call(this),Ia(this)},Fi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var wa=d.JSON.stringify,Ta=d.JSON.parse,Sa=class{stringify(u){return d.JSON.stringify(u,void 0)}parse(u){return d.JSON.parse(u,void 0)}};function Ui(){}Ui.prototype.h=null;function js(u){return u.h||(u.h=u.i())}function $s(){}var yn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Gn(){de.call(this,"d")}$(Gn,de);function qs(){de.call(this,"c")}$(qs,de);var Wn={},Aa=null;function Bi(){return Aa=Aa||new ft}Wn.La="serverreachability";function Ra(u){de.call(this,Wn.La,u)}$(Ra,de);function gr(u){const m=Bi();pt(m,new Ra(m))}Wn.STAT_EVENT="statevent";function Pa(u,m){de.call(this,Wn.STAT_EVENT,u),this.stat=m}$(Pa,de);function at(u){const m=Bi();pt(m,new Pa(m,u))}Wn.Ma="timingevent";function Ks(u,m){de.call(this,Wn.Ma,u),this.size=m}$(Ks,de);function kn(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){u()},m)}function zi(){this.g=!0}zi.prototype.xa=function(){this.g=!1};function ji(u,m,_,I,O,z){u.info(function(){if(u.g)if(z)for(var J="",Ue=z.split("&"),mt=0;mt<Ue.length;mt++){var Ne=Ue[mt].split("=");if(1<Ne.length){var It=Ne[0];Ne=Ne[1];var ut=It.split("_");J=2<=ut.length&&ut[1]=="type"?J+(It+"="+Ne+"&"):J+(It+"=redacted&")}}else J=null;else J=z;return"XMLHTTP REQ ("+I+") [attempt "+O+"]: "+m+`
`+_+`
`+J})}function Hs(u,m,_,I,O,z,J){u.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+O+"]: "+m+`
`+_+`
`+z+" "+J})}function xn(u,m,_,I){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+$h(u,_)+(I?" "+I:"")})}function Ca(u,m){u.info(function(){return"TIMEOUT: "+m})}zi.prototype.info=function(){};function $h(u,m){if(!u.g)return m;if(!m)return null;try{var _=JSON.parse(m);if(_){for(u=0;u<_.length;u++)if(Array.isArray(_[u])){var I=_[u];if(!(2>I.length)){var O=I[1];if(Array.isArray(O)&&!(1>O.length)){var z=O[0];if(z!="noop"&&z!="stop"&&z!="close")for(var J=1;J<O.length;J++)O[J]=""}}}}return wa(_)}catch{return m}}var Gs={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},su={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Dn;function $i(){}$($i,Ui),$i.prototype.g=function(){return new XMLHttpRequest},$i.prototype.i=function(){return{}},Dn=new $i;function Vn(u,m,_,I){this.j=u,this.i=m,this.l=_,this.R=I||1,this.U=new Fi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ou}function ou(){this.i=null,this.g="",this.h=!1}var ka={},Ws={};function Qs(u,m,_){u.L=1,u.v=Wr(ln(m)),u.m=_,u.P=!0,xa(u,null)}function xa(u,m){u.F=Date.now(),He(u),u.A=ln(u.v);var _=u.A,I=u.R;Array.isArray(I)||(I=[String(I)]),Yr(_.i,"t",I),u.C=0,_=u.j.J,u.h=new ou,u.g=Su(u.j,_?m:null,!u.m),0<u.O&&(u.M=new Li(T(u.Y,u,u.g),u.O)),m=u.U,_=u.g,I=u.ca;var O="readystatechange";Array.isArray(O)||(O&&(Ea[0]=O.toString()),O=Ea);for(var z=0;z<O.length;z++){var J=ma(_,O[z],I||m.handleEvent,!1,m.h||m);if(!J)break;m.g[J.key]=J}m=u.H?S(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),gr(),ji(u.i,u.u,u.A,u.l,u.R,u.m)}Vn.prototype.ca=function(u){u=u.target;const m=this.M;m&&Yt(u)==3?m.j():this.Y(u)},Vn.prototype.Y=function(u){try{if(u==this.g)e:{const ut=Yt(this.g);var m=this.g.Ba();const En=this.g.Z();if(!(3>ut)&&(ut!=3||this.g&&(this.h.h||this.g.oa()||Ma(this.g)))){this.J||ut!=4||m==7||(m==8||0>=En?gr(3):gr(2)),qi(this);var _=this.g.Z();this.X=_;t:if(au(this)){var I=Ma(this.g);u="";var O=I.length,z=Yt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){_n(this),qr(this);var J="";break t}this.h.i=new d.TextDecoder}for(m=0;m<O;m++)this.h.h=!0,u+=this.h.i.decode(I[m],{stream:!(z&&m==O-1)});I.length=0,this.h.g+=u,this.C=0,J=this.h.g}else J=this.g.oa();if(this.o=_==200,Hs(this.i,this.u,this.A,this.l,this.R,ut,_),this.o){if(this.T&&!this.K){t:{if(this.g){var Ue,mt=this.g;if((Ue=mt.g?mt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!se(Ue)){var Ne=Ue;break t}}Ne=null}if(_=Ne)xn(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Da(this,_);else{this.o=!1,this.s=3,at(12),_n(this),qr(this);break e}}if(this.P){_=!0;let cn;for(;!this.J&&this.C<J.length;)if(cn=qh(this,J),cn==Ws){ut==4&&(this.s=4,at(14),_=!1),xn(this.i,this.l,null,"[Incomplete Response]");break}else if(cn==ka){this.s=4,at(15),xn(this.i,this.l,J,"[Invalid Chunk]"),_=!1;break}else xn(this.i,this.l,cn,null),Da(this,cn);if(au(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ut!=4||J.length!=0||this.h.h||(this.s=1,at(16),_=!1),this.o=this.o&&_,!_)xn(this.i,this.l,J,"[Invalid Chunked Response]"),_n(this),qr(this);else if(0<J.length&&!this.W){this.W=!0;var It=this.j;It.g==this&&It.ba&&!It.M&&(It.j.info("Great, no buffering proxy detected. Bytes received: "+J.length),Fa(It),It.M=!0,at(11))}}else xn(this.i,this.l,J,null),Da(this,J);ut==4&&_n(this),this.o&&!this.J&&(ut==4?oo(this.j,this):(this.o=!1,He(this)))}else to(this.g),_==400&&0<J.indexOf("Unknown SID")?(this.s=3,at(12)):(this.s=0,at(13)),_n(this),qr(this)}}}catch{}finally{}};function au(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function qh(u,m){var _=u.C,I=m.indexOf(`
`,_);return I==-1?Ws:(_=Number(m.substring(_,I)),isNaN(_)?ka:(I+=1,I+_>m.length?Ws:(m=m.slice(I,I+_),u.C=I+_,m)))}Vn.prototype.cancel=function(){this.J=!0,_n(this)};function He(u){u.S=Date.now()+u.I,lu(u,u.I)}function lu(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=kn(T(u.ba,u),m)}function qi(u){u.B&&(d.clearTimeout(u.B),u.B=null)}Vn.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(Ca(this.i,this.A),this.L!=2&&(gr(),at(17)),_n(this),this.s=2,qr(this)):lu(this,this.S-u)};function qr(u){u.j.G==0||u.J||oo(u.j,u)}function _n(u){qi(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,Ia(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function Da(u,m){try{var _=u.j;if(_.G!=0&&(_.g==u||jt(_.h,u))){if(!u.K&&jt(_.h,u)&&_.G==3){try{var I=_.Da.g.parse(m)}catch{I=null}if(Array.isArray(I)&&I.length==3){var O=I;if(O[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<u.F)so(_),Ln(_);else break e;io(_),at(18)}}else _.za=O[1],0<_.za-_.T&&37500>O[2]&&_.F&&_.v==0&&!_.C&&(_.C=kn(T(_.Za,_),6e3));if(1>=cu(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Ir(_,11)}else if((u.K||_.g==u)&&so(_),!se(m))for(O=_.Da.g.parse(m),m=0;m<O.length;m++){let Ne=O[m];if(_.T=Ne[0],Ne=Ne[1],_.G==2)if(Ne[0]=="c"){_.K=Ne[1],_.ia=Ne[2];const It=Ne[3];It!=null&&(_.la=It,_.j.info("VER="+_.la));const ut=Ne[4];ut!=null&&(_.Aa=ut,_.j.info("SVER="+_.Aa));const En=Ne[5];En!=null&&typeof En=="number"&&0<En&&(I=1.5*En,_.L=I,_.j.info("backChannelRequestTimeoutMs_="+I)),I=_;const cn=u.g;if(cn){const Xi=cn.g?cn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Xi){var z=I.h;z.g||Xi.indexOf("spdy")==-1&&Xi.indexOf("quic")==-1&&Xi.indexOf("h2")==-1||(z.j=z.l,z.g=new Set,z.h&&(Va(z,z.h),z.h=null))}if(I.D){const lo=cn.g?cn.g.getResponseHeader("X-HTTP-Session-Id"):null;lo&&(I.ya=lo,qe(I.I,I.D,lo))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-u.F,_.j.info("Handshake RTT: "+_.R+"ms")),I=_;var J=u;if(I.qa=Tu(I,I.J?I.ia:null,I.W),J.K){hu(I.h,J);var Ue=J,mt=I.L;mt&&(Ue.I=mt),Ue.B&&(qi(Ue),He(Ue)),I.g=J}else Yi(I);0<_.i.length&&Jn(_)}else Ne[0]!="stop"&&Ne[0]!="close"||Ir(_,7);else _.G==3&&(Ne[0]=="stop"||Ne[0]=="close"?Ne[0]=="stop"?Ir(_,7):Pt(_):Ne[0]!="noop"&&_.l&&_.l.ta(Ne),_.v=0)}}gr(4)}catch{}}var uu=class{constructor(u,m){this.g=u,this.map=m}};function Ki(u){this.l=u||10,d.PerformanceNavigationTiming?(u=d.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function an(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function cu(u){return u.h?1:u.g?u.g.size:0}function jt(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function Va(u,m){u.g?u.g.add(m):u.h=m}function hu(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}Ki.prototype.cancel=function(){if(this.i=du(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function du(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const _ of u.g.values())m=m.concat(_.D);return m}return H(u.i)}function Ys(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(p(u)){for(var m=[],_=u.length,I=0;I<_;I++)m.push(u[I]);return m}m=[],_=0;for(I in u)m[_++]=u[I];return m}function Xs(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(p(u)||typeof u=="string"){var m=[];u=u.length;for(var _=0;_<u;_++)m.push(_);return m}m=[],_=0;for(const I in u)m[_++]=I;return m}}}function Kr(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(p(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var _=Xs(u),I=Ys(u),O=I.length,z=0;z<O;z++)m.call(void 0,I[z],_&&_[z],u)}var Hi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Kh(u,m){if(u){u=u.split("&");for(var _=0;_<u.length;_++){var I=u[_].indexOf("="),O=null;if(0<=I){var z=u[_].substring(0,I);O=u[_].substring(I+1)}else z=u[_];m(z,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function yr(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof yr){this.h=u.h,Gi(this,u.j),this.o=u.o,this.g=u.g,Hr(this,u.s),this.l=u.l;var m=u.i,_=new Qn;_.i=m.i,m.g&&(_.g=new Map(m.g),_.h=m.h),Gr(this,_),this.m=u.m}else u&&(m=String(u).match(Hi))?(this.h=!1,Gi(this,m[1]||"",!0),this.o=xe(m[2]||""),this.g=xe(m[3]||"",!0),Hr(this,m[4]),this.l=xe(m[5]||"",!0),Gr(this,m[6]||"",!0),this.m=xe(m[7]||"")):(this.h=!1,this.i=new Qn(null,this.h))}yr.prototype.toString=function(){var u=[],m=this.j;m&&u.push(Qr(m,Js,!0),":");var _=this.g;return(_||m=="file")&&(u.push("//"),(m=this.o)&&u.push(Qr(m,Js,!0),"@"),u.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&u.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(Qr(_,_.charAt(0)=="/"?mu:pu,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",Qr(_,Na)),u.join("")};function ln(u){return new yr(u)}function Gi(u,m,_){u.j=_?xe(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function Hr(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function Gr(u,m,_){m instanceof Qn?(u.i=m,Yn(u.i,u.h)):(_||(m=Qr(m,gu)),u.i=new Qn(m,u.h))}function qe(u,m,_){u.i.set(m,_)}function Wr(u){return qe(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function xe(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Qr(u,m,_){return typeof u=="string"?(u=encodeURI(u).replace(m,fu),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function fu(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Js=/[#\/\?@]/g,pu=/[#\?:]/g,mu=/[#\?]/g,gu=/[#\?@]/g,Na=/#/g;function Qn(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function Rt(u){u.g||(u.g=new Map,u.h=0,u.i&&Kh(u.i,function(m,_){u.add(decodeURIComponent(m.replace(/\+/g," ")),_)}))}i=Qn.prototype,i.add=function(u,m){Rt(this),this.i=null,u=vn(this,u);var _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(m),this.h+=1,this};function Nn(u,m){Rt(u),m=vn(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function bn(u,m){return Rt(u),m=vn(u,m),u.g.has(m)}i.forEach=function(u,m){Rt(this),this.g.forEach(function(_,I){_.forEach(function(O){u.call(m,O,I,this)},this)},this)},i.na=function(){Rt(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),_=[];for(let I=0;I<m.length;I++){const O=u[I];for(let z=0;z<O.length;z++)_.push(m[I])}return _},i.V=function(u){Rt(this);let m=[];if(typeof u=="string")bn(this,u)&&(m=m.concat(this.g.get(vn(this,u))));else{u=Array.from(this.g.values());for(let _=0;_<u.length;_++)m=m.concat(u[_])}return m},i.set=function(u,m){return Rt(this),this.i=null,u=vn(this,u),bn(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},i.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function Yr(u,m,_){Nn(u,m),0<_.length&&(u.i=null,u.g.set(vn(u,m),H(_)),u.h+=_.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var _=0;_<m.length;_++){var I=m[_];const z=encodeURIComponent(String(I)),J=this.V(I);for(I=0;I<J.length;I++){var O=z;J[I]!==""&&(O+="="+encodeURIComponent(String(J[I]))),u.push(O)}}return this.i=u.join("&")};function vn(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function Yn(u,m){m&&!u.j&&(Rt(u),u.i=null,u.g.forEach(function(_,I){var O=I.toLowerCase();I!=O&&(Nn(this,I),Yr(this,O,_))},u)),u.j=m}function Hh(u,m){const _=new zi;if(d.Image){const I=new Image;I.onload=U(Qt,_,"TestLoadImage: loaded",!0,m,I),I.onerror=U(Qt,_,"TestLoadImage: error",!1,m,I),I.onabort=U(Qt,_,"TestLoadImage: abort",!1,m,I),I.ontimeout=U(Qt,_,"TestLoadImage: timeout",!1,m,I),d.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=u}else m(!1)}function yu(u,m){const _=new zi,I=new AbortController,O=setTimeout(()=>{I.abort(),Qt(_,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:I.signal}).then(z=>{clearTimeout(O),z.ok?Qt(_,"TestPingServer: ok",!0,m):Qt(_,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(O),Qt(_,"TestPingServer: error",!1,m)})}function Qt(u,m,_,I,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),I(_)}catch{}}function Gh(){this.g=new Sa}function _u(u,m,_){const I=_||"";try{Kr(u,function(O,z){let J=O;y(O)&&(J=wa(O)),m.push(I+z+"="+encodeURIComponent(J))})}catch(O){throw m.push(I+"type="+encodeURIComponent("_badmap")),O}}function _r(u){this.l=u.Ub||null,this.j=u.eb||!1}$(_r,Ui),_r.prototype.g=function(){return new Wi(this.l,this.j)},_r.prototype.i=function(u){return function(){return u}}({});function Wi(u,m){ft.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}$(Wi,ft),i=Wi.prototype,i.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,Mn(this)},i.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||d).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,On(this)),this.readyState=0},i.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Mn(this)),this.g&&(this.readyState=3,Mn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;vu(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function vu(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}i.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?On(this):Mn(this),this.readyState==3&&vu(this)}},i.Ra=function(u){this.g&&(this.response=this.responseText=u,On(this))},i.Qa=function(u){this.g&&(this.response=u,On(this))},i.ga=function(){this.g&&On(this)};function On(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Mn(u)}i.setRequestHeader=function(u,m){this.u.append(u,m)},i.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var _=m.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=m.next();return u.join(`\r
`)};function Mn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Wi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function vr(u){let m="";return me(u,function(_,I){m+=I,m+=":",m+=_,m+=`\r
`}),m}function Xr(u,m,_){e:{for(I in _){var I=!1;break e}I=!0}I||(_=vr(_),typeof u=="string"?_!=null&&encodeURIComponent(String(_)):qe(u,m,_))}function Ye(u){ft.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}$(Ye,ft);var Wh=/^https?$/i,ba=["POST","PUT"];i=Ye.prototype,i.Ha=function(u){this.J=u},i.ea=function(u,m,_,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Dn.g(),this.v=this.o?js(this.o):js(Dn),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(z){Qi(this,z);return}if(u=_||"",_=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var O in I)_.set(O,I[O]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const z of I.keys())_.set(z,I.get(z));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(_.keys()).find(z=>z.toLowerCase()=="content-type"),O=d.FormData&&u instanceof d.FormData,!(0<=Array.prototype.indexOf.call(ba,m,void 0))||I||O||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[z,J]of _)this.g.setRequestHeader(z,J);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{eo(this),this.u=!0,this.g.send(u),this.u=!1}catch(z){Qi(this,z)}};function Qi(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,Zs(u),un(u)}function Zs(u){u.A||(u.A=!0,pt(u,"complete"),pt(u,"error"))}i.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,pt(this,"complete"),pt(this,"abort"),un(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),un(this,!0)),Ye.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?Oa(this):this.bb())},i.bb=function(){Oa(this)};function Oa(u){if(u.h&&typeof c<"u"&&(!u.v[1]||Yt(u)!=4||u.Z()!=2)){if(u.u&&Yt(u)==4)va(u.Ea,0,u);else if(pt(u,"readystatechange"),Yt(u)==4){u.h=!1;try{const J=u.Z();e:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var _;if(!(_=m)){var I;if(I=J===0){var O=String(u.D).match(Hi)[1]||null;!O&&d.self&&d.self.location&&(O=d.self.location.protocol.slice(0,-1)),I=!Wh.test(O?O.toLowerCase():"")}_=I}if(_)pt(u,"complete"),pt(u,"success");else{u.m=6;try{var z=2<Yt(u)?u.g.statusText:""}catch{z=""}u.l=z+" ["+u.Z()+"]",Zs(u)}}finally{un(u)}}}}function un(u,m){if(u.g){eo(u);const _=u.g,I=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||pt(u,"ready");try{_.onreadystatechange=I}catch{}}}function eo(u){u.I&&(d.clearTimeout(u.I),u.I=null)}i.isActive=function(){return!!this.g};function Yt(u){return u.g?u.g.readyState:0}i.Z=function(){try{return 2<Yt(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),Ta(m)}};function Ma(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function to(u){const m={};u=(u.g&&2<=Yt(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<u.length;I++){if(se(u[I]))continue;var _=V(u[I]);const O=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const z=m[O]||[];m[O]=z,z.push(_)}k(m,function(I){return I.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Xn(u,m,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||m}function La(u){this.Aa=0,this.i=[],this.j=new zi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Xn("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Xn("baseRetryDelayMs",5e3,u),this.cb=Xn("retryDelaySeedMs",1e4,u),this.Wa=Xn("forwardChannelMaxRetries",2,u),this.wa=Xn("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Ki(u&&u.concurrentRequestLimit),this.Da=new Gh,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=La.prototype,i.la=8,i.G=1,i.connect=function(u,m,_,I){at(0),this.W=u,this.H=m||{},_&&I!==void 0&&(this.H.OSID=_,this.H.OAID=I),this.F=this.X,this.I=Tu(this,null,this.W),Jn(this)};function Pt(u){if(no(u),u.G==3){var m=u.U++,_=ln(u.I);if(qe(_,"SID",u.K),qe(_,"RID",m),qe(_,"TYPE","terminate"),Er(u,_),m=new Vn(u,u.j,m),m.L=2,m.v=Wr(ln(_)),_=!1,d.navigator&&d.navigator.sendBeacon)try{_=d.navigator.sendBeacon(m.v.toString(),"")}catch{}!_&&d.Image&&(new Image().src=m.v,_=!0),_||(m.g=Su(m.j,null),m.g.ea(m.v)),m.F=Date.now(),He(m)}wu(u)}function Ln(u){u.g&&(Fa(u),u.g.cancel(),u.g=null)}function no(u){Ln(u),u.u&&(d.clearTimeout(u.u),u.u=null),so(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&d.clearTimeout(u.s),u.s=null)}function Jn(u){if(!an(u.h)&&!u.s){u.s=!0;var m=u.Ga;je||re(),Z||(je(),Z=!0),ge.add(m,u),u.B=0}}function Qh(u,m){return cu(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=kn(T(u.Ga,u,m),Iu(u,u.B)),u.B++,!0)}i.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const O=new Vn(this,this.j,u);let z=this.o;if(this.S&&(z?(z=S(z),x(z,this.S)):z=this.S),this.m!==null||this.O||(O.H=z,z=null),this.P)e:{for(var m=0,_=0;_<this.i.length;_++){t:{var I=this.i[_];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(m+=I,4096<m){m=_;break e}if(m===4096||_===this.i.length-1){m=_+1;break e}}m=1e3}else m=1e3;m=Jr(this,O,m),_=ln(this.I),qe(_,"RID",u),qe(_,"CVER",22),this.D&&qe(_,"X-HTTP-Session-Id",this.D),Er(this,_),z&&(this.O?m="headers="+encodeURIComponent(String(vr(z)))+"&"+m:this.m&&Xr(_,this.m,z)),Va(this.h,O),this.Ua&&qe(_,"TYPE","init"),this.P?(qe(_,"$req",m),qe(_,"SID","null"),O.T=!0,Qs(O,_,null)):Qs(O,_,m),this.G=2}}else this.G==3&&(u?ro(this,u):this.i.length==0||an(this.h)||ro(this))};function ro(u,m){var _;m?_=m.l:_=u.U++;const I=ln(u.I);qe(I,"SID",u.K),qe(I,"RID",_),qe(I,"AID",u.T),Er(u,I),u.m&&u.o&&Xr(I,u.m,u.o),_=new Vn(u,u.j,_,u.B+1),u.m===null&&(_.H=u.o),m&&(u.i=m.D.concat(u.i)),m=Jr(u,_,1e3),_.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Va(u.h,_),Qs(_,I,m)}function Er(u,m){u.H&&me(u.H,function(_,I){qe(m,I,_)}),u.l&&Kr({},function(_,I){qe(m,I,_)})}function Jr(u,m,_){_=Math.min(u.i.length,_);var I=u.l?T(u.l.Na,u.l,u):null;e:{var O=u.i;let z=-1;for(;;){const J=["count="+_];z==-1?0<_?(z=O[0].g,J.push("ofs="+z)):z=0:J.push("ofs="+z);let Ue=!0;for(let mt=0;mt<_;mt++){let Ne=O[mt].g;const It=O[mt].map;if(Ne-=z,0>Ne)z=Math.max(0,O[mt].g-100),Ue=!1;else try{_u(It,J,"req"+Ne+"_")}catch{I&&I(It)}}if(Ue){I=J.join("&");break e}}}return u=u.i.splice(0,_),m.D=u,I}function Yi(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;je||re(),Z||(je(),Z=!0),ge.add(m,u),u.v=0}}function io(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=kn(T(u.Fa,u),Iu(u,u.v)),u.v++,!0)}i.Fa=function(){if(this.u=null,Eu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=kn(T(this.ab,this),u)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,at(10),Ln(this),Eu(this))};function Fa(u){u.A!=null&&(d.clearTimeout(u.A),u.A=null)}function Eu(u){u.g=new Vn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=ln(u.qa);qe(m,"RID","rpc"),qe(m,"SID",u.K),qe(m,"AID",u.T),qe(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&qe(m,"TO",u.ja),qe(m,"TYPE","xmlhttp"),Er(u,m),u.m&&u.o&&Xr(m,u.m,u.o),u.L&&(u.g.I=u.L);var _=u.g;u=u.ia,_.L=1,_.v=Wr(ln(m)),_.m=null,_.P=!0,xa(_,u)}i.Za=function(){this.C!=null&&(this.C=null,Ln(this),io(this),at(19))};function so(u){u.C!=null&&(d.clearTimeout(u.C),u.C=null)}function oo(u,m){var _=null;if(u.g==m){so(u),Fa(u),u.g=null;var I=2}else if(jt(u.h,m))_=m.D,hu(u.h,m),I=1;else return;if(u.G!=0){if(m.o)if(I==1){_=m.m?m.m.length:0,m=Date.now()-m.F;var O=u.B;I=Bi(),pt(I,new Ks(I,_)),Jn(u)}else Yi(u);else if(O=m.s,O==3||O==0&&0<m.X||!(I==1&&Qh(u,m)||I==2&&io(u)))switch(_&&0<_.length&&(m=u.h,m.i=m.i.concat(_)),O){case 1:Ir(u,5);break;case 4:Ir(u,10);break;case 3:Ir(u,6);break;default:Ir(u,2)}}}function Iu(u,m){let _=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(_*=2),_*m}function Ir(u,m){if(u.j.info("Error code "+m),m==2){var _=T(u.fb,u),I=u.Xa;const O=!I;I=new yr(I||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Gi(I,"https"),Wr(I),O?Hh(I.toString(),_):yu(I.toString(),_)}else at(2);u.G=0,u.l&&u.l.sa(m),wu(u),no(u)}i.fb=function(u){u?(this.j.info("Successfully pinged google.com"),at(2)):(this.j.info("Failed to ping google.com"),at(1))};function wu(u){if(u.G=0,u.ka=[],u.l){const m=du(u.h);(m.length!=0||u.i.length!=0)&&(j(u.ka,m),j(u.ka,u.i),u.h.i.length=0,H(u.i),u.i.length=0),u.l.ra()}}function Tu(u,m,_){var I=_ instanceof yr?ln(_):new yr(_);if(I.g!="")m&&(I.g=m+"."+I.g),Hr(I,I.s);else{var O=d.location;I=O.protocol,m=m?m+"."+O.hostname:O.hostname,O=+O.port;var z=new yr(null);I&&Gi(z,I),m&&(z.g=m),O&&Hr(z,O),_&&(z.l=_),I=z}return _=u.D,m=u.ya,_&&m&&qe(I,_,m),qe(I,"VER",u.la),Er(u,I),I}function Su(u,m,_){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new Ye(new _r({eb:_})):new Ye(u.pa),m.Ha(u.J),m}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ua(){}i=Ua.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function ao(){}ao.prototype.g=function(u,m){return new $t(u,m)};function $t(u,m){ft.call(this),this.g=new La(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!se(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!se(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new Zn(this)}$($t,ft),$t.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},$t.prototype.close=function(){Pt(this.g)},$t.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.u&&(_={},_.__data__=wa(u),u=_);m.i.push(new uu(m.Ya++,u)),m.G==3&&Jn(m)},$t.prototype.N=function(){this.g.l=null,delete this.j,Pt(this.g),delete this.g,$t.aa.N.call(this)};function Au(u){Gn.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const _ in m){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}$(Au,Gn);function Ru(){qs.call(this),this.status=1}$(Ru,qs);function Zn(u){this.g=u}$(Zn,Ua),Zn.prototype.ua=function(){pt(this.g,"a")},Zn.prototype.ta=function(u){pt(this.g,new Au(u))},Zn.prototype.sa=function(u){pt(this.g,new Ru)},Zn.prototype.ra=function(){pt(this.g,"b")},ao.prototype.createWebChannel=ao.prototype.g,$t.prototype.send=$t.prototype.o,$t.prototype.open=$t.prototype.m,$t.prototype.close=$t.prototype.close,rE=function(){return new ao},nE=function(){return Bi()},tE=Wn,Uf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Gs.NO_ERROR=0,Gs.TIMEOUT=8,Gs.HTTP_ERROR=6,Cc=Gs,su.COMPLETE="complete",eE=su,$s.EventType=yn,yn.OPEN="a",yn.CLOSE="b",yn.ERROR="c",yn.MESSAGE="d",ft.prototype.listen=ft.prototype.K,gl=$s,Ye.prototype.listenOnce=Ye.prototype.L,Ye.prototype.getLastError=Ye.prototype.Ka,Ye.prototype.getLastErrorCode=Ye.prototype.Ba,Ye.prototype.getStatus=Ye.prototype.Z,Ye.prototype.getResponseJson=Ye.prototype.Oa,Ye.prototype.getResponseText=Ye.prototype.oa,Ye.prototype.send=Ye.prototype.ea,Ye.prototype.setWithCredentials=Ye.prototype.Ha,Zv=Ye}).apply(typeof Ec<"u"?Ec:typeof self<"u"?self:typeof window<"u"?window:{});const Gy="@firebase/firestore",Wy="4.7.15";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}xt.UNAUTHENTICATED=new xt(null),xt.GOOGLE_CREDENTIALS=new xt("google-credentials-uid"),xt.FIRST_PARTY=new xt("first-party-uid"),xt.MOCK_USER=new xt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ca="11.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rs=new pp("@firebase/firestore");function Mo(){return Rs.logLevel}function Y(i,...e){if(Rs.logLevel<=ke.DEBUG){const t=e.map(yp);Rs.debug(`Firestore (${ca}): ${i}`,...t)}}function Ht(i,...e){if(Rs.logLevel<=ke.ERROR){const t=e.map(yp);Rs.error(`Firestore (${ca}): ${i}`,...t)}}function Ps(i,...e){if(Rs.logLevel<=ke.WARN){const t=e.map(yp);Rs.warn(`Firestore (${ca}): ${i}`,...t)}}function yp(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function le(i,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,iE(i,r,t)}function iE(i,e,t){let r=`FIRESTORE (${ca}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Ht(r),new Error(r)}function he(i,e,t,r){let o="Unexpected state";typeof t=="string"?o=t:r=t,i||iE(e,o,r)}function Te(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ie extends Ur{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class YS{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(xt.UNAUTHENTICATED))}shutdown(){}}class XS{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class JS{constructor(e){this.t=e,this.currentUser=xt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){he(this.o===void 0,42304);let r=this.i;const o=p=>this.i!==r?(r=this.i,t(p)):Promise.resolve();let a=new lr;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new lr,e.enqueueRetryable(()=>o(this.currentUser))};const c=()=>{const p=a;e.enqueueRetryable(async()=>{await p.promise,await o(this.currentUser)})},d=p=>{Y("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(p=>d(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(Y("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new lr)}},0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Y("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(he(typeof r.accessToken=="string",31837,{l:r}),new sE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return he(e===null||typeof e=="string",2055,{h:e}),new xt(e)}}class ZS{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=xt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class eA{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new ZS(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(xt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Qy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class tA{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,sr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){he(this.o===void 0,3512);const r=a=>{a.error!=null&&Y("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const c=a.token!==this.m;return this.m=a.token,Y("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const o=a=>{Y("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>o(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?o(a):Y("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Qy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(he(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Qy(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nA(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<i;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oE(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=nA(40);for(let a=0;a<o.length;++a)r.length<20&&o[a]<t&&(r+=e.charAt(o[a]%62))}return r}}function Ie(i,e){return i<e?-1:i>e?1:0}function Bf(i,e){let t=0;for(;t<i.length&&t<e.length;){const r=i.codePointAt(t),o=e.codePointAt(t);if(r!==o){if(r<128&&o<128)return Ie(r,o);{const a=oE(),c=rA(a.encode(Yy(i,t)),a.encode(Yy(e,t)));return c!==0?c:Ie(r,o)}}t+=r>65535?2:1}return Ie(i.length,e.length)}function Yy(i,e){return i.codePointAt(e)>65535?i.substring(e,e+2):i.substring(e,e+1)}function rA(i,e){for(let t=0;t<i.length&&t<e.length;++t)if(i[t]!==e[t])return Ie(i[t],e[t]);return Ie(i.length,e.length)}function Go(i,e,t){return i.length===e.length&&i.every((r,o)=>t(r,e[o]))}function lE(i){return i+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xy=-62135596800,Jy=1e6;class rt{static now(){return rt.fromMillis(Date.now())}static fromDate(e){return rt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*Jy);return new rt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ie(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ie(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Xy)throw new ie(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ie(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Jy}_compareTo(e){return this.seconds===e.seconds?Ie(this.nanoseconds,e.nanoseconds):Ie(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-Xy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{static fromTimestamp(e){return new fe(e)}static min(){return new fe(new rt(0,0))}static max(){return new fe(new rt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zy="__name__";class ir{constructor(e,t,r){t===void 0?t=0:t>e.length&&le(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&le(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return ir.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ir?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const a=ir.compareSegments(e.get(o),t.get(o));if(a!==0)return a}return Ie(e.length,t.length)}static compareSegments(e,t){const r=ir.isNumericId(e),o=ir.isNumericId(t);return r&&!o?-1:!r&&o?1:r&&o?ir.extractNumericId(e).compare(ir.extractNumericId(t)):Bf(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ri.fromString(e.substring(4,e.length-2))}}class Be extends ir{construct(e,t,r){return new Be(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ie(q.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new Be(t)}static emptyPath(){return new Be([])}}const iA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class nt extends ir{construct(e,t,r){return new nt(e,t,r)}static isValidIdentifier(e){return iA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),nt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Zy}static keyField(){return new nt([Zy])}static fromServerFormat(e){const t=[];let r="",o=0;const a=()=>{if(r.length===0)throw new ie(q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;o<e.length;){const d=e[o];if(d==="\\"){if(o+1===e.length)throw new ie(q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new ie(q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,o+=2}else d==="`"?(c=!c,o++):d!=="."||c?(r+=d,o++):(a(),o++)}if(a(),c)throw new ie(q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new nt(t)}static emptyPath(){return new nt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.path=e}static fromPath(e){return new ee(Be.fromString(e))}static fromName(e){return new ee(Be.fromString(e).popFirst(5))}static empty(){return new ee(Be.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Be.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Be.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ee(new Be(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nl=-1;class Hc{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function zf(i){return i.fields.find(e=>e.kind===2)}function ds(i){return i.fields.filter(e=>e.kind!==2)}Hc.UNKNOWN_ID=-1;class kc{constructor(e,t){this.fieldPath=e,this.kind=t}}class bl{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new bl(0,gn.min())}}function sA(i,e){const t=i.toTimestamp().seconds,r=i.toTimestamp().nanoseconds+1,o=fe.fromTimestamp(r===1e9?new rt(t+1,0):new rt(t,r));return new gn(o,ee.empty(),e)}function uE(i){return new gn(i.readTime,i.key,Nl)}class gn{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new gn(fe.min(),ee.empty(),Nl)}static max(){return new gn(fe.max(),ee.empty(),Nl)}}function _p(i,e){let t=i.readTime.compareTo(e.readTime);return t!==0?t:(t=ee.comparator(i.documentKey,e.documentKey),t!==0?t:Ie(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class hE{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bs(i){if(i.code!==q.FAILED_PRECONDITION||i.message!==cE)throw i;Y("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&le(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new M((r,o)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,o)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof M?t:M.resolve(t)}catch(t){return M.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):M.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):M.reject(t)}static resolve(e){return new M((t,r)=>{t(e)})}static reject(e){return new M((t,r)=>{r(e)})}static waitFor(e){return new M((t,r)=>{let o=0,a=0,c=!1;e.forEach(d=>{++o,d.next(()=>{++a,c&&a===o&&t()},p=>r(p))}),c=!0,a===o&&t()})}static or(e){let t=M.resolve(!1);for(const r of e)t=t.next(o=>o?M.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,a)=>{r.push(t.call(this,o,a))}),this.waitFor(r)}static mapArray(e,t){return new M((r,o)=>{const a=e.length,c=new Array(a);let d=0;for(let p=0;p<a;p++){const y=p;t(e[y]).next(E=>{c[y]=E,++d,d===a&&r(c)},E=>o(E))}})}static doWhile(e,t){return new M((r,o)=>{const a=()=>{e()===!0?t().next(()=>{a()},o):r()};a()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pn="SimpleDb";class yh{static open(e,t,r,o){try{return new yh(t,e.transaction(o,r))}catch(a){throw new wl(t,a)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new lr,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new wl(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const o=vp(r.target.error);this.S.reject(new wl(e,o))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(Y(pn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}v(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new aA(t)}}class Pi{static delete(e){return Y(pn,"Removing database:",e),ps(Lv().indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!Kv())return!1;if(Pi.F())return!0;const e=_t(),t=Pi.M(e),r=0<t&&t<10,o=dE(e),a=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.O)==="YES"}static N(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.B=r,this.L=null,Pi.M(_t())===12.2&&Ht("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async k(e){return this.db||(Y(pn,"Opening database:",this.name),this.db=await new Promise((t,r)=>{const o=indexedDB.open(this.name,this.version);o.onsuccess=a=>{const c=a.target.result;t(c)},o.onblocked=()=>{r(new wl(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=a=>{const c=a.target.error;c.name==="VersionError"?r(new ie(q.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?r(new ie(q.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):r(new wl(e,c))},o.onupgradeneeded=a=>{Y(pn,'Database "'+this.name+'" requires upgrade from version:',a.oldVersion);const c=a.target.result;if(this.L!==null&&this.L!==a.oldVersion)throw new Error(`refusing to open IndexedDB database due to potential corruption of the IndexedDB database data; this corruption could be caused by clicking the "clear site data" button in a web browser; try reloading the web page to re-initialize the IndexedDB database: lastClosedDbVersion=${this.L}, event.oldVersion=${a.oldVersion}, event.newVersion=${a.newVersion}, db.version=${c.version}`);this.B.q(c,o.transaction,a.oldVersion,this.version).next(()=>{Y(pn,"Database upgrade to version "+this.version+" complete")})}}),this.db.addEventListener("close",t=>{const r=t.target;this.L=r.version},{passive:!0})),this.$&&(this.db.onversionchange=t=>this.$(t)),this.db}U(e){this.$=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,o){const a=t==="readonly";let c=0;for(;;){++c;try{this.db=await this.k(e);const d=yh.open(this.db,e,a?"readonly":"readwrite",r),p=o(d).next(y=>(d.v(),y)).catch(y=>(d.abort(y),M.reject(y))).toPromise();return p.catch(()=>{}),await d.D,p}catch(d){const p=d,y=p.name!=="FirebaseError"&&c<3;if(Y(pn,"Transaction failed with error:",p.message,"Retrying:",y),this.close(),!y)return Promise.reject(p)}}}close(){this.db&&this.db.close(),this.db=void 0}}function dE(i){const e=i.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class oA{constructor(e){this.K=e,this.W=!1,this.G=null}get isDone(){return this.W}get j(){return this.G}set cursor(e){this.K=e}done(){this.W=!0}H(e){this.G=e}delete(){return ps(this.K.delete())}}class wl extends ie{constructor(e,t){super(q.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ni(i){return i.name==="IndexedDbTransactionError"}class aA{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(Y(pn,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(Y(pn,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ps(r)}add(e){return Y(pn,"ADD",this.store.name,e,e),ps(this.store.add(e))}get(e){return ps(this.store.get(e)).next(t=>(t===void 0&&(t=null),Y(pn,"GET",this.store.name,e,t),t))}delete(e){return Y(pn,"DELETE",this.store.name,e),ps(this.store.delete(e))}count(){return Y(pn,"COUNT",this.store.name),ps(this.store.count())}J(e,t){const r=this.options(e,t),o=r.index?this.store.index(r.index):this.store;if(typeof o.getAll=="function"){const a=o.getAll(r.range);return new M((c,d)=>{a.onerror=p=>{d(p.target.error)},a.onsuccess=p=>{c(p.target.result)}})}{const a=this.cursor(r),c=[];return this.Y(a,(d,p)=>{c.push(p)}).next(()=>c)}}Z(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new M((o,a)=>{r.onerror=c=>{a(c.target.error)},r.onsuccess=c=>{o(c.target.result)}})}X(e,t){Y(pn,"DELETE ALL",this.store.name);const r=this.options(e,t);r.ee=!1;const o=this.cursor(r);return this.Y(o,(a,c,d)=>d.delete())}te(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.Y(o,t)}ne(e){const t=this.cursor({});return new M((r,o)=>{t.onerror=a=>{const c=vp(a.target.error);o(c)},t.onsuccess=a=>{const c=a.target.result;c?e(c.primaryKey,c.value).next(d=>{d?c.continue():r()}):r()}})}Y(e,t){const r=[];return new M((o,a)=>{e.onerror=c=>{a(c.target.error)},e.onsuccess=c=>{const d=c.target.result;if(!d)return void o();const p=new oA(d),y=t(d.primaryKey,d.value,p);if(y instanceof M){const E=y.catch(w=>(p.done(),M.reject(w)));r.push(E)}p.isDone?o():p.j===null?d.continue():d.continue(p.j)}}).next(()=>M.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.ee?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ps(i){return new M((e,t)=>{i.onsuccess=r=>{const o=r.target.result;e(o)},i.onerror=r=>{const o=vp(r.target.error);t(o)}})}let e_=!1;function vp(i){const e=Pi.M(_t());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const r=new ie("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return e_||(e_=!0,setTimeout(()=>{throw r},0)),r}}return i}const Tl="IndexBackfiller";class lA{constructor(e,t){this.asyncQueue=e,this.re=t,this.task=null}start(){this.ie(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ie(e){Y(Tl,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const t=await this.re.se();Y(Tl,`Documents written: ${t}`)}catch(t){Ni(t)?Y(Tl,"Ignoring IndexedDB error during index backfill: ",t):await bs(t)}await this.ie(6e4)})}}class uA{constructor(e,t){this.localStore=e,this.persistence=t}async se(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.oe(t,e))}oe(e,t){const r=new Set;let o=t,a=!0;return M.doWhile(()=>a===!0&&o>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(c=>{if(c!==null&&!r.has(c))return Y(Tl,`Processing collection: ${c}`),this._e(e,c,o).next(d=>{o-=d,r.add(c)});a=!1})).next(()=>t-o)}_e(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(o=>this.localStore.localDocuments.getNextDocuments(e,t,o,r).next(a=>{const c=a.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next(()=>this.ae(o,a)).next(d=>(Y(Tl,`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(e,t,d))).next(()=>c.size)}))}ae(e,t){let r=e;return t.changes.forEach((o,a)=>{const c=uE(a);_p(c,r)>0&&(r=c)}),new gn(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>t.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}Pn.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vs=-1;function _h(i){return i==null}function Ol(i){return i===0&&1/i==-1/0}function cA(i){return typeof i=="number"&&Number.isInteger(i)&&!Ol(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gc="";function zt(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=t_(e)),e=hA(i.get(t),e);return t_(e)}function hA(i,e){let t=e;const r=i.length;for(let o=0;o<r;o++){const a=i.charAt(o);switch(a){case"\0":t+="";break;case Gc:t+="";break;default:t+=a}}return t}function t_(i){return i+Gc+""}function or(i){const e=i.length;if(he(e>=2,64408,{path:i}),e===2)return he(i.charAt(0)===Gc&&i.charAt(1)==="",56145,{path:i}),Be.emptyPath();const t=e-2,r=[];let o="";for(let a=0;a<e;){const c=i.indexOf(Gc,a);switch((c<0||c>t)&&le(50515,{path:i}),i.charAt(c+1)){case"":const d=i.substring(a,c);let p;o.length===0?p=d:(o+=d,p=o,o=""),r.push(p);break;case"":o+=i.substring(a,c),o+="\0";break;case"":o+=i.substring(a,c+1);break;default:le(61167,{path:i})}a=c+2}return new Be(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fs="remoteDocuments",Wl="owner",xo="owner",Ml="mutationQueues",dA="userId",qn="mutations",n_="batchId",_s="userMutationsIndex",r_=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xc(i,e){return[i,zt(e)]}function fE(i,e,t){return[i,zt(e),t]}const fA={},Wo="documentMutations",Wc="remoteDocumentsV14",pA=["prefixPath","collectionGroup","readTime","documentId"],Dc="documentKeyIndex",mA=["prefixPath","collectionGroup","documentId"],pE="collectionGroupIndex",gA=["collectionGroup","readTime","prefixPath","documentId"],Ll="remoteDocumentGlobal",jf="remoteDocumentGlobalKey",Qo="targets",mE="queryTargetsIndex",yA=["canonicalId","targetId"],Yo="targetDocuments",_A=["targetId","path"],Ep="documentTargetsIndex",vA=["path","targetId"],Qc="targetGlobalKey",Es="targetGlobal",Fl="collectionParents",EA=["collectionId","parent"],Xo="clientMetadata",IA="clientId",vh="bundles",wA="bundleId",Eh="namedQueries",TA="name",Ip="indexConfiguration",SA="indexId",$f="collectionGroupIndex",AA="collectionGroup",Sl="indexState",RA=["indexId","uid"],gE="sequenceNumberIndex",PA=["uid","sequenceNumber"],Al="indexEntries",CA=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],yE="documentKeyIndex",kA=["indexId","uid","orderedDocumentKey"],Ih="documentOverlays",xA=["userId","collectionPath","documentId"],qf="collectionPathOverlayIndex",DA=["userId","collectionPath","largestBatchId"],_E="collectionGroupOverlayIndex",VA=["userId","collectionGroup","largestBatchId"],wp="globals",NA="name",vE=[Ml,qn,Wo,fs,Qo,Wl,Es,Yo,Xo,Ll,Fl,vh,Eh],bA=[...vE,Ih],EE=[Ml,qn,Wo,Wc,Qo,Wl,Es,Yo,Xo,Ll,Fl,vh,Eh,Ih],IE=EE,Tp=[...IE,Ip,Sl,Al],OA=Tp,wE=[...Tp,wp],MA=wE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf extends hE{constructor(e,t){super(),this.he=e,this.currentSequenceNumber=t}}function vt(i,e){const t=Te(i);return Pi.N(t.he,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i_(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function bi(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function TE(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(e,t){this.comparator=e,this.root=t||Dt.EMPTY}insert(e,t){return new Ze(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Dt.BLACK,null,null))}remove(e){return new Ze(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Dt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ic(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ic(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ic(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ic(this.root,e,this.comparator,!0)}}class Ic{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&o&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Dt{constructor(e,t,r,o,a){this.key=e,this.value=t,this.color=r??Dt.RED,this.left=o??Dt.EMPTY,this.right=a??Dt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,a){return new Dt(e??this.key,t??this.value,r??this.color,o??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const a=r(e,o.key);return o=a<0?o.copy(null,null,null,o.left.insert(e,t,r),null):a===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Dt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Dt.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Dt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Dt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw le(43730,{key:this.key,value:this.value});if(this.right.isRed())throw le(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw le(27949);return e+(this.isRed()?0:1)}}Dt.EMPTY=null,Dt.RED=!0,Dt.BLACK=!1;Dt.EMPTY=new class{constructor(){this.size=0}get key(){throw le(57766)}get value(){throw le(16141)}get color(){throw le(16727)}get left(){throw le(29726)}get right(){throw le(36894)}copy(e,t,r,o,a){return this}insert(e,t,r){return new Dt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e){this.comparator=e,this.data=new Ze(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new s_(this.data.getIterator())}getIteratorFrom(e){return new s_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof ze)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=r.getNext().key;if(this.comparator(o,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new ze(this.comparator);return t.data=e,t}}class s_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Do(i){return i.hasNext()?i.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this.fields=e,e.sort(nt.comparator)}static empty(){return new rn([])}unionWith(e){let t=new ze(nt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new rn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Go(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(o){try{return atob(o)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new SE("Invalid base64 string: "+a):a}}(e);return new dt(t)}static fromUint8Array(e){const t=function(o){let a="";for(let c=0;c<o.length;++c)a+=String.fromCharCode(o[c]);return a}(e);return new dt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ie(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}dt.EMPTY_BYTE_STRING=new dt("");const LA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function br(i){if(he(!!i,39018),typeof i=="string"){let e=0;const t=LA.exec(i);if(he(!!t,46558,{timestamp:i}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(i);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Je(i.seconds),nanos:Je(i.nanos)}}function Je(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function Or(i){return typeof i=="string"?dt.fromBase64String(i):dt.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AE="server_timestamp",RE="__type__",PE="__previous_value__",CE="__local_write_time__";function Sp(i){var e,t;return((t=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[RE])===null||t===void 0?void 0:t.stringValue)===AE}function wh(i){const e=i.mapValue.fields[PE];return Sp(e)?wh(e):e}function Ul(i){const e=br(i.mapValue.fields[CE].timestampValue);return new rt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(e,t,r,o,a,c,d,p,y,E){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=y,this.isUsingEmulator=E}}const Yc="(default)";class Cs{constructor(e,t){this.projectId=e,this.database=t||Yc}static empty(){return new Cs("","")}get isDefaultDatabase(){return this.database===Yc}isEqual(e){return e instanceof Cs&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ap="__type__",kE="__max__",wi={mapValue:{fields:{__type__:{stringValue:kE}}}},Rp="__vector__",Jo="value",Vc={nullValue:"NULL_VALUE"};function ki(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Sp(i)?4:xE(i)?9007199254740991:Th(i)?10:11:le(28295,{value:i})}function hr(i,e){if(i===e)return!0;const t=ki(i);if(t!==ki(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Ul(i).isEqual(Ul(e));case 3:return function(o,a){if(typeof o.timestampValue=="string"&&typeof a.timestampValue=="string"&&o.timestampValue.length===a.timestampValue.length)return o.timestampValue===a.timestampValue;const c=br(o.timestampValue),d=br(a.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return function(o,a){return Or(o.bytesValue).isEqual(Or(a.bytesValue))}(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return function(o,a){return Je(o.geoPointValue.latitude)===Je(a.geoPointValue.latitude)&&Je(o.geoPointValue.longitude)===Je(a.geoPointValue.longitude)}(i,e);case 2:return function(o,a){if("integerValue"in o&&"integerValue"in a)return Je(o.integerValue)===Je(a.integerValue);if("doubleValue"in o&&"doubleValue"in a){const c=Je(o.doubleValue),d=Je(a.doubleValue);return c===d?Ol(c)===Ol(d):isNaN(c)&&isNaN(d)}return!1}(i,e);case 9:return Go(i.arrayValue.values||[],e.arrayValue.values||[],hr);case 10:case 11:return function(o,a){const c=o.mapValue.fields||{},d=a.mapValue.fields||{};if(i_(c)!==i_(d))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(d[p]===void 0||!hr(c[p],d[p])))return!1;return!0}(i,e);default:return le(52216,{left:i})}}function Bl(i,e){return(i.values||[]).find(t=>hr(t,e))!==void 0}function xi(i,e){if(i===e)return 0;const t=ki(i),r=ki(e);if(t!==r)return Ie(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ie(i.booleanValue,e.booleanValue);case 2:return function(a,c){const d=Je(a.integerValue||a.doubleValue),p=Je(c.integerValue||c.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1}(i,e);case 3:return o_(i.timestampValue,e.timestampValue);case 4:return o_(Ul(i),Ul(e));case 5:return Bf(i.stringValue,e.stringValue);case 6:return function(a,c){const d=Or(a),p=Or(c);return d.compareTo(p)}(i.bytesValue,e.bytesValue);case 7:return function(a,c){const d=a.split("/"),p=c.split("/");for(let y=0;y<d.length&&y<p.length;y++){const E=Ie(d[y],p[y]);if(E!==0)return E}return Ie(d.length,p.length)}(i.referenceValue,e.referenceValue);case 8:return function(a,c){const d=Ie(Je(a.latitude),Je(c.latitude));return d!==0?d:Ie(Je(a.longitude),Je(c.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return a_(i.arrayValue,e.arrayValue);case 10:return function(a,c){var d,p,y,E;const w=a.fields||{},T=c.fields||{},U=(d=w[Jo])===null||d===void 0?void 0:d.arrayValue,$=(p=T[Jo])===null||p===void 0?void 0:p.arrayValue,H=Ie(((y=U==null?void 0:U.values)===null||y===void 0?void 0:y.length)||0,((E=$==null?void 0:$.values)===null||E===void 0?void 0:E.length)||0);return H!==0?H:a_(U,$)}(i.mapValue,e.mapValue);case 11:return function(a,c){if(a===wi.mapValue&&c===wi.mapValue)return 0;if(a===wi.mapValue)return 1;if(c===wi.mapValue)return-1;const d=a.fields||{},p=Object.keys(d),y=c.fields||{},E=Object.keys(y);p.sort(),E.sort();for(let w=0;w<p.length&&w<E.length;++w){const T=Bf(p[w],E[w]);if(T!==0)return T;const U=xi(d[p[w]],y[E[w]]);if(U!==0)return U}return Ie(p.length,E.length)}(i.mapValue,e.mapValue);default:throw le(23264,{Pe:t})}}function o_(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Ie(i,e);const t=br(i),r=br(e),o=Ie(t.seconds,r.seconds);return o!==0?o:Ie(t.nanos,r.nanos)}function a_(i,e){const t=i.values||[],r=e.values||[];for(let o=0;o<t.length&&o<r.length;++o){const a=xi(t[o],r[o]);if(a)return a}return Ie(t.length,r.length)}function Zo(i){return Hf(i)}function Hf(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(t){const r=br(t);return`time(${r.seconds},${r.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?function(t){return Or(t).toBase64()}(i.bytesValue):"referenceValue"in i?function(t){return ee.fromName(t).toString()}(i.referenceValue):"geoPointValue"in i?function(t){return`geo(${t.latitude},${t.longitude})`}(i.geoPointValue):"arrayValue"in i?function(t){let r="[",o=!0;for(const a of t.values||[])o?o=!1:r+=",",r+=Hf(a);return r+"]"}(i.arrayValue):"mapValue"in i?function(t){const r=Object.keys(t.fields||{}).sort();let o="{",a=!0;for(const c of r)a?a=!1:o+=",",o+=`${c}:${Hf(t.fields[c])}`;return o+"}"}(i.mapValue):le(61005,{value:i})}function Nc(i){switch(ki(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=wh(i);return e?16+Nc(e):16;case 5:return 2*i.stringValue.length;case 6:return Or(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((o,a)=>o+Nc(a),0)}(i.arrayValue);case 10:case 11:return function(r){let o=0;return bi(r.fields,(a,c)=>{o+=a.length+Nc(c)}),o}(i.mapValue);default:throw le(13486,{value:i})}}function Pp(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Gf(i){return!!i&&"integerValue"in i}function zl(i){return!!i&&"arrayValue"in i}function l_(i){return!!i&&"nullValue"in i}function u_(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function bc(i){return!!i&&"mapValue"in i}function Th(i){var e,t;return((t=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[Ap])===null||t===void 0?void 0:t.stringValue)===Rp}function Rl(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return bi(i.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Rl(r)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Rl(i.arrayValue.values[t]);return e}return Object.assign({},i)}function xE(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===kE}const DE={mapValue:{fields:{[Ap]:{stringValue:Rp},[Jo]:{arrayValue:{}}}}};function UA(i){return"nullValue"in i?Vc:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?Pp(Cs.empty(),ee.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?Th(i)?DE:{mapValue:{}}:le(35942,{value:i})}function BA(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?Pp(Cs.empty(),ee.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?DE:"mapValue"in i?Th(i)?{mapValue:{}}:wi:le(61959,{value:i})}function c_(i,e){const t=xi(i.value,e.value);return t!==0?t:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function h_(i,e){const t=xi(i.value,e.value);return t!==0?t:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.value=e}static empty(){return new Bt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!bc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Rl(t)}setAll(e){let t=nt.emptyPath(),r={},o=[];e.forEach((c,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,r,o),r={},o=[],t=d.popLast()}c?r[d.lastSegment()]=Rl(c):o.push(d.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,o)}delete(e){const t=this.field(e.popLast());bc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return hr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];bc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){bi(t,(o,a)=>e[o]=a);for(const o of r)delete e[o]}clone(){return new Bt(Rl(this.value))}}function VE(i){const e=[];return bi(i.fields,(t,r)=>{const o=new nt([t]);if(bc(r)){const a=VE(r.mapValue).fields;if(a.length===0)e.push(o);else for(const c of a)e.push(o.child(c))}else e.push(o)}),new rn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e,t,r,o,a,c,d){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.createTime=a,this.data=c,this.documentState=d}static newInvalidDocument(e){return new st(e,0,fe.min(),fe.min(),fe.min(),Bt.empty(),0)}static newFoundDocument(e,t,r,o){return new st(e,1,t,fe.min(),r,o,0)}static newNoDocument(e,t){return new st(e,2,t,fe.min(),fe.min(),Bt.empty(),0)}static newUnknownDocument(e,t){return new st(e,3,t,fe.min(),fe.min(),Bt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(fe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Bt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Bt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=fe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof st&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new st(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(e,t){this.position=e,this.inclusive=t}}function d_(i,e,t){let r=0;for(let o=0;o<i.position.length;o++){const a=e[o],c=i.position[o];if(a.field.isKeyField()?r=ee.comparator(ee.fromName(c.referenceValue),t.key):r=xi(c,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function f_(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!hr(i.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(e,t="asc"){this.field=e,this.dir=t}}function zA(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{}class De extends NE{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new jA(e,t,r):t==="array-contains"?new KA(e,r):t==="in"?new UE(e,r):t==="not-in"?new HA(e,r):t==="array-contains-any"?new GA(e,r):new De(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new $A(e,r):new qA(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(xi(t,this.value)):t!==null&&ki(this.value)===ki(t)&&this.matchesComparison(xi(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return le(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class $e extends NE{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new $e(e,t)}matches(e){return ta(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function ta(i){return i.op==="and"}function Wf(i){return i.op==="or"}function Cp(i){return bE(i)&&ta(i)}function bE(i){for(const e of i.filters)if(e instanceof $e)return!1;return!0}function Qf(i){if(i instanceof De)return i.field.canonicalString()+i.op.toString()+Zo(i.value);if(Cp(i))return i.filters.map(e=>Qf(e)).join(",");{const e=i.filters.map(t=>Qf(t)).join(",");return`${i.op}(${e})`}}function OE(i,e){return i instanceof De?function(r,o){return o instanceof De&&r.op===o.op&&r.field.isEqual(o.field)&&hr(r.value,o.value)}(i,e):i instanceof $e?function(r,o){return o instanceof $e&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce((a,c,d)=>a&&OE(c,o.filters[d]),!0):!1}(i,e):void le(19439)}function ME(i,e){const t=i.filters.concat(e);return $e.create(t,i.op)}function LE(i){return i instanceof De?function(t){return`${t.field.canonicalString()} ${t.op} ${Zo(t.value)}`}(i):i instanceof $e?function(t){return t.op.toString()+" {"+t.getFilters().map(LE).join(" ,")+"}"}(i):"Filter"}class jA extends De{constructor(e,t,r){super(e,t,r),this.key=ee.fromName(r.referenceValue)}matches(e){const t=ee.comparator(e.key,this.key);return this.matchesComparison(t)}}class $A extends De{constructor(e,t){super(e,"in",t),this.keys=FE("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class qA extends De{constructor(e,t){super(e,"not-in",t),this.keys=FE("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function FE(i,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>ee.fromName(r.referenceValue))}class KA extends De{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return zl(t)&&Bl(t.arrayValue,this.value)}}class UE extends De{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Bl(this.value.arrayValue,t)}}class HA extends De{constructor(e,t){super(e,"not-in",t)}matches(e){if(Bl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Bl(this.value.arrayValue,t)}}class GA extends De{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!zl(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Bl(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{constructor(e,t=null,r=[],o=[],a=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=a,this.startAt=c,this.endAt=d,this.Ie=null}}function Yf(i,e=null,t=[],r=[],o=null,a=null,c=null){return new WA(i,e,t,r,o,a,c)}function ks(i){const e=Te(i);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Qf(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),_h(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Zo(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Zo(r)).join(",")),e.Ie=t}return e.Ie}function Ql(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!zA(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!OE(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!f_(i.startAt,e.startAt)&&f_(i.endAt,e.endAt)}function Jc(i){return ee.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}function Zc(i,e){return i.filters.filter(t=>t instanceof De&&t.field.isEqual(e))}function p_(i,e,t){let r=Vc,o=!0;for(const a of Zc(i,e)){let c=Vc,d=!0;switch(a.op){case"<":case"<=":c=UA(a.value);break;case"==":case"in":case">=":c=a.value;break;case">":c=a.value,d=!1;break;case"!=":case"not-in":c=Vc}c_({value:r,inclusive:o},{value:c,inclusive:d})<0&&(r=c,o=d)}if(t!==null){for(let a=0;a<i.orderBy.length;++a)if(i.orderBy[a].field.isEqual(e)){const c=t.position[a];c_({value:r,inclusive:o},{value:c,inclusive:t.inclusive})<0&&(r=c,o=t.inclusive);break}}return{value:r,inclusive:o}}function m_(i,e,t){let r=wi,o=!0;for(const a of Zc(i,e)){let c=wi,d=!0;switch(a.op){case">=":case">":c=BA(a.value),d=!1;break;case"==":case"in":case"<=":c=a.value;break;case"<":c=a.value,d=!1;break;case"!=":case"not-in":c=wi}h_({value:r,inclusive:o},{value:c,inclusive:d})>0&&(r=c,o=d)}if(t!==null){for(let a=0;a<i.orderBy.length;++a)if(i.orderBy[a].field.isEqual(e)){const c=t.position[a];h_({value:r,inclusive:o},{value:c,inclusive:t.inclusive})>0&&(r=c,o=t.inclusive);break}}return{value:r,inclusive:o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(e,t=null,r=[],o=[],a=null,c="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=a,this.limitType=c,this.startAt=d,this.endAt=p,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function QA(i,e,t,r,o,a,c,d){return new Sh(i,e,t,r,o,a,c,d)}function Ah(i){return new Sh(i)}function g_(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function YA(i){return i.collectionGroup!==null}function Pl(i){const e=Te(i);if(e.Ee===null){e.Ee=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ee.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new ze(nt.comparator);return c.filters.forEach(p=>{p.getFlattenedFilters().forEach(y=>{y.isInequality()&&(d=d.add(y.field))})}),d})(e).forEach(a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ee.push(new Xc(a,r))}),t.has(nt.keyField().canonicalString())||e.Ee.push(new Xc(nt.keyField(),r))}return e.Ee}function Cn(i){const e=Te(i);return e.de||(e.de=XA(e,Pl(i))),e.de}function XA(i,e){if(i.limitType==="F")return Yf(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map(o=>{const a=o.dir==="desc"?"asc":"desc";return new Xc(o.field,a)});const t=i.endAt?new ea(i.endAt.position,i.endAt.inclusive):null,r=i.startAt?new ea(i.startAt.position,i.startAt.inclusive):null;return Yf(i.path,i.collectionGroup,e,i.filters,i.limit,t,r)}}function Xf(i,e,t){return new Sh(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function Rh(i,e){return Ql(Cn(i),Cn(e))&&i.limitType===e.limitType}function BE(i){return`${ks(Cn(i))}|lt:${i.limitType}`}function Lo(i){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(o=>LE(o)).join(", ")}]`),_h(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(o=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(o)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(o=>Zo(o)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(o=>Zo(o)).join(",")),`Target(${r})`}(Cn(i))}; limitType=${i.limitType})`}function Yl(i,e){return e.isFoundDocument()&&function(r,o){const a=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):ee.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(i,e)&&function(r,o){for(const a of Pl(r))if(!a.field.isKeyField()&&o.data.field(a.field)===null)return!1;return!0}(i,e)&&function(r,o){for(const a of r.filters)if(!a.matches(o))return!1;return!0}(i,e)&&function(r,o){return!(r.startAt&&!function(c,d,p){const y=d_(c,d,p);return c.inclusive?y<=0:y<0}(r.startAt,Pl(r),o)||r.endAt&&!function(c,d,p){const y=d_(c,d,p);return c.inclusive?y>=0:y>0}(r.endAt,Pl(r),o))}(i,e)}function JA(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function zE(i){return(e,t)=>{let r=!1;for(const o of Pl(i)){const a=ZA(o,e,t);if(a!==0)return a;r=r||o.field.isKeyField()}return 0}}function ZA(i,e,t){const r=i.field.isKeyField()?ee.comparator(e.key,t.key):function(a,c,d){const p=c.data.field(a),y=d.data.field(a);return p!==null&&y!==null?xi(p,y):le(42886)}(i.field,e,t);switch(i.dir){case"asc":return r;case"desc":return-1*r;default:return le(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[o,a]of r)if(this.equalsFn(o,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<o.length;a++)if(this.equalsFn(o[a][0],e))return void(o[a]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){bi(this.inner,(t,r)=>{for(const[o,a]of r)e(o,a)})}isEmpty(){return TE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e1=new Ze(ee.comparator);function mn(){return e1}const jE=new Ze(ee.comparator);function yl(...i){let e=jE;for(const t of i)e=e.insert(t.key,t);return e}function $E(i){let e=jE;return i.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ar(){return Cl()}function qE(){return Cl()}function Cl(){return new Br(i=>i.toString(),(i,e)=>i.isEqual(e))}const t1=new Ze(ee.comparator),n1=new ze(ee.comparator);function Re(...i){let e=n1;for(const t of i)e=e.add(t);return e}const r1=new ze(Ie);function i1(){return r1}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kp(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ol(e)?"-0":e}}function KE(i){return{integerValue:""+i}}function s1(i,e){return cA(e)?KE(e):kp(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(){this._=void 0}}function o1(i,e,t){return i instanceof na?function(o,a){const c={fields:{[RE]:{stringValue:AE},[CE]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return a&&Sp(a)&&(a=wh(a)),a&&(c.fields[PE]=a),{mapValue:c}}(t,e):i instanceof ra?GE(i,e):i instanceof ia?WE(i,e):function(o,a){const c=HE(o,a),d=y_(c)+y_(o.Re);return Gf(c)&&Gf(o.Re)?KE(d):kp(o.serializer,d)}(i,e)}function a1(i,e,t){return i instanceof ra?GE(i,e):i instanceof ia?WE(i,e):t}function HE(i,e){return i instanceof jl?function(r){return Gf(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class na extends Ph{}class ra extends Ph{constructor(e){super(),this.elements=e}}function GE(i,e){const t=QE(e);for(const r of i.elements)t.some(o=>hr(o,r))||t.push(r);return{arrayValue:{values:t}}}class ia extends Ph{constructor(e){super(),this.elements=e}}function WE(i,e){let t=QE(e);for(const r of i.elements)t=t.filter(o=>!hr(o,r));return{arrayValue:{values:t}}}class jl extends Ph{constructor(e,t){super(),this.serializer=e,this.Re=t}}function y_(i){return Je(i.integerValue||i.doubleValue)}function QE(i){return zl(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(e,t){this.field=e,this.transform=t}}function l1(i,e){return i.field.isEqual(e.field)&&function(r,o){return r instanceof ra&&o instanceof ra||r instanceof ia&&o instanceof ia?Go(r.elements,o.elements,hr):r instanceof jl&&o instanceof jl?hr(r.Re,o.Re):r instanceof na&&o instanceof na}(i.transform,e.transform)}class u1{constructor(e,t){this.version=e,this.transformResults=t}}class Gt{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Gt}static exists(e){return new Gt(void 0,e)}static updateTime(e){return new Gt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Oc(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class Ch{}function XE(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new xp(i.key,Gt.none()):new ha(i.key,i.data,Gt.none());{const t=i.data,r=Bt.empty();let o=new ze(nt.comparator);for(let a of e.fields)if(!o.has(a)){let c=t.field(a);c===null&&a.length>1&&(a=a.popLast(),c=t.field(a)),c===null?r.delete(a):r.set(a,c),o=o.add(a)}return new zr(i.key,r,new rn(o.toArray()),Gt.none())}}function c1(i,e,t){i instanceof ha?function(o,a,c){const d=o.value.clone(),p=v_(o.fieldTransforms,a,c.transformResults);d.setAll(p),a.convertToFoundDocument(c.version,d).setHasCommittedMutations()}(i,e,t):i instanceof zr?function(o,a,c){if(!Oc(o.precondition,a))return void a.convertToUnknownDocument(c.version);const d=v_(o.fieldTransforms,a,c.transformResults),p=a.data;p.setAll(JE(o)),p.setAll(d),a.convertToFoundDocument(c.version,p).setHasCommittedMutations()}(i,e,t):function(o,a,c){a.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,t)}function kl(i,e,t,r){return i instanceof ha?function(a,c,d,p){if(!Oc(a.precondition,c))return d;const y=a.value.clone(),E=E_(a.fieldTransforms,p,c);return y.setAll(E),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),null}(i,e,t,r):i instanceof zr?function(a,c,d,p){if(!Oc(a.precondition,c))return d;const y=E_(a.fieldTransforms,p,c),E=c.data;return E.setAll(JE(a)),E.setAll(y),c.convertToFoundDocument(c.version,E).setHasLocalMutations(),d===null?null:d.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(w=>w.field))}(i,e,t,r):function(a,c,d){return Oc(a.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d}(i,e,t)}function h1(i,e){let t=null;for(const r of i.fieldTransforms){const o=e.data.field(r.field),a=HE(r.transform,o||null);a!=null&&(t===null&&(t=Bt.empty()),t.set(r.field,a))}return t||null}function __(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&Go(r,o,(a,c)=>l1(a,c))}(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class ha extends Ch{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class zr extends Ch{constructor(e,t,r,o,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function JE(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=i.data.field(t);e.set(t,r)}}),e}function v_(i,e,t){const r=new Map;he(i.length===t.length,32656,{Ve:t.length,me:i.length});for(let o=0;o<t.length;o++){const a=i[o],c=a.transform,d=e.data.field(a.field);r.set(a.field,a1(c,d,t[o]))}return r}function E_(i,e,t){const r=new Map;for(const o of i){const a=o.transform,c=t.data.field(o.field);r.set(o.field,o1(a,c,e))}return r}class xp extends Ch{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ZE extends Ch{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const a=this.mutations[o];a.key.isEqual(e.key)&&c1(a,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=kl(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=kl(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=qE();return this.mutations.forEach(o=>{const a=e.get(o.key),c=a.overlayedDocument;let d=this.applyToLocalView(c,a.mutatedFields);d=t.has(o.key)?null:d;const p=XE(c,d);p!==null&&r.set(o.key,p),c.isValidDocument()||c.convertToNoDocument(fe.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Re())}isEqual(e){return this.batchId===e.batchId&&Go(this.mutations,e.mutations,(t,r)=>__(t,r))&&Go(this.baseMutations,e.baseMutations,(t,r)=>__(t,r))}}class Vp{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){he(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let o=function(){return t1}();const a=e.mutations;for(let c=0;c<a.length;c++)o=o.insert(a[c].key,r[c].version);return new Vp(e,t,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d1{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ht,be;function f1(i){switch(i){case q.OK:return le(64938);case q.CANCELLED:case q.UNKNOWN:case q.DEADLINE_EXCEEDED:case q.RESOURCE_EXHAUSTED:case q.INTERNAL:case q.UNAVAILABLE:case q.UNAUTHENTICATED:return!1;case q.INVALID_ARGUMENT:case q.NOT_FOUND:case q.ALREADY_EXISTS:case q.PERMISSION_DENIED:case q.FAILED_PRECONDITION:case q.ABORTED:case q.OUT_OF_RANGE:case q.UNIMPLEMENTED:case q.DATA_LOSS:return!0;default:return le(15467,{code:i})}}function eI(i){if(i===void 0)return Ht("GRPC error has no .code"),q.UNKNOWN;switch(i){case ht.OK:return q.OK;case ht.CANCELLED:return q.CANCELLED;case ht.UNKNOWN:return q.UNKNOWN;case ht.DEADLINE_EXCEEDED:return q.DEADLINE_EXCEEDED;case ht.RESOURCE_EXHAUSTED:return q.RESOURCE_EXHAUSTED;case ht.INTERNAL:return q.INTERNAL;case ht.UNAVAILABLE:return q.UNAVAILABLE;case ht.UNAUTHENTICATED:return q.UNAUTHENTICATED;case ht.INVALID_ARGUMENT:return q.INVALID_ARGUMENT;case ht.NOT_FOUND:return q.NOT_FOUND;case ht.ALREADY_EXISTS:return q.ALREADY_EXISTS;case ht.PERMISSION_DENIED:return q.PERMISSION_DENIED;case ht.FAILED_PRECONDITION:return q.FAILED_PRECONDITION;case ht.ABORTED:return q.ABORTED;case ht.OUT_OF_RANGE:return q.OUT_OF_RANGE;case ht.UNIMPLEMENTED:return q.UNIMPLEMENTED;case ht.DATA_LOSS:return q.DATA_LOSS;default:return le(39323,{code:i})}}(be=ht||(ht={}))[be.OK=0]="OK",be[be.CANCELLED=1]="CANCELLED",be[be.UNKNOWN=2]="UNKNOWN",be[be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",be[be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",be[be.NOT_FOUND=5]="NOT_FOUND",be[be.ALREADY_EXISTS=6]="ALREADY_EXISTS",be[be.PERMISSION_DENIED=7]="PERMISSION_DENIED",be[be.UNAUTHENTICATED=16]="UNAUTHENTICATED",be[be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",be[be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",be[be.ABORTED=10]="ABORTED",be[be.OUT_OF_RANGE=11]="OUT_OF_RANGE",be[be.UNIMPLEMENTED=12]="UNIMPLEMENTED",be[be.INTERNAL=13]="INTERNAL",be[be.UNAVAILABLE=14]="UNAVAILABLE",be[be.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p1=new Ri([4294967295,4294967295],0);function I_(i){const e=oE().encode(i),t=new Jv;return t.update(e),new Uint8Array(t.digest())}function w_(i){const e=new DataView(i.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Ri([t,r],0),new Ri([o,a],0)]}class bp{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new _l(`Invalid padding: ${t}`);if(r<0)throw new _l(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new _l(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new _l(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=Ri.fromNumber(this.pe)}we(e,t,r){let o=e.add(t.multiply(Ri.fromNumber(r)));return o.compare(p1)===1&&(o=new Ri([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ye).toNumber()}Se(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const t=I_(e),[r,o]=w_(t);for(let a=0;a<this.hashCount;a++){const c=this.we(r,o,a);if(!this.Se(c))return!1}return!0}static create(e,t,r){const o=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),c=new bp(a,o,t);return r.forEach(d=>c.insert(d)),c}insert(e){if(this.pe===0)return;const t=I_(e),[r,o]=w_(t);for(let a=0;a<this.hashCount;a++){const c=this.we(r,o,a);this.be(c)}}be(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class _l extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(e,t,r,o,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const o=new Map;return o.set(e,Xl.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new kh(fe.min(),o,new Ze(Ie),mn(),Re())}}class Xl{constructor(e,t,r,o,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Xl(r,t,Re(),Re(),Re())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(e,t,r,o){this.De=e,this.removedTargetIds=t,this.key=r,this.ve=o}}class tI{constructor(e,t){this.targetId=e,this.Ce=t}}class nI{constructor(e,t,r=dt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class T_{constructor(){this.Fe=0,this.Me=S_(),this.xe=dt.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=Re(),t=Re(),r=Re();return this.Me.forEach((o,a)=>{switch(a){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:le(38017,{changeType:a})}}),new Xl(this.xe,this.Oe,e,t,r)}Qe(){this.Ne=!1,this.Me=S_()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,he(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class m1{constructor(e){this.ze=e,this.je=new Map,this.He=mn(),this.Je=wc(),this.Ye=wc(),this.Ze=new Ze(Ie)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{const r=this.rt(t);switch(e.state){case 0:this.it(t)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(t);break;case 3:this.it(t)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),r.ke(e.resumeToken));break;default:le(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((r,o)=>{this.it(o)&&t(o)})}ot(e){const t=e.targetId,r=e.Ce.count,o=this._t(t);if(o){const a=o.target;if(Jc(a))if(r===0){const c=new ee(a.path);this.tt(t,c,st.newNoDocument(c,fe.min()))}else he(r===1,20013,{expectedCount:r});else{const c=this.ut(t);if(c!==r){const d=this.ct(e),p=d?this.lt(d,e,c):1;if(p!==0){this.st(t);const y=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,y)}}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:a=0}=t;let c,d;try{c=Or(r).toUint8Array()}catch(p){if(p instanceof SE)return Ps("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new bp(c,o,a)}catch(p){return Ps(p instanceof _l?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.pe===0?null:d}lt(e,t,r){return t.Ce.count===r-this.Tt(e,t.targetId)?0:2}Tt(e,t){const r=this.ze.getRemoteKeysForTarget(t);let o=0;return r.forEach(a=>{const c=this.ze.Pt(),d=`projects/${c.projectId}/databases/${c.database}/documents/${a.path.canonicalString()}`;e.mightContain(d)||(this.tt(t,a,null),o++)}),o}It(e){const t=new Map;this.je.forEach((a,c)=>{const d=this._t(c);if(d){if(a.current&&Jc(d.target)){const p=new ee(d.target.path);this.Et(p).has(c)||this.dt(c,p)||this.tt(c,p,st.newNoDocument(p,e))}a.Le&&(t.set(c,a.qe()),a.Qe())}});let r=Re();this.Ye.forEach((a,c)=>{let d=!0;c.forEachWhile(p=>{const y=this._t(p);return!y||y.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(r=r.add(a))}),this.He.forEach((a,c)=>c.setReadTime(e));const o=new kh(e,t,this.Ze,this.He,r);return this.He=mn(),this.Je=wc(),this.Ye=wc(),this.Ze=new Ze(Ie),o}et(e,t){if(!this.it(e))return;const r=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,r),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,r){if(!this.it(e))return;const o=this.rt(e);this.dt(e,t)?o.$e(t,1):o.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),r&&(this.He=this.He.insert(t,r))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new T_,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new ze(Ie),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new ze(Ie),this.Je=this.Je.insert(e,t)),t}it(e){const t=this._t(e)!==null;return t||Y("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new T_),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function wc(){return new Ze(ee.comparator)}function S_(){return new Ze(ee.comparator)}const g1={asc:"ASCENDING",desc:"DESCENDING"},y1={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},_1={and:"AND",or:"OR"};class v1{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Jf(i,e){return i.useProto3Json||_h(e)?e:{value:e}}function sa(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function rI(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function E1(i,e){return sa(i,e.toTimestamp())}function Wt(i){return he(!!i,49232),fe.fromTimestamp(function(t){const r=br(t);return new rt(r.seconds,r.nanos)}(i))}function Op(i,e){return Zf(i,e).canonicalString()}function Zf(i,e){const t=function(o){return new Be(["projects",o.projectId,"databases",o.database])}(i).child("documents");return e===void 0?t:t.child(e)}function iI(i){const e=Be.fromString(i);return he(fI(e),10190,{key:e.toString()}),e}function eh(i,e){return Op(i.databaseId,e.path)}function Is(i,e){const t=iI(e);if(t.get(1)!==i.databaseId.projectId)throw new ie(q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new ie(q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new ee(aI(t))}function sI(i,e){return Op(i.databaseId,e)}function oI(i){const e=iI(i);return e.length===4?Be.emptyPath():aI(e)}function ep(i){return new Be(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function aI(i){return he(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function A_(i,e,t){return{name:eh(i,e),fields:t.value.mapValue.fields}}function I1(i,e,t){const r=Is(i,e.name),o=Wt(e.updateTime),a=e.createTime?Wt(e.createTime):fe.min(),c=new Bt({mapValue:{fields:e.fields}}),d=st.newFoundDocument(r,o,a,c);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function w1(i,e){let t;if("targetChange"in e){e.targetChange;const r=function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:le(39313,{state:y})}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],a=function(y,E){return y.useProto3Json?(he(E===void 0||typeof E=="string",58123),dt.fromBase64String(E||"")):(he(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),dt.fromUint8Array(E||new Uint8Array))}(i,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&function(y){const E=y.code===void 0?q.UNKNOWN:eI(y.code);return new ie(E,y.message||"")}(c);t=new nI(r,o,a,d||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=Is(i,r.document.name),a=Wt(r.document.updateTime),c=r.document.createTime?Wt(r.document.createTime):fe.min(),d=new Bt({mapValue:{fields:r.document.fields}}),p=st.newFoundDocument(o,a,c,d),y=r.targetIds||[],E=r.removedTargetIds||[];t=new Mc(y,E,p.key,p)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=Is(i,r.document),a=r.readTime?Wt(r.readTime):fe.min(),c=st.newNoDocument(o,a),d=r.removedTargetIds||[];t=new Mc([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=Is(i,r.document),a=r.removedTargetIds||[];t=new Mc([],a,o,null)}else{if(!("filter"in e))return le(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:a}=r,c=new d1(o,a),d=r.targetId;t=new tI(d,c)}}return t}function th(i,e){let t;if(e instanceof ha)t={update:A_(i,e.key,e.value)};else if(e instanceof xp)t={delete:eh(i,e.key)};else if(e instanceof zr)t={update:A_(i,e.key,e.data),updateMask:C1(e.fieldMask)};else{if(!(e instanceof ZE))return le(16599,{ft:e.type});t={verify:eh(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(a,c){const d=c.transform;if(d instanceof na)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof ra)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof ia)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof jl)return{fieldPath:c.field.canonicalString(),increment:d.Re};throw le(20930,{transform:c.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(o,a){return a.updateTime!==void 0?{updateTime:E1(o,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:le(27497)}(i,e.precondition)),t}function tp(i,e){const t=e.currentDocument?function(a){return a.updateTime!==void 0?Gt.updateTime(Wt(a.updateTime)):a.exists!==void 0?Gt.exists(a.exists):Gt.none()}(e.currentDocument):Gt.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(c,d){let p=null;if("setToServerValue"in d)he(d.setToServerValue==="REQUEST_TIME",16630,{proto:d}),p=new na;else if("appendMissingElements"in d){const E=d.appendMissingElements.values||[];p=new ra(E)}else if("removeAllFromArray"in d){const E=d.removeAllFromArray.values||[];p=new ia(E)}else"increment"in d?p=new jl(c,d.increment):le(16584,{proto:d});const y=nt.fromServerFormat(d.fieldPath);return new YE(y,p)}(i,o)):[];if(e.update){e.update.name;const o=Is(i,e.update.name),a=new Bt({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=function(p){const y=p.fieldPaths||[];return new rn(y.map(E=>nt.fromServerFormat(E)))}(e.updateMask);return new zr(o,a,c,t,r)}return new ha(o,a,t,r)}if(e.delete){const o=Is(i,e.delete);return new xp(o,t)}if(e.verify){const o=Is(i,e.verify);return new ZE(o,t)}return le(1463,{proto:e})}function T1(i,e){return i&&i.length>0?(he(e!==void 0,14353),i.map(t=>function(o,a){let c=o.updateTime?Wt(o.updateTime):Wt(a);return c.isEqual(fe.min())&&(c=Wt(a)),new u1(c,o.transformResults||[])}(t,e))):[]}function lI(i,e){return{documents:[sI(i,e.path)]}}function uI(i,e){const t={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=sI(i,o);const a=function(y){if(y.length!==0)return dI($e.create(y,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const c=function(y){if(y.length!==0)return y.map(E=>function(T){return{field:Fo(T.field),direction:A1(T.dir)}}(E))}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=Jf(i,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=function(y){return{before:y.inclusive,values:y.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(y){return{before:!y.inclusive,values:y.position}}(e.endAt)),{gt:t,parent:o}}function cI(i){let e=oI(i.parent);const t=i.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){he(r===1,65062);const E=t.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let a=[];t.where&&(a=function(w){const T=hI(w);return T instanceof $e&&Cp(T)?T.getFilters():[T]}(t.where));let c=[];t.orderBy&&(c=function(w){return w.map(T=>function($){return new Xc(Uo($.field),function(j){switch(j){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}($.direction))}(T))}(t.orderBy));let d=null;t.limit&&(d=function(w){let T;return T=typeof w=="object"?w.value:w,_h(T)?null:T}(t.limit));let p=null;t.startAt&&(p=function(w){const T=!!w.before,U=w.values||[];return new ea(U,T)}(t.startAt));let y=null;return t.endAt&&(y=function(w){const T=!w.before,U=w.values||[];return new ea(U,T)}(t.endAt)),QA(e,o,c,a,d,"F",p,y)}function S1(i,e){const t=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return le(28987,{purpose:o})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function hI(i){return i.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Uo(t.unaryFilter.field);return De.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=Uo(t.unaryFilter.field);return De.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Uo(t.unaryFilter.field);return De.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Uo(t.unaryFilter.field);return De.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return le(61313);default:return le(60726)}}(i):i.fieldFilter!==void 0?function(t){return De.create(Uo(t.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return le(58110);default:return le(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(i):i.compositeFilter!==void 0?function(t){return $e.create(t.compositeFilter.filters.map(r=>hI(r)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return le(1026)}}(t.compositeFilter.op))}(i):le(30097,{filter:i})}function A1(i){return g1[i]}function R1(i){return y1[i]}function P1(i){return _1[i]}function Fo(i){return{fieldPath:i.canonicalString()}}function Uo(i){return nt.fromServerFormat(i.fieldPath)}function dI(i){return i instanceof De?function(t){if(t.op==="=="){if(u_(t.value))return{unaryFilter:{field:Fo(t.field),op:"IS_NAN"}};if(l_(t.value))return{unaryFilter:{field:Fo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(u_(t.value))return{unaryFilter:{field:Fo(t.field),op:"IS_NOT_NAN"}};if(l_(t.value))return{unaryFilter:{field:Fo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Fo(t.field),op:R1(t.op),value:t.value}}}(i):i instanceof $e?function(t){const r=t.getFilters().map(o=>dI(o));return r.length===1?r[0]:{compositeFilter:{op:P1(t.op),filters:r}}}(i):le(54877,{filter:i})}function C1(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function fI(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(e,t,r,o,a=fe.min(),c=fe.min(),d=dt.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new xr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new xr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new xr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new xr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(e){this.wt=e}}function k1(i,e){let t;if(e.document)t=I1(i.wt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ee.fromSegments(e.noDocument.path),o=Ds(e.noDocument.readTime);t=st.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return le(56709);{const r=ee.fromSegments(e.unknownDocument.path),o=Ds(e.unknownDocument.version);t=st.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(o){const a=new rt(o[0],o[1]);return fe.fromTimestamp(a)}(e.readTime)),t}function R_(i,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:nh(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(a,c){return{name:eh(a,c.key),fields:c.data.value.mapValue.fields,updateTime:sa(a,c.version.toTimestamp()),createTime:sa(a,c.createTime.toTimestamp())}}(i.wt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:xs(e.version)};else{if(!e.isUnknownDocument())return le(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:xs(e.version)}}return r}function nh(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function xs(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ds(i){const e=new rt(i.seconds,i.nanoseconds);return fe.fromTimestamp(e)}function ms(i,e){const t=(e.baseMutations||[]).map(a=>tp(i.wt,a));for(let a=0;a<e.mutations.length-1;++a){const c=e.mutations[a];if(a+1<e.mutations.length&&e.mutations[a+1].transform!==void 0){const d=e.mutations[a+1];c.updateTransforms=d.transform.fieldTransforms,e.mutations.splice(a+1,1),++a}}const r=e.mutations.map(a=>tp(i.wt,a)),o=rt.fromMillis(e.localWriteTimeMs);return new Dp(e.batchId,o,t,r)}function vl(i){const e=Ds(i.readTime),t=i.lastLimboFreeSnapshotVersion!==void 0?Ds(i.lastLimboFreeSnapshotVersion):fe.min();let r;return r=function(a){return a.documents!==void 0}(i.query)?function(a){const c=a.documents.length;return he(c===1,1966,{count:c}),Cn(Ah(oI(a.documents[0])))}(i.query):function(a){return Cn(cI(a))}(i.query),new xr(r,i.targetId,"TargetPurposeListen",i.lastListenSequenceNumber,e,t,dt.fromBase64String(i.resumeToken))}function mI(i,e){const t=xs(e.snapshotVersion),r=xs(e.lastLimboFreeSnapshotVersion);let o;o=Jc(e.target)?lI(i.wt,e.target):uI(i.wt,e.target).gt;const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ks(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function gI(i){const e=cI({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?Xf(e,e.limit,"L"):e}function Rf(i,e){return new Np(e.largestBatchId,tp(i.wt,e.overlayMutation))}function P_(i,e){const t=e.path.lastSegment();return[i,zt(e.path.popLast()),t]}function C_(i,e,t,r){return{indexId:i,uid:e,sequenceNumber:t,readTime:xs(r.readTime),documentKey:zt(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1{getBundleMetadata(e,t){return k_(e).get(t).next(r=>{if(r)return function(a){return{id:a.bundleId,createTime:Ds(a.createTime),version:a.version}}(r)})}saveBundleMetadata(e,t){return k_(e).put(function(o){return{bundleId:o.id,createTime:xs(Wt(o.createTime)),version:o.version}}(t))}getNamedQuery(e,t){return x_(e).get(t).next(r=>{if(r)return function(a){return{name:a.name,query:gI(a.bundledQuery),readTime:Ds(a.readTime)}}(r)})}saveNamedQuery(e,t){return x_(e).put(function(o){return{name:o.name,readTime:xs(Wt(o.readTime)),bundledQuery:o.bundledQuery}}(t))}}function k_(i){return vt(i,vh)}function x_(i){return vt(i,Eh)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(e,t){this.serializer=e,this.userId=t}static St(e,t){const r=t.uid||"";return new xh(e,r)}getOverlay(e,t){return cl(e).get(P_(this.userId,t)).next(r=>r?Rf(this.serializer,r):null)}getOverlays(e,t){const r=ar();return M.forEach(t,o=>this.getOverlay(e,o).next(a=>{a!==null&&r.set(o,a)})).next(()=>r)}saveOverlays(e,t,r){const o=[];return r.forEach((a,c)=>{const d=new Np(t,c);o.push(this.bt(e,d))}),M.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(c=>o.add(zt(c.getCollectionPath())));const a=[];return o.forEach(c=>{const d=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);a.push(cl(e).X(qf,d))}),M.waitFor(a)}getOverlaysForCollection(e,t,r){const o=ar(),a=zt(t),c=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return cl(e).J(qf,c).next(d=>{for(const p of d){const y=Rf(this.serializer,p);o.set(y.getKey(),y)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const a=ar();let c;const d=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return cl(e).te({index:_E,range:d},(p,y,E)=>{const w=Rf(this.serializer,y);a.size()<o||w.largestBatchId===c?(a.set(w.getKey(),w),c=w.largestBatchId):E.done()}).next(()=>a)}bt(e,t){return cl(e).put(function(o,a,c){const[d,p,y]=P_(a,c.mutation.key);return{userId:a,collectionPath:p,documentId:y,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:th(o.wt,c.mutation)}}(this.serializer,this.userId,t))}}function cl(i){return vt(i,Ih)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D1{Dt(e){return vt(e,wp)}getSessionToken(e){return this.Dt(e).get("sessionToken").next(t=>{const r=t==null?void 0:t.value;return r?dt.fromUint8Array(r):dt.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Dt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(){}vt(e,t){this.Ct(e,t),t.Ft()}Ct(e,t){if("nullValue"in e)this.Mt(t,5);else if("booleanValue"in e)this.Mt(t,10),t.xt(e.booleanValue?1:0);else if("integerValue"in e)this.Mt(t,15),t.xt(Je(e.integerValue));else if("doubleValue"in e){const r=Je(e.doubleValue);isNaN(r)?this.Mt(t,13):(this.Mt(t,15),Ol(r)?t.xt(0):t.xt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Mt(t,20),typeof r=="string"&&(r=br(r)),t.Ot(`${r.seconds||""}`),t.xt(r.nanos||0)}else if("stringValue"in e)this.Nt(e.stringValue,t),this.Bt(t);else if("bytesValue"in e)this.Mt(t,30),t.Lt(Or(e.bytesValue)),this.Bt(t);else if("referenceValue"in e)this.kt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Mt(t,45),t.xt(r.latitude||0),t.xt(r.longitude||0)}else"mapValue"in e?xE(e)?this.Mt(t,Number.MAX_SAFE_INTEGER):Th(e)?this.qt(e.mapValue,t):(this.Qt(e.mapValue,t),this.Bt(t)):"arrayValue"in e?(this.$t(e.arrayValue,t),this.Bt(t)):le(19022,{Ut:e})}Nt(e,t){this.Mt(t,25),this.Kt(e,t)}Kt(e,t){t.Ot(e)}Qt(e,t){const r=e.fields||{};this.Mt(t,55);for(const o of Object.keys(r))this.Nt(o,t),this.Ct(r[o],t)}qt(e,t){var r,o;const a=e.fields||{};this.Mt(t,53);const c=Jo,d=((o=(r=a[c].arrayValue)===null||r===void 0?void 0:r.values)===null||o===void 0?void 0:o.length)||0;this.Mt(t,15),t.xt(Je(d)),this.Nt(c,t),this.Ct(a[c],t)}$t(e,t){const r=e.values||[];this.Mt(t,50);for(const o of r)this.Ct(o,t)}kt(e,t){this.Mt(t,37),ee.fromName(e).path.forEach(r=>{this.Mt(t,60),this.Kt(r,t)})}Mt(e,t){e.xt(t)}Bt(e){e.xt(2)}}gs.Wt=new gs;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vo=255;function V1(i){if(i===0)return 8;let e=0;return i>>4||(e+=4,i<<=4),i>>6||(e+=2,i<<=2),i>>7||(e+=1),e}function D_(i){const e=64-function(r){let o=0;for(let a=0;a<8;++a){const c=V1(255&r[a]);if(o+=c,c!==8)break}return o}(i);return Math.ceil(e/8)}class N1{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Gt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.zt(r.value),r=t.next();this.jt()}Ht(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Jt(r.value),r=t.next();this.Yt()}Zt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.zt(r);else if(r<2048)this.zt(960|r>>>6),this.zt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.zt(480|r>>>12),this.zt(128|63&r>>>6),this.zt(128|63&r);else{const o=t.codePointAt(0);this.zt(240|o>>>18),this.zt(128|63&o>>>12),this.zt(128|63&o>>>6),this.zt(128|63&o)}}this.jt()}Xt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const o=t.codePointAt(0);this.Jt(240|o>>>18),this.Jt(128|63&o>>>12),this.Jt(128|63&o>>>6),this.Jt(128|63&o)}}this.Yt()}en(e){const t=this.tn(e),r=D_(t);this.nn(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}rn(e){const t=this.tn(e),r=D_(t);this.nn(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}sn(){this._n(Vo),this._n(255)}an(){this.un(Vo),this.un(255)}reset(){this.position=0}seed(e){this.nn(e.length),this.buffer.set(e,this.position),this.position+=e.length}cn(){return this.buffer.slice(0,this.position)}tn(e){const t=function(a){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,a,!1),new Uint8Array(c.buffer)}(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}zt(e){const t=255&e;t===0?(this._n(0),this._n(255)):t===Vo?(this._n(Vo),this._n(0)):this._n(t)}Jt(e){const t=255&e;t===0?(this.un(0),this.un(255)):t===Vo?(this.un(Vo),this.un(0)):this.un(e)}jt(){this._n(0),this._n(1)}Yt(){this.un(0),this.un(1)}_n(e){this.nn(1),this.buffer[this.position++]=e}un(e){this.nn(1),this.buffer[this.position++]=~e}nn(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class b1{constructor(e){this.ln=e}Lt(e){this.ln.Gt(e)}Ot(e){this.ln.Zt(e)}xt(e){this.ln.en(e)}Ft(){this.ln.sn()}}class O1{constructor(e){this.ln=e}Lt(e){this.ln.Ht(e)}Ot(e){this.ln.Xt(e)}xt(e){this.ln.rn(e)}Ft(){this.ln.an()}}class hl{constructor(){this.ln=new N1,this.hn=new b1(this.ln),this.Pn=new O1(this.ln)}seed(e){this.ln.seed(e)}Tn(e){return e===0?this.hn:this.Pn}cn(){return this.ln.cn()}reset(){this.ln.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(e,t,r,o){this.In=e,this.En=t,this.dn=r,this.An=o}Rn(){const e=this.An.length,t=e===0||this.An[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.An,0),t!==e?r.set([0],this.An.length):++r[r.length-1],new ys(this.In,this.En,this.dn,r)}Vn(e,t,r){return{indexId:this.In,uid:e,arrayValue:Lc(this.dn),directionalValue:Lc(this.An),orderedDocumentKey:Lc(t),documentKey:r.path.toArray()}}mn(e,t,r){const o=this.Vn(e,t,r);return[o.indexId,o.uid,o.arrayValue,o.directionalValue,o.orderedDocumentKey,o.documentKey]}}function fi(i,e){let t=i.In-e.In;return t!==0?t:(t=V_(i.dn,e.dn),t!==0?t:(t=V_(i.An,e.An),t!==0?t:ee.comparator(i.En,e.En)))}function V_(i,e){for(let t=0;t<i.length&&t<e.length;++t){const r=i[t]-e[t];if(r!==0)return r}return i.length-e.length}function Lc(i){return qv()?function(t){let r="";for(let o=0;o<t.length;o++)r+=String.fromCharCode(t[o]);return r}(i):i}function N_(i){return typeof i!="string"?i:function(t){const r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r}(i)}class b_{constructor(e){this.fn=new ze((t,r)=>nt.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.gn=e.orderBy,this.pn=[];for(const t of e.filters){const r=t;r.isInequality()?this.fn=this.fn.add(r):this.pn.push(r)}}get yn(){return this.fn.size>1}wn(e){if(he(e.collectionGroup===this.collectionId,49279),this.yn)return!1;const t=zf(e);if(t!==void 0&&!this.Sn(t))return!1;const r=ds(e);let o=new Set,a=0,c=0;for(;a<r.length&&this.Sn(r[a]);++a)o=o.add(r[a].fieldPath.canonicalString());if(a===r.length)return!0;if(this.fn.size>0){const d=this.fn.getIterator().getNext();if(!o.has(d.field.canonicalString())){const p=r[a];if(!this.bn(d,p)||!this.Dn(this.gn[c++],p))return!1}++a}for(;a<r.length;++a){const d=r[a];if(c>=this.gn.length||!this.Dn(this.gn[c++],d))return!1}return!0}vn(){if(this.yn)return null;let e=new ze(nt.comparator);const t=[];for(const r of this.pn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new kc(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new kc(r.field,0))}for(const r of this.gn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new kc(r.field,r.dir==="asc"?0:1)));return new Hc(Hc.UNKNOWN_ID,this.collectionId,t,bl.empty())}Sn(e){for(const t of this.pn)if(this.bn(t,e))return!0;return!1}bn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}Dn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yI(i){var e,t;if(he(i instanceof De||i instanceof $e,20012),i instanceof De){if(i instanceof UE){const o=((t=(e=i.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(a=>De.create(i.field,"==",a)))||[];return $e.create(o,"or")}return i}const r=i.filters.map(o=>yI(o));return $e.create(r,i.op)}function M1(i){if(i.getFilters().length===0)return[];const e=ip(yI(i));return he(_I(e),7391),np(e)||rp(e)?[e]:e.getFilters()}function np(i){return i instanceof De}function rp(i){return i instanceof $e&&Cp(i)}function _I(i){return np(i)||rp(i)||function(t){if(t instanceof $e&&Wf(t)){for(const r of t.getFilters())if(!np(r)&&!rp(r))return!1;return!0}return!1}(i)}function ip(i){if(he(i instanceof De||i instanceof $e,34018),i instanceof De)return i;if(i.filters.length===1)return ip(i.filters[0]);const e=i.filters.map(r=>ip(r));let t=$e.create(e,i.op);return t=rh(t),_I(t)?t:(he(t instanceof $e,64498),he(ta(t),40251),he(t.filters.length>1,57927),t.filters.reduce((r,o)=>Mp(r,o)))}function Mp(i,e){let t;return he(i instanceof De||i instanceof $e,38388),he(e instanceof De||e instanceof $e,25473),t=i instanceof De?e instanceof De?function(o,a){return $e.create([o,a],"and")}(i,e):O_(i,e):e instanceof De?O_(e,i):function(o,a){if(he(o.filters.length>0&&a.filters.length>0,48005),ta(o)&&ta(a))return ME(o,a.getFilters());const c=Wf(o)?o:a,d=Wf(o)?a:o,p=c.filters.map(y=>Mp(y,d));return $e.create(p,"or")}(i,e),rh(t)}function O_(i,e){if(ta(e))return ME(e,i.getFilters());{const t=e.filters.map(r=>Mp(i,r));return $e.create(t,"or")}}function rh(i){if(he(i instanceof De||i instanceof $e,11850),i instanceof De)return i;const e=i.getFilters();if(e.length===1)return rh(e[0]);if(bE(i))return i;const t=e.map(o=>rh(o)),r=[];return t.forEach(o=>{o instanceof De?r.push(o):o instanceof $e&&(o.op===i.op?r.push(...o.filters):r.push(o))}),r.length===1?r[0]:$e.create(r,i.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L1{constructor(){this.Cn=new Lp}addToCollectionParentIndex(e,t){return this.Cn.add(t),M.resolve()}getCollectionParents(e,t){return M.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return M.resolve()}deleteFieldIndex(e,t){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,t){return M.resolve()}getDocumentsMatchingTarget(e,t){return M.resolve(null)}getIndexType(e,t){return M.resolve(0)}getFieldIndexes(e,t){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,t){return M.resolve(gn.min())}getMinOffsetFromCollectionGroup(e,t){return M.resolve(gn.min())}updateCollectionGroup(e,t,r){return M.resolve()}updateIndexEntries(e,t){return M.resolve()}}class Lp{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new ze(Be.comparator),a=!o.has(r);return this.index[t]=o.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new ze(Be.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M_="IndexedDbIndexManager",Tc=new Uint8Array(0);class F1{constructor(e,t){this.databaseId=t,this.Fn=new Lp,this.Mn=new Br(r=>ks(r),(r,o)=>Ql(r,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Fn.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.Fn.add(t)});const a={collectionId:r,parent:zt(o)};return L_(e).put(a)}return M.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[lE(t),""],!1,!0);return L_(e).J(o).next(a=>{for(const c of a){if(c.collectionId!==t)break;r.push(or(c.parent))}return r})}addFieldIndex(e,t){const r=dl(e),o=function(d){return{indexId:d.indexId,collectionGroup:d.collectionGroup,fields:d.fields.map(p=>[p.fieldPath.canonicalString(),p.kind])}}(t);delete o.indexId;const a=r.add(o);if(t.indexState){const c=bo(e);return a.next(d=>{c.put(C_(d,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return a.next()}deleteFieldIndex(e,t){const r=dl(e),o=bo(e),a=No(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=dl(e),r=No(e),o=bo(e);return t.X().next(()=>r.X()).next(()=>o.X())}createTargetIndexes(e,t){return M.forEach(this.xn(t),r=>this.getIndexType(e,r).next(o=>{if(o===0||o===1){const a=new b_(r).vn();if(a!=null)return this.addFieldIndex(e,a)}}))}getDocumentsMatchingTarget(e,t){const r=No(e);let o=!0;const a=new Map;return M.forEach(this.xn(t),c=>this.On(e,c).next(d=>{o&&(o=!!d),a.set(c,d)})).next(()=>{if(o){let c=Re();const d=[];return M.forEach(a,(p,y)=>{Y(M_,`Using index ${function(te){return`id=${te.indexId}|cg=${te.collectionGroup}|f=${te.fields.map(pe=>`${pe.fieldPath}:${pe.kind}`).join(",")}`}(p)} to execute ${ks(t)}`);const E=function(te,pe){const Se=zf(pe);if(Se===void 0)return null;for(const me of Zc(te,Se.fieldPath))switch(me.op){case"array-contains-any":return me.value.arrayValue.values||[];case"array-contains":return[me.value]}return null}(y,p),w=function(te,pe){const Se=new Map;for(const me of ds(pe))for(const k of Zc(te,me.fieldPath))switch(k.op){case"==":case"in":Se.set(me.fieldPath.canonicalString(),k.value);break;case"not-in":case"!=":return Se.set(me.fieldPath.canonicalString(),k.value),Array.from(Se.values())}return null}(y,p),T=function(te,pe){const Se=[];let me=!0;for(const k of ds(pe)){const S=k.kind===0?p_(te,k.fieldPath,te.startAt):m_(te,k.fieldPath,te.startAt);Se.push(S.value),me&&(me=S.inclusive)}return new ea(Se,me)}(y,p),U=function(te,pe){const Se=[];let me=!0;for(const k of ds(pe)){const S=k.kind===0?m_(te,k.fieldPath,te.endAt):p_(te,k.fieldPath,te.endAt);Se.push(S.value),me&&(me=S.inclusive)}return new ea(Se,me)}(y,p),$=this.Nn(p,y,T),H=this.Nn(p,y,U),j=this.Bn(p,y,w),ve=this.Ln(p.indexId,E,$,T.inclusive,H,U.inclusive,j);return M.forEach(ve,se=>r.Z(se,t.limit).next(te=>{te.forEach(pe=>{const Se=ee.fromSegments(pe.documentKey);c.has(Se)||(c=c.add(Se),d.push(Se))})}))}).next(()=>d)}return M.resolve(null)})}xn(e){let t=this.Mn.get(e);return t||(e.filters.length===0?t=[e]:t=M1($e.create(e.filters,"and")).map(r=>Yf(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Mn.set(e,t),t)}Ln(e,t,r,o,a,c,d){const p=(t!=null?t.length:1)*Math.max(r.length,a.length),y=p/(t!=null?t.length:1),E=[];for(let w=0;w<p;++w){const T=t?this.kn(t[w/y]):Tc,U=this.qn(e,T,r[w%y],o),$=this.Qn(e,T,a[w%y],c),H=d.map(j=>this.qn(e,T,j,!0));E.push(...this.createRange(U,$,H))}return E}qn(e,t,r,o){const a=new ys(e,ee.empty(),t,r);return o?a:a.Rn()}Qn(e,t,r,o){const a=new ys(e,ee.empty(),t,r);return o?a.Rn():a}On(e,t){const r=new b_(t),o=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(a=>{let c=null;for(const d of a)r.wn(d)&&(!c||d.fields.length>c.fields.length)&&(c=d);return c})}getIndexType(e,t){let r=2;const o=this.xn(t);return M.forEach(o,a=>this.On(e,a).next(c=>{c?r!==0&&c.fields.length<function(p){let y=new ze(nt.comparator),E=!1;for(const w of p.filters)for(const T of w.getFlattenedFilters())T.field.isKeyField()||(T.op==="array-contains"||T.op==="array-contains-any"?E=!0:y=y.add(T.field));for(const w of p.orderBy)w.field.isKeyField()||(y=y.add(w.field));return y.size+(E?1:0)}(a)&&(r=1):r=0})).next(()=>function(c){return c.limit!==null}(t)&&o.length>1&&r===2?1:r)}$n(e,t){const r=new hl;for(const o of ds(e)){const a=t.data.field(o.fieldPath);if(a==null)return null;const c=r.Tn(o.kind);gs.Wt.vt(a,c)}return r.cn()}kn(e){const t=new hl;return gs.Wt.vt(e,t.Tn(0)),t.cn()}Un(e,t){const r=new hl;return gs.Wt.vt(Pp(this.databaseId,t),r.Tn(function(a){const c=ds(a);return c.length===0?0:c[c.length-1].kind}(e))),r.cn()}Bn(e,t,r){if(r===null)return[];let o=[];o.push(new hl);let a=0;for(const c of ds(e)){const d=r[a++];for(const p of o)if(this.Kn(t,c.fieldPath)&&zl(d))o=this.Wn(o,c,d);else{const y=p.Tn(c.kind);gs.Wt.vt(d,y)}}return this.Gn(o)}Nn(e,t,r){return this.Bn(e,t,r.position)}Gn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].cn();return t}Wn(e,t,r){const o=[...e],a=[];for(const c of r.arrayValue.values||[])for(const d of o){const p=new hl;p.seed(d.cn()),gs.Wt.vt(c,p.Tn(t.kind)),a.push(p)}return a}Kn(e,t){return!!e.filters.find(r=>r instanceof De&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){const r=dl(e),o=bo(e);return(t?r.J($f,IDBKeyRange.bound(t,t)):r.J()).next(a=>{const c=[];return M.forEach(a,d=>o.get([d.indexId,this.uid]).next(p=>{c.push(function(E,w){const T=w?new bl(w.sequenceNumber,new gn(Ds(w.readTime),new ee(or(w.documentKey)),w.largestBatchId)):bl.empty(),U=E.fields.map(([$,H])=>new kc(nt.fromServerFormat($),H));return new Hc(E.indexId,E.collectionGroup,U,T)}(d,p))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,o)=>{const a=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return a!==0?a:Ie(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=dl(e),a=bo(e);return this.zn(e).next(c=>o.J($f,IDBKeyRange.bound(t,t)).next(d=>M.forEach(d,p=>a.put(C_(p.indexId,this.uid,c,r)))))}updateIndexEntries(e,t){const r=new Map;return M.forEach(t,(o,a)=>{const c=r.get(o.collectionGroup);return(c?M.resolve(c):this.getFieldIndexes(e,o.collectionGroup)).next(d=>(r.set(o.collectionGroup,d),M.forEach(d,p=>this.jn(e,o,p).next(y=>{const E=this.Hn(a,p);return y.isEqual(E)?M.resolve():this.Jn(e,a,p,y,E)}))))})}Yn(e,t,r,o){return No(e).put(o.Vn(this.uid,this.Un(r,t.key),t.key))}Zn(e,t,r,o){return No(e).delete(o.mn(this.uid,this.Un(r,t.key),t.key))}jn(e,t,r){const o=No(e);let a=new ze(fi);return o.te({index:yE,range:IDBKeyRange.only([r.indexId,this.uid,Lc(this.Un(r,t))])},(c,d)=>{a=a.add(new ys(r.indexId,t,N_(d.arrayValue),N_(d.directionalValue)))}).next(()=>a)}Hn(e,t){let r=new ze(fi);const o=this.$n(t,e);if(o==null)return r;const a=zf(t);if(a!=null){const c=e.data.field(a.fieldPath);if(zl(c))for(const d of c.arrayValue.values||[])r=r.add(new ys(t.indexId,e.key,this.kn(d),o))}else r=r.add(new ys(t.indexId,e.key,Tc,o));return r}Jn(e,t,r,o,a){Y(M_,"Updating index entries for document '%s'",t.key);const c=[];return function(p,y,E,w,T){const U=p.getIterator(),$=y.getIterator();let H=Do(U),j=Do($);for(;H||j;){let ve=!1,se=!1;if(H&&j){const te=E(H,j);te<0?se=!0:te>0&&(ve=!0)}else H!=null?se=!0:ve=!0;ve?(w(j),j=Do($)):se?(T(H),H=Do(U)):(H=Do(U),j=Do($))}}(o,a,fi,d=>{c.push(this.Yn(e,t,r,d))},d=>{c.push(this.Zn(e,t,r,d))}),M.waitFor(c)}zn(e){let t=1;return bo(e).te({index:gE,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,a)=>{a.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,d)=>fi(c,d)).filter((c,d,p)=>!d||fi(c,p[d-1])!==0);const o=[];o.push(e);for(const c of r){const d=fi(c,e),p=fi(c,t);if(d===0)o[0]=e.Rn();else if(d>0&&p<0)o.push(c),o.push(c.Rn());else if(p>0)break}o.push(t);const a=[];for(let c=0;c<o.length;c+=2){if(this.Xn(o[c],o[c+1]))return[];const d=o[c].mn(this.uid,Tc,ee.empty()),p=o[c+1].mn(this.uid,Tc,ee.empty());a.push(IDBKeyRange.bound(d,p))}return a}Xn(e,t){return fi(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(F_)}getMinOffset(e,t){return M.mapArray(this.xn(t),r=>this.On(e,r).next(o=>o||le(44426))).next(F_)}}function L_(i){return vt(i,Fl)}function No(i){return vt(i,Al)}function dl(i){return vt(i,Ip)}function bo(i){return vt(i,Sl)}function F_(i){he(i.length!==0,28825);let e=i[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<i.length;r++){const o=i[r].indexState.offset;_p(o,e)<0&&(e=o),t<o.largestBatchId&&(t=o.largestBatchId)}return new gn(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},vI=41943040;class Ut{static withCacheSize(e){return new Ut(e,Ut.DEFAULT_COLLECTION_PERCENTILE,Ut.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EI(i,e,t){const r=i.store(qn),o=i.store(Wo),a=[],c=IDBKeyRange.only(t.batchId);let d=0;const p=r.te({range:c},(E,w,T)=>(d++,T.delete()));a.push(p.next(()=>{he(d===1,47070,{batchId:t.batchId})}));const y=[];for(const E of t.mutations){const w=fE(e,E.key.path,t.batchId);a.push(o.delete(w)),y.push(E.key)}return M.waitFor(a).next(()=>y)}function ih(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw le(14731);e=i.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ut.DEFAULT_COLLECTION_PERCENTILE=10,Ut.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ut.DEFAULT=new Ut(vI,Ut.DEFAULT_COLLECTION_PERCENTILE,Ut.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ut.DISABLED=new Ut(-1,0,0);class Dh{constructor(e,t,r,o){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=o,this.er={}}static St(e,t,r,o){he(e.uid!=="",64387);const a=e.isAuthenticated()?e.uid:"";return new Dh(a,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return pi(e).te({index:_s,range:r},(o,a,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const a=Bo(e),c=pi(e);return c.add({}).next(d=>{he(typeof d=="number",49019);const p=new Dp(d,t,r,o),y=function(U,$,H){const j=H.baseMutations.map(se=>th(U.wt,se)),ve=H.mutations.map(se=>th(U.wt,se));return{userId:$,batchId:H.batchId,localWriteTimeMs:H.localWriteTime.toMillis(),baseMutations:j,mutations:ve}}(this.serializer,this.userId,p),E=[];let w=new ze((T,U)=>Ie(T.canonicalString(),U.canonicalString()));for(const T of o){const U=fE(this.userId,T.key.path,d);w=w.add(T.key.path.popLast()),E.push(c.put(y)),E.push(a.put(U,fA))}return w.forEach(T=>{E.push(this.indexManager.addToCollectionParentIndex(e,T))}),e.addOnCommittedListener(()=>{this.er[d]=p.keys()}),M.waitFor(E).next(()=>p)})}lookupMutationBatch(e,t){return pi(e).get(t).next(r=>r?(he(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),ms(this.serializer,r)):null)}tr(e,t){return this.er[t]?M.resolve(this.er[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.er[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return pi(e).te({index:_s,range:o},(c,d,p)=>{d.userId===this.userId&&(he(d.batchId>=r,47524,{nr:r}),a=ms(this.serializer,d)),p.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=vs;return pi(e).te({index:_s,range:t,reverse:!0},(o,a,c)=>{r=a.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,vs],[this.userId,Number.POSITIVE_INFINITY]);return pi(e).J(_s,t).next(r=>r.map(o=>ms(this.serializer,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=xc(this.userId,t.path),o=IDBKeyRange.lowerBound(r),a=[];return Bo(e).te({range:o},(c,d,p)=>{const[y,E,w]=c,T=or(E);if(y===this.userId&&t.path.isEqual(T))return pi(e).get(w).next(U=>{if(!U)throw le(61480,{rr:c,batchId:w});he(U.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:U.userId,batchId:w}),a.push(ms(this.serializer,U))});p.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ze(Ie);const o=[];return t.forEach(a=>{const c=xc(this.userId,a.path),d=IDBKeyRange.lowerBound(c),p=Bo(e).te({range:d},(y,E,w)=>{const[T,U,$]=y,H=or(U);T===this.userId&&a.path.isEqual(H)?r=r.add($):w.done()});o.push(p)}),M.waitFor(o).next(()=>this.ir(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,a=xc(this.userId,r),c=IDBKeyRange.lowerBound(a);let d=new ze(Ie);return Bo(e).te({range:c},(p,y,E)=>{const[w,T,U]=p,$=or(T);w===this.userId&&r.isPrefixOf($)?$.length===o&&(d=d.add(U)):E.done()}).next(()=>this.ir(e,d))}ir(e,t){const r=[],o=[];return t.forEach(a=>{o.push(pi(e).get(a).next(c=>{if(c===null)throw le(35274,{batchId:a});he(c.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:c.userId,batchId:a}),r.push(ms(this.serializer,c))}))}),M.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return EI(e.he,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.sr(t.batchId)}),M.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}sr(e){delete this.er[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return M.resolve();const r=IDBKeyRange.lowerBound(function(c){return[c]}(this.userId)),o=[];return Bo(e).te({range:r},(a,c,d)=>{if(a[0]===this.userId){const p=or(a[1]);o.push(p)}else d.done()}).next(()=>{he(o.length===0,56720,{_r:o.map(a=>a.canonicalString())})})})}containsKey(e,t){return II(e,this.userId,t)}ar(e){return wI(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:vs,lastStreamToken:""})}}function II(i,e,t){const r=xc(e,t.path),o=r[1],a=IDBKeyRange.lowerBound(r);let c=!1;return Bo(i).te({range:a,ee:!0},(d,p,y)=>{const[E,w,T]=d;E===e&&w===o&&(c=!0),y.done()}).next(()=>c)}function pi(i){return vt(i,qn)}function Bo(i){return vt(i,Wo)}function wI(i){return vt(i,Ml)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new Vs(0)}static lr(){return new Vs(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.hr(e).next(t=>{const r=new Vs(t.highestTargetId);return t.highestTargetId=r.next(),this.Pr(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.hr(e).next(t=>fe.fromTimestamp(new rt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.hr(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.hr(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.Pr(e,o)))}addTargetData(e,t){return this.Tr(e,t).next(()=>this.hr(e).next(r=>(r.targetCount+=1,this.Ir(t,r),this.Pr(e,r))))}updateTargetData(e,t){return this.Tr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Oo(e).delete(t.targetId)).next(()=>this.hr(e)).next(r=>(he(r.targetCount>0,8065),r.targetCount-=1,this.Pr(e,r)))}removeTargets(e,t,r){let o=0;const a=[];return Oo(e).te((c,d)=>{const p=vl(d);p.sequenceNumber<=t&&r.get(p.targetId)===null&&(o++,a.push(this.removeTargetData(e,p)))}).next(()=>M.waitFor(a)).next(()=>o)}forEachTarget(e,t){return Oo(e).te((r,o)=>{const a=vl(o);t(a)})}hr(e){return B_(e).get(Qc).next(t=>(he(t!==null,2888),t))}Pr(e,t){return B_(e).put(Qc,t)}Tr(e,t){return Oo(e).put(mI(this.serializer,t))}Ir(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.hr(e).next(t=>t.targetCount)}getTargetData(e,t){const r=ks(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return Oo(e).te({range:o,index:mE},(c,d,p)=>{const y=vl(d);Ql(t,y.target)&&(a=y,p.done())}).next(()=>a)}addMatchingKeys(e,t,r){const o=[],a=yi(e);return t.forEach(c=>{const d=zt(c.path);o.push(a.put({targetId:r,path:d})),o.push(this.referenceDelegate.addReference(e,r,c))}),M.waitFor(o)}removeMatchingKeys(e,t,r){const o=yi(e);return M.forEach(t,a=>{const c=zt(a.path);return M.waitFor([o.delete([r,c]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=yi(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=yi(e);let a=Re();return o.te({range:r,ee:!0},(c,d,p)=>{const y=or(c[1]),E=new ee(y);a=a.add(E)}).next(()=>a)}containsKey(e,t){const r=zt(t.path),o=IDBKeyRange.bound([r],[lE(r)],!1,!0);let a=0;return yi(e).te({index:Ep,ee:!0,range:o},([c,d],p,y)=>{c!==0&&(a++,y.done())}).next(()=>a>0)}Rt(e,t){return Oo(e).get(t).next(r=>r?vl(r):null)}}function Oo(i){return vt(i,Qo)}function B_(i){return vt(i,Es)}function yi(i){return vt(i,Yo)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z_="LruGarbageCollector",B1=1048576;function j_([i,e],[t,r]){const o=Ie(i,t);return o===0?Ie(e,r):o}class z1{constructor(e){this.Er=e,this.buffer=new ze(j_),this.dr=0}Ar(){return++this.dr}Rr(e){const t=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();j_(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class TI{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){Y(z_,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ni(t)?Y(z_,"Ignoring IndexedDB error during garbage collection: ",t):await bs(t)}await this.mr(3e5)})}}class j1{constructor(e,t){this.gr=e,this.params=t}calculateTargetCount(e,t){return this.gr.pr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return M.resolve(Pn.le);const r=new z1(t);return this.gr.forEachTarget(e,o=>r.Rr(o.sequenceNumber)).next(()=>this.gr.yr(e,o=>r.Rr(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.gr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.gr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Y("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(U_)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Y("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),U_):this.wr(e,t))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,t){let r,o,a,c,d,p,y;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(w=>(w>this.params.maximumSequenceNumbersToCollect?(Y("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),o=this.params.maximumSequenceNumbersToCollect):o=w,c=Date.now(),this.nthSequenceNumber(e,o))).next(w=>(r=w,d=Date.now(),this.removeTargets(e,r,t))).next(w=>(a=w,p=Date.now(),this.removeOrphanedDocuments(e,r))).next(w=>(y=Date.now(),Mo()<=ke.DEBUG&&Y("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-E}ms
	Determined least recently used ${o} in `+(d-c)+`ms
	Removed ${a} targets in `+(p-d)+`ms
	Removed ${w} documents in `+(y-p)+`ms
Total Duration: ${y-E}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:a,documentsRemoved:w})))}}function SI(i,e){return new j1(i,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{constructor(e,t){this.db=e,this.garbageCollector=SI(this,t)}pr(e){const t=this.Sr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}Sr(e){let t=0;return this.yr(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}yr(e,t){return this.br(e,(r,o)=>t(o))}addReference(e,t,r){return Sc(e,r)}removeReference(e,t,r){return Sc(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Sc(e,t)}Dr(e,t){return function(o,a){let c=!1;return wI(o).ne(d=>II(o,d,a).next(p=>(p&&(c=!0),M.resolve(!p)))).next(()=>c)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let a=0;return this.br(e,(c,d)=>{if(d<=t){const p=this.Dr(e,c).next(y=>{if(!y)return a++,r.getEntry(e,c).next(()=>(r.removeEntry(c,fe.min()),yi(e).delete(function(w){return[0,zt(w.path)]}(c))))});o.push(p)}}).next(()=>M.waitFor(o)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Sc(e,t)}br(e,t){const r=yi(e);let o,a=Pn.le;return r.te({index:Ep},([c,d],{path:p,sequenceNumber:y})=>{c===0?(a!==Pn.le&&t(new ee(or(o)),a),a=y,o=p):a=Pn.le}).next(()=>{a!==Pn.le&&t(new ee(or(o)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Sc(i,e){return yi(i).put(function(r,o){return{targetId:0,path:zt(r.path),sequenceNumber:o}}(e,i.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(){this.changes=new Br(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,st.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?M.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q1{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return cs(e).put(r)}removeEntry(e,t,r){return cs(e).delete(function(a,c){const d=a.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],nh(c),d[d.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.vr(e,r)))}getEntry(e,t){let r=st.newInvalidDocument(t);return cs(e).te({index:Dc,range:IDBKeyRange.only(fl(t))},(o,a)=>{r=this.Cr(t,a)}).next(()=>r)}Fr(e,t){let r={size:0,document:st.newInvalidDocument(t)};return cs(e).te({index:Dc,range:IDBKeyRange.only(fl(t))},(o,a)=>{r={document:this.Cr(t,a),size:ih(a)}}).next(()=>r)}getEntries(e,t){let r=mn();return this.Mr(e,t,(o,a)=>{const c=this.Cr(o,a);r=r.insert(o,c)}).next(()=>r)}Or(e,t){let r=mn(),o=new Ze(ee.comparator);return this.Mr(e,t,(a,c)=>{const d=this.Cr(a,c);r=r.insert(a,d),o=o.insert(a,ih(c))}).next(()=>({documents:r,Nr:o}))}Mr(e,t,r){if(t.isEmpty())return M.resolve();let o=new ze(K_);t.forEach(p=>o=o.add(p));const a=IDBKeyRange.bound(fl(o.first()),fl(o.last())),c=o.getIterator();let d=c.getNext();return cs(e).te({index:Dc,range:a},(p,y,E)=>{const w=ee.fromSegments([...y.prefixPath,y.collectionGroup,y.documentId]);for(;d&&K_(d,w)<0;)r(d,null),d=c.getNext();d&&d.isEqual(w)&&(r(d,y),d=c.hasNext()?c.getNext():null),d?E.H(fl(d)):E.done()}).next(()=>{for(;d;)r(d,null),d=c.hasNext()?c.getNext():null})}getDocumentsMatchingQuery(e,t,r,o,a){const c=t.path,d=[c.popLast().toArray(),c.lastSegment(),nh(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],p=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return cs(e).J(IDBKeyRange.bound(d,p,!0)).next(y=>{a==null||a.incrementDocumentReadCount(y.length);let E=mn();for(const w of y){const T=this.Cr(ee.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);T.isFoundDocument()&&(Yl(t,T)||o.has(T.key))&&(E=E.insert(T.key,T))}return E})}getAllFromCollectionGroup(e,t,r,o){let a=mn();const c=q_(t,r),d=q_(t,gn.max());return cs(e).te({index:pE,range:IDBKeyRange.bound(c,d,!0)},(p,y,E)=>{const w=this.Cr(ee.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);a=a.insert(w.key,w),a.size===o&&E.done()}).next(()=>a)}newChangeBuffer(e){return new K1(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return $_(e).get(jf).next(t=>(he(!!t,20021),t))}vr(e,t){return $_(e).put(jf,t)}Cr(e,t){if(t){const r=k1(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(fe.min())))return r}return st.newInvalidDocument(e)}}function RI(i){return new q1(i)}class K1 extends AI{constructor(e,t){super(),this.Br=e,this.trackRemovals=t,this.Lr=new Br(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new ze((a,c)=>Ie(a.canonicalString(),c.canonicalString()));return this.changes.forEach((a,c)=>{const d=this.Lr.get(a);if(t.push(this.Br.removeEntry(e,a,d.readTime)),c.isValidDocument()){const p=R_(this.Br.serializer,c);o=o.add(a.path.popLast());const y=ih(p);r+=y-d.size,t.push(this.Br.addEntry(e,a,p))}else if(r-=d.size,this.trackRemovals){const p=R_(this.Br.serializer,c.convertToNoDocument(fe.min()));t.push(this.Br.addEntry(e,a,p))}}),o.forEach(a=>{t.push(this.Br.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.Br.updateMetadata(e,r)),M.waitFor(t)}getFromCache(e,t){return this.Br.Fr(e,t).next(r=>(this.Lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Br.Or(e,t).next(({documents:r,Nr:o})=>(o.forEach((a,c)=>{this.Lr.set(a,{size:c,readTime:r.get(a).readTime})}),r))}}function $_(i){return vt(i,Ll)}function cs(i){return vt(i,Wc)}function fl(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function q_(i,e){const t=e.documentKey.path.toArray();return[i,nh(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function K_(i,e){const t=i.path.toArray(),r=e.path.toArray();let o=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(o=Ie(t[a],r[a]),o)return o;return o=Ie(t.length,r.length),o||(o=Ie(t[t.length-2],r[r.length-2]),o||Ie(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(r=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(r!==null&&kl(r.mutation,o,rn.empty(),rt.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Re()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Re()){const o=ar();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,r).next(a=>{let c=yl();return a.forEach((d,p)=>{c=c.insert(d,p.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=ar();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Re()))}populateOverlays(e,t,r){const o=[];return r.forEach(a=>{t.has(a)||o.push(a)}),this.documentOverlayCache.getOverlays(e,o).next(a=>{a.forEach((c,d)=>{t.set(c,d)})})}computeViews(e,t,r,o){let a=mn();const c=Cl(),d=function(){return Cl()}();return t.forEach((p,y)=>{const E=r.get(y.key);o.has(y.key)&&(E===void 0||E.mutation instanceof zr)?a=a.insert(y.key,y):E!==void 0?(c.set(y.key,E.mutation.getFieldMask()),kl(E.mutation,y,E.mutation.getFieldMask(),rt.now())):c.set(y.key,rn.empty())}),this.recalculateAndSaveOverlays(e,a).next(p=>(p.forEach((y,E)=>c.set(y,E)),t.forEach((y,E)=>{var w;return d.set(y,new H1(E,(w=c.get(y))!==null&&w!==void 0?w:null))}),d))}recalculateAndSaveOverlays(e,t){const r=Cl();let o=new Ze((c,d)=>c-d),a=Re();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const d of c)d.keys().forEach(p=>{const y=t.get(p);if(y===null)return;let E=r.get(p)||rn.empty();E=d.applyToLocalView(y,E),r.set(p,E);const w=(o.get(d.batchId)||Re()).add(p);o=o.insert(d.batchId,w)})}).next(()=>{const c=[],d=o.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),y=p.key,E=p.value,w=qE();E.forEach(T=>{if(!a.has(T)){const U=XE(t.get(T),r.get(T));U!==null&&w.set(T,U),a=a.add(T)}}),c.push(this.documentOverlayCache.saveOverlays(e,y,w))}return M.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,o){return function(c){return ee.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):YA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,o):this.getDocumentsMatchingCollectionQuery(e,t,r,o)}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next(a=>{const c=o-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-a.size):M.resolve(ar());let d=Nl,p=a;return c.next(y=>M.forEach(y,(E,w)=>(d<w.largestBatchId&&(d=w.largestBatchId),a.get(E)?M.resolve():this.remoteDocumentCache.getEntry(e,E).next(T=>{p=p.insert(E,T)}))).next(()=>this.populateOverlays(e,y,a)).next(()=>this.computeViews(e,p,y,Re())).next(E=>({batchId:d,changes:$E(E)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ee(t)).next(r=>{let o=yl();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,r,o){const a=t.collectionGroup;let c=yl();return this.indexManager.getCollectionParents(e,a).next(d=>M.forEach(d,p=>{const y=function(w,T){return new Sh(T,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)}(t,p.child(a));return this.getDocumentsMatchingCollectionQuery(e,y,r,o).next(E=>{E.forEach((w,T)=>{c=c.insert(w,T)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,r,o){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(c=>(a=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,o))).next(c=>{a.forEach((p,y)=>{const E=y.getKey();c.get(E)===null&&(c=c.insert(E,st.newInvalidDocument(E)))});let d=yl();return c.forEach((p,y)=>{const E=a.get(p);E!==void 0&&kl(E.mutation,y,rn.empty(),rt.now()),Yl(t,y)&&(d=d.insert(p,y))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,t){return M.resolve(this.kr.get(t))}saveBundleMetadata(e,t){return this.kr.set(t.id,function(o){return{id:o.id,version:o.version,createTime:Wt(o.createTime)}}(t)),M.resolve()}getNamedQuery(e,t){return M.resolve(this.qr.get(t))}saveNamedQuery(e,t){return this.qr.set(t.name,function(o){return{name:o.name,query:gI(o.bundledQuery),readTime:Wt(o.readTime)}}(t)),M.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(){this.overlays=new Ze(ee.comparator),this.Qr=new Map}getOverlay(e,t){return M.resolve(this.overlays.get(t))}getOverlays(e,t){const r=ar();return M.forEach(t,o=>this.getOverlay(e,o).next(a=>{a!==null&&r.set(o,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((o,a)=>{this.bt(e,t,a)}),M.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.Qr.get(r);return o!==void 0&&(o.forEach(a=>this.overlays=this.overlays.remove(a)),this.Qr.delete(r)),M.resolve()}getOverlaysForCollection(e,t,r){const o=ar(),a=t.length+1,c=new ee(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const p=d.getNext().value,y=p.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===a&&p.largestBatchId>r&&o.set(p.getKey(),p)}return M.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let a=new Ze((y,E)=>y-E);const c=this.overlays.getIterator();for(;c.hasNext();){const y=c.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>r){let E=a.get(y.largestBatchId);E===null&&(E=ar(),a=a.insert(y.largestBatchId,E)),E.set(y.getKey(),y)}}const d=ar(),p=a.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((y,E)=>d.set(y,E)),!(d.size()>=o)););return M.resolve(d)}bt(e,t,r){const o=this.overlays.get(r.key);if(o!==null){const c=this.Qr.get(o.largestBatchId).delete(r.key);this.Qr.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new Np(t,r));let a=this.Qr.get(t);a===void 0&&(a=Re(),this.Qr.set(t,a)),this.Qr.set(t,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1{constructor(){this.sessionToken=dt.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,M.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fp{constructor(){this.$r=new ze(At.Ur),this.Kr=new ze(At.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,t){const r=new At(e,t);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.zr(new At(e,t))}jr(e,t){e.forEach(r=>this.removeReference(r,t))}Hr(e){const t=new ee(new Be([])),r=new At(t,e),o=new At(t,e+1),a=[];return this.Kr.forEachInRange([r,o],c=>{this.zr(c),a.push(c.key)}),a}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const t=new ee(new Be([])),r=new At(t,e),o=new At(t,e+1);let a=Re();return this.Kr.forEachInRange([r,o],c=>{a=a.add(c.key)}),a}containsKey(e){const t=new At(e,0),r=this.$r.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class At{constructor(e,t){this.key=e,this.Zr=t}static Ur(e,t){return ee.comparator(e.key,t.key)||Ie(e.Zr,t.Zr)}static Wr(e,t){return Ie(e.Zr,t.Zr)||ee.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y1{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nr=1,this.Xr=new ze(At.Ur)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,o){const a=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new Dp(a,t,r,o);this.mutationQueue.push(c);for(const d of o)this.Xr=this.Xr.add(new At(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return M.resolve(c)}lookupMutationBatch(e,t){return M.resolve(this.ei(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=this.ti(r),a=o<0?0:o;return M.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?vs:this.nr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new At(t,0),o=new At(t,Number.POSITIVE_INFINITY),a=[];return this.Xr.forEachInRange([r,o],c=>{const d=this.ei(c.Zr);a.push(d)}),M.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ze(Ie);return t.forEach(o=>{const a=new At(o,0),c=new At(o,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([a,c],d=>{r=r.add(d.Zr)})}),M.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let a=r;ee.isDocumentKey(a)||(a=a.child(""));const c=new At(new ee(a),0);let d=new ze(Ie);return this.Xr.forEachWhile(p=>{const y=p.key.path;return!!r.isPrefixOf(y)&&(y.length===o&&(d=d.add(p.Zr)),!0)},c),M.resolve(this.ni(d))}ni(e){const t=[];return e.forEach(r=>{const o=this.ei(r);o!==null&&t.push(o)}),t}removeMutationBatch(e,t){he(this.ri(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return M.forEach(t.mutations,o=>{const a=new At(o.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Xr=r})}sr(e){}containsKey(e,t){const r=new At(t,0),o=this.Xr.firstAfterOrEqual(r);return M.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}ri(e,t){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const t=this.ti(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(e){this.ii=e,this.docs=function(){return new Ze(ee.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),a=o?o.size:0,c=this.ii(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return M.resolve(r?r.document.mutableCopy():st.newInvalidDocument(t))}getEntries(e,t){let r=mn();return t.forEach(o=>{const a=this.docs.get(o);r=r.insert(o,a?a.document.mutableCopy():st.newInvalidDocument(o))}),M.resolve(r)}getDocumentsMatchingQuery(e,t,r,o){let a=mn();const c=t.path,d=new ee(c.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:y,value:{document:E}}=p.getNext();if(!c.isPrefixOf(y.path))break;y.path.length>c.length+1||_p(uE(E),r)<=0||(o.has(E.key)||Yl(t,E))&&(a=a.insert(E.key,E.mutableCopy()))}return M.resolve(a)}getAllFromCollectionGroup(e,t,r,o){le(9500)}si(e,t){return M.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new J1(this)}getSize(e){return M.resolve(this.size)}}class J1 extends AI{constructor(e){super(),this.Br=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.Br.addEntry(e,o)):this.Br.removeEntry(r)}),M.waitFor(t)}getFromCache(e,t){return this.Br.getEntry(e,t)}getAllFromCache(e,t){return this.Br.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(e){this.persistence=e,this.oi=new Br(t=>ks(t),Ql),this.lastRemoteSnapshotVersion=fe.min(),this.highestTargetId=0,this._i=0,this.ai=new Fp,this.targetCount=0,this.ui=Vs.cr()}forEachTarget(e,t){return this.oi.forEach((r,o)=>t(o)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this._i&&(this._i=t),M.resolve()}Tr(e){this.oi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ui=new Vs(t),this.highestTargetId=t),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,t){return this.Tr(t),this.targetCount+=1,M.resolve()}updateTargetData(e,t){return this.Tr(t),M.resolve()}removeTargetData(e,t){return this.oi.delete(t.target),this.ai.Hr(t.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,t,r){let o=0;const a=[];return this.oi.forEach((c,d)=>{d.sequenceNumber<=t&&r.get(d.targetId)===null&&(this.oi.delete(c),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),o++)}),M.waitFor(a).next(()=>o)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,t){const r=this.oi.get(t)||null;return M.resolve(r)}addMatchingKeys(e,t,r){return this.ai.Gr(t,r),M.resolve()}removeMatchingKeys(e,t,r){this.ai.jr(t,r);const o=this.persistence.referenceDelegate,a=[];return o&&t.forEach(c=>{a.push(o.markPotentiallyOrphaned(e,c))}),M.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.ai.Hr(t),M.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ai.Yr(t);return M.resolve(r)}containsKey(e,t){return M.resolve(this.ai.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Up{constructor(e,t){this.ci={},this.overlays={},this.li=new Pn(0),this.hi=!1,this.hi=!0,this.Pi=new Q1,this.referenceDelegate=e(this),this.Ti=new Z1(this),this.indexManager=new L1,this.remoteDocumentCache=function(o){return new X1(o)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new pI(t),this.Ei=new G1(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new W1,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ci[e.toKey()];return r||(r=new Y1(t,this.referenceDelegate),this.ci[e.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,t,r){Y("MemoryPersistence","Starting transaction:",e);const o=new eR(this.li.next());return this.referenceDelegate.di(),r(o).next(a=>this.referenceDelegate.Ai(o).next(()=>a)).toPromise().then(a=>(o.raiseOnCommittedEvent(),a))}Ri(e,t){return M.or(Object.values(this.ci).map(r=>()=>r.containsKey(e,t)))}}class eR extends hE{constructor(e){super(),this.currentSequenceNumber=e}}class Vh{constructor(e){this.persistence=e,this.Vi=new Fp,this.mi=null}static fi(e){return new Vh(e)}get gi(){if(this.mi)return this.mi;throw le(60996)}addReference(e,t,r){return this.Vi.addReference(r,t),this.gi.delete(r.toString()),M.resolve()}removeReference(e,t,r){return this.Vi.removeReference(r,t),this.gi.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,t){return this.gi.add(t.toString()),M.resolve()}removeTarget(e,t){this.Vi.Hr(t.targetId).forEach(o=>this.gi.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(a=>this.gi.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}di(){this.mi=new Set}Ai(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.gi,r=>{const o=ee.fromPath(r);return this.pi(e,o).next(a=>{a||t.removeEntry(o,fe.min())})}).next(()=>(this.mi=null,t.apply(e)))}updateLimboDocument(e,t){return this.pi(e,t).next(r=>{r?this.gi.delete(t.toString()):this.gi.add(t.toString())})}Ii(e){return 0}pi(e,t){return M.or([()=>M.resolve(this.Vi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ri(e,t)])}}class sh{constructor(e,t){this.persistence=e,this.yi=new Br(r=>zt(r.path),(r,o)=>r.isEqual(o)),this.garbageCollector=SI(this,t)}static fi(e,t){return new sh(e,t)}di(){}Ai(e){return M.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}pr(e){const t=this.Sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}Sr(e){let t=0;return this.yr(e,r=>{t++}).next(()=>t)}yr(e,t){return M.forEach(this.yi,(r,o)=>this.Dr(e,r,o).next(a=>a?M.resolve():t(o)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const o=this.persistence.getRemoteDocumentCache(),a=o.newChangeBuffer();return o.si(e,c=>this.Dr(e,c,t).next(d=>{d||(r++,a.removeEntry(c,fe.min()))})).next(()=>a.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.yi.set(t,e.currentSequenceNumber),M.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.yi.set(r,e.currentSequenceNumber),M.resolve()}removeReference(e,t,r){return this.yi.set(r,e.currentSequenceNumber),M.resolve()}updateLimboDocument(e,t){return this.yi.set(t,e.currentSequenceNumber),M.resolve()}Ii(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Nc(e.data.value)),t}Dr(e,t,r){return M.or([()=>this.persistence.Ri(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.yi.get(t);return M.resolve(o!==void 0&&o>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(e){this.serializer=e}q(e,t,r,o){const a=new yh("createOrUpgrade",t);r<1&&o>=1&&(function(p){p.createObjectStore(Wl)}(e),function(p){p.createObjectStore(Ml,{keyPath:dA}),p.createObjectStore(qn,{keyPath:n_,autoIncrement:!0}).createIndex(_s,r_,{unique:!0}),p.createObjectStore(Wo)}(e),H_(e),function(p){p.createObjectStore(fs)}(e));let c=M.resolve();return r<3&&o>=3&&(r!==0&&(function(p){p.deleteObjectStore(Yo),p.deleteObjectStore(Qo),p.deleteObjectStore(Es)}(e),H_(e)),c=c.next(()=>function(p){const y=p.store(Es),E={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:fe.min().toTimestamp(),targetCount:0};return y.put(Qc,E)}(a))),r<4&&o>=4&&(r!==0&&(c=c.next(()=>function(p,y){return y.store(qn).J().next(w=>{p.deleteObjectStore(qn),p.createObjectStore(qn,{keyPath:n_,autoIncrement:!0}).createIndex(_s,r_,{unique:!0});const T=y.store(qn),U=w.map($=>T.put($));return M.waitFor(U)})}(e,a))),c=c.next(()=>{(function(p){p.createObjectStore(Xo,{keyPath:IA})})(e)})),r<5&&o>=5&&(c=c.next(()=>this.wi(a))),r<6&&o>=6&&(c=c.next(()=>(function(p){p.createObjectStore(Ll)}(e),this.Si(a)))),r<7&&o>=7&&(c=c.next(()=>this.bi(a))),r<8&&o>=8&&(c=c.next(()=>this.Di(e,a))),r<9&&o>=9&&(c=c.next(()=>{(function(p){p.objectStoreNames.contains("remoteDocumentChanges")&&p.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&o>=10&&(c=c.next(()=>this.Ci(a))),r<11&&o>=11&&(c=c.next(()=>{(function(p){p.createObjectStore(vh,{keyPath:wA})})(e),function(p){p.createObjectStore(Eh,{keyPath:TA})}(e)})),r<12&&o>=12&&(c=c.next(()=>{(function(p){const y=p.createObjectStore(Ih,{keyPath:xA});y.createIndex(qf,DA,{unique:!1}),y.createIndex(_E,VA,{unique:!1})})(e)})),r<13&&o>=13&&(c=c.next(()=>function(p){const y=p.createObjectStore(Wc,{keyPath:pA});y.createIndex(Dc,mA),y.createIndex(pE,gA)}(e)).next(()=>this.Fi(e,a)).next(()=>e.deleteObjectStore(fs))),r<14&&o>=14&&(c=c.next(()=>this.Mi(e,a))),r<15&&o>=15&&(c=c.next(()=>function(p){p.createObjectStore(Ip,{keyPath:SA,autoIncrement:!0}).createIndex($f,AA,{unique:!1}),p.createObjectStore(Sl,{keyPath:RA}).createIndex(gE,PA,{unique:!1}),p.createObjectStore(Al,{keyPath:CA}).createIndex(yE,kA,{unique:!1})}(e))),r<16&&o>=16&&(c=c.next(()=>{t.objectStore(Sl).clear()}).next(()=>{t.objectStore(Al).clear()})),r<17&&o>=17&&(c=c.next(()=>{(function(p){p.createObjectStore(wp,{keyPath:NA})})(e)})),r<18&&o>=18&&qv()&&(c=c.next(()=>{t.objectStore(Sl).clear()}).next(()=>{t.objectStore(Al).clear()})),c}Si(e){let t=0;return e.store(fs).te((r,o)=>{t+=ih(o)}).next(()=>{const r={byteSize:t};return e.store(Ll).put(jf,r)})}wi(e){const t=e.store(Ml),r=e.store(qn);return t.J().next(o=>M.forEach(o,a=>{const c=IDBKeyRange.bound([a.userId,vs],[a.userId,a.lastAcknowledgedBatchId]);return r.J(_s,c).next(d=>M.forEach(d,p=>{he(p.userId===a.userId,18650,"Cannot process batch from unexpected user",{batchId:p.batchId});const y=ms(this.serializer,p);return EI(e,a.userId,y).next(()=>{})}))}))}bi(e){const t=e.store(Yo),r=e.store(fs);return e.store(Es).get(Qc).next(o=>{const a=[];return r.te((c,d)=>{const p=new Be(c),y=function(w){return[0,zt(w)]}(p);a.push(t.get(y).next(E=>E?M.resolve():(w=>t.put({targetId:0,path:zt(w),sequenceNumber:o.highestListenSequenceNumber}))(p)))}).next(()=>M.waitFor(a))})}Di(e,t){e.createObjectStore(Fl,{keyPath:EA});const r=t.store(Fl),o=new Lp,a=c=>{if(o.add(c)){const d=c.lastSegment(),p=c.popLast();return r.put({collectionId:d,parent:zt(p)})}};return t.store(fs).te({ee:!0},(c,d)=>{const p=new Be(c);return a(p.popLast())}).next(()=>t.store(Wo).te({ee:!0},([c,d,p],y)=>{const E=or(d);return a(E.popLast())}))}Ci(e){const t=e.store(Qo);return t.te((r,o)=>{const a=vl(o),c=mI(this.serializer,a);return t.put(c)})}Fi(e,t){const r=t.store(fs),o=[];return r.te((a,c)=>{const d=t.store(Wc),p=function(w){return w.document?new ee(Be.fromString(w.document.name).popFirst(5)):w.noDocument?ee.fromSegments(w.noDocument.path):w.unknownDocument?ee.fromSegments(w.unknownDocument.path):le(36783)}(c).path.toArray(),y={prefixPath:p.slice(0,p.length-2),collectionGroup:p[p.length-2],documentId:p[p.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};o.push(d.put(y))}).next(()=>M.waitFor(o))}Mi(e,t){const r=t.store(qn),o=RI(this.serializer),a=new Up(Vh.fi,this.serializer.wt);return r.J().next(c=>{const d=new Map;return c.forEach(p=>{var y;let E=(y=d.get(p.userId))!==null&&y!==void 0?y:Re();ms(this.serializer,p).keys().forEach(w=>E=E.add(w)),d.set(p.userId,E)}),M.forEach(d,(p,y)=>{const E=new xt(y),w=xh.St(this.serializer,E),T=a.getIndexManager(E),U=Dh.St(E,this.serializer,T,a.referenceDelegate);return new PI(o,U,w,T).recalculateAndSaveOverlaysForDocumentKeys(new Kf(t,Pn.le),p).next()})})}}function H_(i){i.createObjectStore(Yo,{keyPath:_A}).createIndex(Ep,vA,{unique:!0}),i.createObjectStore(Qo,{keyPath:"targetId"}).createIndex(mE,yA,{unique:!0}),i.createObjectStore(Es)}const mi="IndexedDbPersistence",Pf=18e5,Cf=5e3,kf="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",nR="main";class Bp{constructor(e,t,r,o,a,c,d,p,y,E,w=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.xi=a,this.window=c,this.document=d,this.Oi=y,this.Ni=E,this.Bi=w,this.li=null,this.hi=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Li=null,this.inForeground=!1,this.ki=null,this.qi=null,this.Qi=Number.NEGATIVE_INFINITY,this.$i=T=>Promise.resolve(),!Bp.C())throw new ie(q.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new $1(this,o),this.Ui=t+nR,this.serializer=new pI(p),this.Ki=new Pi(this.Ui,this.Bi,new tR(this.serializer)),this.Pi=new D1,this.Ti=new U1(this.referenceDelegate,this.serializer),this.remoteDocumentCache=RI(this.serializer),this.Ei=new x1,this.window&&this.window.localStorage?this.Wi=this.window.localStorage:(this.Wi=null,E===!1&&Ht(mi,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Gi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ie(q.FAILED_PRECONDITION,kf);return this.zi(),this.ji(),this.Hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ti.getHighestSequenceNumber(e))}).then(e=>{this.li=new Pn(e,this.Oi)}).then(()=>{this.hi=!0}).catch(e=>(this.Ki&&this.Ki.close(),Promise.reject(e)))}Ji(e){return this.$i=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ki.U(async t=>{t.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.xi.enqueueAndForget(async()=>{this.started&&await this.Gi()}))}Gi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Ac(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Yi(e).next(t=>{t||(this.isPrimary=!1,this.xi.enqueueRetryable(()=>this.$i(!1)))})}).next(()=>this.Zi(e)).next(t=>this.isPrimary&&!t?this.Xi(e).next(()=>!1):!!t&&this.es(e).next(()=>!0))).catch(e=>{if(Ni(e))return Y(mi,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Y(mi,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.xi.enqueueRetryable(()=>this.$i(e)),this.isPrimary=e})}Yi(e){return pl(e).get(xo).next(t=>M.resolve(this.ts(t)))}ns(e){return Ac(e).delete(this.clientId)}async rs(){if(this.isPrimary&&!this.ss(this.Qi,Pf)){this.Qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const r=vt(t,Xo);return r.J().next(o=>{const a=this._s(o,Pf),c=o.filter(d=>a.indexOf(d)===-1);return M.forEach(c,d=>r.delete(d.clientId)).next(()=>c)})}).catch(()=>[]);if(this.Wi)for(const t of e)this.Wi.removeItem(this.us(t.clientId))}}Hi(){this.qi=this.xi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Gi().then(()=>this.rs()).then(()=>this.Hi()))}ts(e){return!!e&&e.ownerId===this.clientId}Zi(e){return this.Ni?M.resolve(!0):pl(e).get(xo).next(t=>{if(t!==null&&this.ss(t.leaseTimestampMs,Cf)&&!this.cs(t.ownerId)){if(this.ts(t)&&this.networkEnabled)return!0;if(!this.ts(t)){if(!t.allowTabSynchronization)throw new ie(q.FAILED_PRECONDITION,kf);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ac(e).J().next(r=>this._s(r,Cf).find(o=>{if(this.clientId!==o.clientId){const a=!this.networkEnabled&&o.networkEnabled,c=!this.inForeground&&o.inForeground,d=this.networkEnabled===o.networkEnabled;if(a||c&&d)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&Y(mi,`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}async shutdown(){this.hi=!1,this.ls(),this.qi&&(this.qi.cancel(),this.qi=null),this.hs(),this.Ps(),await this.Ki.runTransaction("shutdown","readwrite",[Wl,Xo],e=>{const t=new Kf(e,Pn.le);return this.Xi(t).next(()=>this.ns(t))}),this.Ki.close(),this.Ts()}_s(e,t){return e.filter(r=>this.ss(r.updateTimeMs,t)&&!this.cs(r.clientId))}Is(){return this.runTransaction("getActiveClients","readonly",e=>Ac(e).J().next(t=>this._s(t,Pf).map(r=>r.clientId)))}get started(){return this.hi}getGlobalsCache(){return this.Pi}getMutationQueue(e,t){return Dh.St(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new F1(e,this.serializer.wt.databaseId)}getDocumentOverlayCache(e){return xh.St(this.serializer,e)}getBundleCache(){return this.Ei}runTransaction(e,t,r){Y(mi,"Starting transaction:",e);const o=t==="readonly"?"readonly":"readwrite",a=function(p){return p===18?MA:p===17?wE:p===16?OA:p===15?Tp:p===14?IE:p===13?EE:p===12?bA:p===11?vE:void le(60245)}(this.Bi);let c;return this.Ki.runTransaction(e,o,a,d=>(c=new Kf(d,this.li?this.li.next():Pn.le),t==="readwrite-primary"?this.Yi(c).next(p=>!!p||this.Zi(c)).next(p=>{if(!p)throw Ht(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.xi.enqueueRetryable(()=>this.$i(!1)),new ie(q.FAILED_PRECONDITION,cE);return r(c)}).next(p=>this.es(c).next(()=>p)):this.Es(c).next(()=>r(c)))).then(d=>(c.raiseOnCommittedEvent(),d))}Es(e){return pl(e).get(xo).next(t=>{if(t!==null&&this.ss(t.leaseTimestampMs,Cf)&&!this.cs(t.ownerId)&&!this.ts(t)&&!(this.Ni||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ie(q.FAILED_PRECONDITION,kf)})}es(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return pl(e).put(xo,t)}static C(){return Pi.C()}Xi(e){const t=pl(e);return t.get(xo).next(r=>this.ts(r)?(Y(mi,"Releasing primary lease."),t.delete(xo)):M.resolve())}ss(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(Ht(`Detected an update time that is in the future: ${e} > ${r}`),!1))}zi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.ki=()=>{this.xi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Gi()))},this.document.addEventListener("visibilitychange",this.ki),this.inForeground=this.document.visibilityState==="visible")}hs(){this.ki&&(this.document.removeEventListener("visibilitychange",this.ki),this.ki=null)}ji(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Li=()=>{this.ls();const t=/(?:Version|Mobile)\/1[456]/;$v()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.xi.enterRestrictedMode(!0),this.xi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Li))}Ps(){this.Li&&(this.window.removeEventListener("pagehide",this.Li),this.Li=null)}cs(e){var t;try{const r=((t=this.Wi)===null||t===void 0?void 0:t.getItem(this.us(e)))!==null;return Y(mi,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Ht(mi,"Failed to get zombied client id.",r),!1}}ls(){if(this.Wi)try{this.Wi.setItem(this.us(this.clientId),String(Date.now()))}catch(e){Ht("Failed to set zombie client id.",e)}}Ts(){if(this.Wi)try{this.Wi.removeItem(this.us(this.clientId))}catch{}}us(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function pl(i){return vt(i,Wl)}function Ac(i){return vt(i,Xo)}function rR(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.ds=r,this.As=o}static Rs(e,t){let r=Re(),o=Re();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:o=o.add(a.doc.key)}return new zp(e,t.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return $v()?8:dE(_t())>0?6:4}()}initialize(e,t){this.ys=e,this.indexManager=t,this.Vs=!0}getDocumentsMatchingQuery(e,t,r,o){const a={result:null};return this.ws(e,t).next(c=>{a.result=c}).next(()=>{if(!a.result)return this.Ss(e,t,o,r).next(c=>{a.result=c})}).next(()=>{if(a.result)return;const c=new iR;return this.bs(e,t,c).next(d=>{if(a.result=d,this.fs)return this.Ds(e,t,c,d.size)})}).next(()=>a.result)}Ds(e,t,r,o){return r.documentReadCount<this.gs?(Mo()<=ke.DEBUG&&Y("QueryEngine","SDK will not create cache indexes for query:",Lo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),M.resolve()):(Mo()<=ke.DEBUG&&Y("QueryEngine","Query:",Lo(t),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.ps*o?(Mo()<=ke.DEBUG&&Y("QueryEngine","The SDK decides to create cache indexes for query:",Lo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Cn(t))):M.resolve())}ws(e,t){if(g_(t))return M.resolve(null);let r=Cn(t);return this.indexManager.getIndexType(e,r).next(o=>o===0?null:(t.limit!==null&&o===1&&(t=Xf(t,null,"F"),r=Cn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const c=Re(...a);return this.ys.getDocuments(e,c).next(d=>this.indexManager.getMinOffset(e,r).next(p=>{const y=this.vs(t,d);return this.Cs(t,y,c,p.readTime)?this.ws(e,Xf(t,null,"F")):this.Fs(e,y,t,p)}))})))}Ss(e,t,r,o){return g_(t)||o.isEqual(fe.min())?M.resolve(null):this.ys.getDocuments(e,r).next(a=>{const c=this.vs(t,a);return this.Cs(t,c,r,o)?M.resolve(null):(Mo()<=ke.DEBUG&&Y("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Lo(t)),this.Fs(e,c,t,sA(o,Nl)).next(d=>d))})}vs(e,t){let r=new ze(zE(e));return t.forEach((o,a)=>{Yl(e,a)&&(r=r.add(a))}),r}Cs(e,t,r,o){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(o)>0)}bs(e,t,r){return Mo()<=ke.DEBUG&&Y("QueryEngine","Using full collection scan to execute query:",Lo(t)),this.ys.getDocumentsMatchingQuery(e,t,gn.min(),r)}Fs(e,t,r,o){return this.ys.getDocumentsMatchingQuery(e,r,o).next(a=>(t.forEach(c=>{a=a.insert(c.key,c)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jp="LocalStore",sR=3e8;class oR{constructor(e,t,r,o){this.persistence=e,this.Ms=t,this.serializer=o,this.xs=new Ze(Ie),this.Os=new Br(a=>ks(a),Ql),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(r)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new PI(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.xs))}}function kI(i,e,t,r){return new oR(i,e,t,r)}async function xI(i,e){const t=Te(i);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next(a=>(o=a,t.Ls(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const c=[],d=[];let p=Re();for(const y of o){c.push(y.batchId);for(const E of y.mutations)p=p.add(E.key)}for(const y of a){d.push(y.batchId);for(const E of y.mutations)p=p.add(E.key)}return t.localDocuments.getDocuments(r,p).next(y=>({ks:y,removedBatchIds:c,addedBatchIds:d}))})})}function aR(i,e){const t=Te(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),a=t.Bs.newChangeBuffer({trackRemovals:!0});return function(d,p,y,E){const w=y.batch,T=w.keys();let U=M.resolve();return T.forEach($=>{U=U.next(()=>E.getEntry(p,$)).next(H=>{const j=y.docVersions.get($);he(j!==null,48541),H.version.compareTo(j)<0&&(w.applyToRemoteDocument(H,y),H.isValidDocument()&&(H.setReadTime(y.commitVersion),E.addEntry(H)))})}),U.next(()=>d.mutationQueue.removeMutationBatch(p,w))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(d){let p=Re();for(let y=0;y<d.mutationResults.length;++y)d.mutationResults[y].transformResults.length>0&&(p=p.add(d.batch.mutations[y].key));return p}(e))).next(()=>t.localDocuments.getDocuments(r,o))})}function DI(i){const e=Te(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ti.getLastRemoteSnapshotVersion(t))}function lR(i,e){const t=Te(i),r=e.snapshotVersion;let o=t.xs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const c=t.Bs.newChangeBuffer({trackRemovals:!0});o=t.xs;const d=[];e.targetChanges.forEach((E,w)=>{const T=o.get(w);if(!T)return;d.push(t.Ti.removeMatchingKeys(a,E.removedDocuments,w).next(()=>t.Ti.addMatchingKeys(a,E.addedDocuments,w)));let U=T.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(w)!==null?U=U.withResumeToken(dt.EMPTY_BYTE_STRING,fe.min()).withLastLimboFreeSnapshotVersion(fe.min()):E.resumeToken.approximateByteSize()>0&&(U=U.withResumeToken(E.resumeToken,r)),o=o.insert(w,U),function(H,j,ve){return H.resumeToken.approximateByteSize()===0||j.snapshotVersion.toMicroseconds()-H.snapshotVersion.toMicroseconds()>=sR?!0:ve.addedDocuments.size+ve.modifiedDocuments.size+ve.removedDocuments.size>0}(T,U,E)&&d.push(t.Ti.updateTargetData(a,U))});let p=mn(),y=Re();if(e.documentUpdates.forEach(E=>{e.resolvedLimboDocuments.has(E)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(a,E))}),d.push(uR(a,c,e.documentUpdates).next(E=>{p=E.qs,y=E.Qs})),!r.isEqual(fe.min())){const E=t.Ti.getLastRemoteSnapshotVersion(a).next(w=>t.Ti.setTargetsMetadata(a,a.currentSequenceNumber,r));d.push(E)}return M.waitFor(d).next(()=>c.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,p,y)).next(()=>p)}).then(a=>(t.xs=o,a))}function uR(i,e,t){let r=Re(),o=Re();return t.forEach(a=>r=r.add(a)),e.getEntries(i,r).next(a=>{let c=mn();return t.forEach((d,p)=>{const y=a.get(d);p.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(d)),p.isNoDocument()&&p.version.isEqual(fe.min())?(e.removeEntry(d,p.readTime),c=c.insert(d,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||p.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(p),c=c.insert(d,p)):Y(jp,"Ignoring outdated watch update for ",d,". Current version:",y.version," Watch version:",p.version)}),{qs:c,Qs:o}})}function cR(i,e){const t=Te(i);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=vs),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function hR(i,e){const t=Te(i);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.Ti.getTargetData(r,e).next(a=>a?(o=a,M.resolve(o)):t.Ti.allocateTargetId(r).next(c=>(o=new xr(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.Ti.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.xs.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.xs=t.xs.insert(r.targetId,r),t.Os.set(e,r.targetId)),r})}async function sp(i,e,t){const r=Te(i),o=r.xs.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,c=>r.persistence.referenceDelegate.removeTarget(c,o))}catch(c){if(!Ni(c))throw c;Y(jp,`Failed to update sequence numbers for target ${e}: ${c}`)}r.xs=r.xs.remove(e),r.Os.delete(o.target)}function G_(i,e,t){const r=Te(i);let o=fe.min(),a=Re();return r.persistence.runTransaction("Execute query","readwrite",c=>function(p,y,E){const w=Te(p),T=w.Os.get(E);return T!==void 0?M.resolve(w.xs.get(T)):w.Ti.getTargetData(y,E)}(r,c,Cn(e)).next(d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(c,d.targetId).next(p=>{a=p})}).next(()=>r.Ms.getDocumentsMatchingQuery(c,e,t?o:fe.min(),t?a:Re())).next(d=>(dR(r,JA(e),d),{documents:d,$s:a})))}function dR(i,e,t){let r=i.Ns.get(e)||fe.min();t.forEach((o,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),i.Ns.set(e,r)}class W_{constructor(){this.activeTargetIds=i1()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class VI{constructor(){this.xo=new W_,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,t,r){this.Oo[e]=t}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new W_,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q_="ConnectivityMonitor";class Y_{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){Y(Q_,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){Y(Q_,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rc=null;function op(){return Rc===null?Rc=function(){return 268435456+Math.round(2147483648*Math.random())}():Rc++,"0x"+Rc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xf="RestConnection",pR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class mR{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Ko=t+"://"+e.host,this.Wo=`projects/${r}/databases/${o}`,this.Go=this.databaseId.database===Yc?`project_id=${r}`:`project_id=${r}&database_id=${o}`}zo(e,t,r,o,a){const c=op(),d=this.jo(e,t.toUriEncodedString());Y(xf,`Sending RPC '${e}' ${c}:`,d,r);const p={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(p,o,a);const{host:y}=new URL(d),E=Kl(y);return this.Jo(e,d,p,r,E).then(w=>(Y(xf,`Received RPC '${e}' ${c}: `,w),w),w=>{throw Ps(xf,`RPC '${e}' ${c} failed with error: `,w,"url: ",d,"request:",r),w})}Yo(e,t,r,o,a,c){return this.zo(e,t,r,o,a)}Ho(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ca}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,a)=>e[a]=o),r&&r.headers.forEach((o,a)=>e[a]=o)}jo(e,t){const r=pR[e];return`${this.Ko}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ft="WebChannelConnection";class yR extends mR{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,o,a){const c=op();return new Promise((d,p)=>{const y=new Zv;y.setWithCredentials(!0),y.listenOnce(eE.COMPLETE,()=>{try{switch(y.getLastErrorCode()){case Cc.NO_ERROR:const w=y.getResponseJson();Y(Ft,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(w)),d(w);break;case Cc.TIMEOUT:Y(Ft,`RPC '${e}' ${c} timed out`),p(new ie(q.DEADLINE_EXCEEDED,"Request time out"));break;case Cc.HTTP_ERROR:const T=y.getStatus();if(Y(Ft,`RPC '${e}' ${c} failed with status:`,T,"response text:",y.getResponseText()),T>0){let U=y.getResponseJson();Array.isArray(U)&&(U=U[0]);const $=U==null?void 0:U.error;if($&&$.status&&$.message){const H=function(ve){const se=ve.toLowerCase().replace(/_/g,"-");return Object.values(q).indexOf(se)>=0?se:q.UNKNOWN}($.status);p(new ie(H,$.message))}else p(new ie(q.UNKNOWN,"Server responded with status "+y.getStatus()))}else p(new ie(q.UNAVAILABLE,"Connection failed."));break;default:le(9055,{l_:e,streamId:c,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{Y(Ft,`RPC '${e}' ${c} completed.`)}});const E=JSON.stringify(o);Y(Ft,`RPC '${e}' ${c} sending request:`,o),y.send(t,"POST",E,r,15)})}T_(e,t,r){const o=op(),a=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=rE(),d=nE(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Ho(p.initMessageHeaders,t,r),p.encodeInitMessageHeaders=!0;const E=a.join("");Y(Ft,`Creating RPC '${e}' stream ${o}: ${E}`,p);const w=c.createWebChannel(E,p);let T=!1,U=!1;const $=new gR({Zo:j=>{U?Y(Ft,`Not sending because RPC '${e}' stream ${o} is closed:`,j):(T||(Y(Ft,`Opening RPC '${e}' stream ${o} transport.`),w.open(),T=!0),Y(Ft,`RPC '${e}' stream ${o} sending:`,j),w.send(j))},Xo:()=>w.close()}),H=(j,ve,se)=>{j.listen(ve,te=>{try{se(te)}catch(pe){setTimeout(()=>{throw pe},0)}})};return H(w,gl.EventType.OPEN,()=>{U||(Y(Ft,`RPC '${e}' stream ${o} transport opened.`),$.__())}),H(w,gl.EventType.CLOSE,()=>{U||(U=!0,Y(Ft,`RPC '${e}' stream ${o} transport closed`),$.u_())}),H(w,gl.EventType.ERROR,j=>{U||(U=!0,Ps(Ft,`RPC '${e}' stream ${o} transport errored. Name:`,j.name,"Message:",j.message),$.u_(new ie(q.UNAVAILABLE,"The operation could not be completed")))}),H(w,gl.EventType.MESSAGE,j=>{var ve;if(!U){const se=j.data[0];he(!!se,16349);const te=se,pe=(te==null?void 0:te.error)||((ve=te[0])===null||ve===void 0?void 0:ve.error);if(pe){Y(Ft,`RPC '${e}' stream ${o} received error:`,pe);const Se=pe.status;let me=function(P){const x=ht[P];if(x!==void 0)return eI(x)}(Se),k=pe.message;me===void 0&&(me=q.INTERNAL,k="Unknown error status: "+Se+" with message "+pe.message),U=!0,$.u_(new ie(me,k)),w.close()}else Y(Ft,`RPC '${e}' stream ${o} received:`,se),$.c_(se)}}),H(d,tE.STAT_EVENT,j=>{j.stat===Uf.PROXY?Y(Ft,`RPC '${e}' stream ${o} detected buffering proxy`):j.stat===Uf.NOPROXY&&Y(Ft,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{$.a_()},0),$}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _R(){return typeof window<"u"?window:null}function Fc(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nh(i){return new v1(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(e,t,r=1e3,o=1.5,a=6e4){this.xi=e,this.timerId=t,this.I_=r,this.E_=o,this.d_=a,this.A_=0,this.R_=null,this.V_=Date.now(),this.reset()}reset(){this.A_=0}m_(){this.A_=this.d_}f_(e){this.cancel();const t=Math.floor(this.A_+this.g_()),r=Math.max(0,Date.now()-this.V_),o=Math.max(0,t-r);o>0&&Y("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.A_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.R_=this.xi.enqueueAfterDelay(this.timerId,o,()=>(this.V_=Date.now(),e())),this.A_*=this.E_,this.A_<this.I_&&(this.A_=this.I_),this.A_>this.d_&&(this.A_=this.d_)}p_(){this.R_!==null&&(this.R_.skipDelay(),this.R_=null)}cancel(){this.R_!==null&&(this.R_.cancel(),this.R_=null)}g_(){return(Math.random()-.5)*this.A_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X_="PersistentStream";class bI{constructor(e,t,r,o,a,c,d,p){this.xi=e,this.y_=r,this.w_=o,this.connection=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.S_=0,this.b_=null,this.D_=null,this.stream=null,this.v_=0,this.C_=new NI(e,t)}F_(){return this.state===1||this.state===5||this.M_()}M_(){return this.state===2||this.state===3}start(){this.v_=0,this.state!==4?this.auth():this.x_()}async stop(){this.F_()&&await this.close(0)}O_(){this.state=0,this.C_.reset()}N_(){this.M_()&&this.b_===null&&(this.b_=this.xi.enqueueAfterDelay(this.y_,6e4,()=>this.B_()))}L_(e){this.k_(),this.stream.send(e)}async B_(){if(this.M_())return this.close(0)}k_(){this.b_&&(this.b_.cancel(),this.b_=null)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}async close(e,t){this.k_(),this.q_(),this.C_.cancel(),this.S_++,e!==4?this.C_.reset():t&&t.code===q.RESOURCE_EXHAUSTED?(Ht(t.toString()),Ht("Using maximum backoff delay to prevent overloading the backend."),this.C_.m_()):t&&t.code===q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Q_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(t)}Q_(){}auth(){this.state=1;const e=this.U_(this.S_),t=this.S_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.S_===t&&this.K_(r,o)},r=>{e(()=>{const o=new ie(q.UNKNOWN,"Fetching auth token failed: "+r.message);return this.W_(o)})})}K_(e,t){const r=this.U_(this.S_);this.stream=this.G_(e,t),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.D_=this.xi.enqueueAfterDelay(this.w_,1e4,()=>(this.M_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(o=>{r(()=>this.W_(o))}),this.stream.onMessage(o=>{r(()=>++this.v_==1?this.z_(o):this.onNext(o))})}x_(){this.state=5,this.C_.f_(async()=>{this.state=0,this.start()})}W_(e){return Y(X_,`close with error: ${e}`),this.stream=null,this.close(4,e)}U_(e){return t=>{this.xi.enqueueAndForget(()=>this.S_===e?t():(Y(X_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class vR extends bI{constructor(e,t,r,o,a,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,c),this.serializer=a}G_(e,t){return this.connection.T_("Listen",e,t)}z_(e){return this.onNext(e)}onNext(e){this.C_.reset();const t=w1(this.serializer,e),r=function(a){if(!("targetChange"in a))return fe.min();const c=a.targetChange;return c.targetIds&&c.targetIds.length?fe.min():c.readTime?Wt(c.readTime):fe.min()}(e);return this.listener.j_(t,r)}H_(e){const t={};t.database=ep(this.serializer),t.addTarget=function(a,c){let d;const p=c.target;if(d=Jc(p)?{documents:lI(a,p)}:{query:uI(a,p).gt},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=rI(a,c.resumeToken);const y=Jf(a,c.expectedCount);y!==null&&(d.expectedCount=y)}else if(c.snapshotVersion.compareTo(fe.min())>0){d.readTime=sa(a,c.snapshotVersion.toTimestamp());const y=Jf(a,c.expectedCount);y!==null&&(d.expectedCount=y)}return d}(this.serializer,e);const r=S1(this.serializer,e);r&&(t.labels=r),this.L_(t)}J_(e){const t={};t.database=ep(this.serializer),t.removeTarget=e,this.L_(t)}}class ER extends bI{constructor(e,t,r,o,a,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,c),this.serializer=a}get Y_(){return this.v_>0}start(){this.lastStreamToken=void 0,super.start()}Q_(){this.Y_&&this.Z_([])}G_(e,t){return this.connection.T_("Write",e,t)}z_(e){return he(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,he(!e.writeResults||e.writeResults.length===0,55816),this.listener.X_()}onNext(e){he(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.C_.reset();const t=T1(e.writeResults,e.commitTime),r=Wt(e.commitTime);return this.listener.ea(r,t)}ta(){const e={};e.database=ep(this.serializer),this.L_(e)}Z_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>th(this.serializer,r))};this.L_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{}class wR extends IR{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=o,this.na=!1}ra(){if(this.na)throw new ie(q.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,t,r,o){return this.ra(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.zo(e,Zf(t,r),o,a,c)).catch(a=>{throw a.name==="FirebaseError"?(a.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ie(q.UNKNOWN,a.toString())})}Yo(e,t,r,o,a){return this.ra(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,d])=>this.connection.Yo(e,Zf(t,r),o,c,d,a)).catch(c=>{throw c.name==="FirebaseError"?(c.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ie(q.UNKNOWN,c.toString())})}terminate(){this.na=!0,this.connection.terminate()}}class TR{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ia=0,this.sa=null,this.oa=!0}_a(){this.ia===0&&(this.aa("Unknown"),this.sa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.sa=null,this.ua("Backend didn't respond within 10 seconds."),this.aa("Offline"),Promise.resolve())))}ca(e){this.state==="Online"?this.aa("Unknown"):(this.ia++,this.ia>=1&&(this.la(),this.ua(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.aa("Offline")))}set(e){this.la(),this.ia=0,e==="Online"&&(this.oa=!1),this.aa(e)}aa(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ua(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.oa?(Ht(t),this.oa=!1):Y("OnlineStateTracker",t)}la(){this.sa!==null&&(this.sa.cancel(),this.sa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ns="RemoteStore";class SR{constructor(e,t,r,o,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.ha=[],this.Pa=new Map,this.Ta=new Set,this.Ia=[],this.Ea=a,this.Ea.No(c=>{r.enqueueAndForget(async()=>{Os(this)&&(Y(Ns,"Restarting streams for network reachability change."),await async function(p){const y=Te(p);y.Ta.add(4),await Jl(y),y.da.set("Unknown"),y.Ta.delete(4),await bh(y)}(this))})}),this.da=new TR(r,o)}}async function bh(i){if(Os(i))for(const e of i.Ia)await e(!0)}async function Jl(i){for(const e of i.Ia)await e(!1)}function OI(i,e){const t=Te(i);t.Pa.has(e.targetId)||(t.Pa.set(e.targetId,e),Hp(t)?Kp(t):da(t).M_()&&qp(t,e))}function $p(i,e){const t=Te(i),r=da(t);t.Pa.delete(e),r.M_()&&MI(t,e),t.Pa.size===0&&(r.M_()?r.N_():Os(t)&&t.da.set("Unknown"))}function qp(i,e){if(i.Aa.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(fe.min())>0){const t=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}da(i).H_(e)}function MI(i,e){i.Aa.Ke(e),da(i).J_(e)}function Kp(i){i.Aa=new m1({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>i.Pa.get(e)||null,Pt:()=>i.datastore.serializer.databaseId}),da(i).start(),i.da._a()}function Hp(i){return Os(i)&&!da(i).F_()&&i.Pa.size>0}function Os(i){return Te(i).Ta.size===0}function LI(i){i.Aa=void 0}async function AR(i){i.da.set("Online")}async function RR(i){i.Pa.forEach((e,t)=>{qp(i,e)})}async function PR(i,e){LI(i),Hp(i)?(i.da.ca(e),Kp(i)):i.da.set("Unknown")}async function CR(i,e,t){if(i.da.set("Online"),e instanceof nI&&e.state===2&&e.cause)try{await async function(o,a){const c=a.cause;for(const d of a.targetIds)o.Pa.has(d)&&(await o.remoteSyncer.rejectListen(d,c),o.Pa.delete(d),o.Aa.removeTarget(d))}(i,e)}catch(r){Y(Ns,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await oh(i,r)}else if(e instanceof Mc?i.Aa.Xe(e):e instanceof tI?i.Aa.ot(e):i.Aa.nt(e),!t.isEqual(fe.min()))try{const r=await DI(i.localStore);t.compareTo(r)>=0&&await function(a,c){const d=a.Aa.It(c);return d.targetChanges.forEach((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const E=a.Pa.get(y);E&&a.Pa.set(y,E.withResumeToken(p.resumeToken,c))}}),d.targetMismatches.forEach((p,y)=>{const E=a.Pa.get(p);if(!E)return;a.Pa.set(p,E.withResumeToken(dt.EMPTY_BYTE_STRING,E.snapshotVersion)),MI(a,p);const w=new xr(E.target,p,y,E.sequenceNumber);qp(a,w)}),a.remoteSyncer.applyRemoteEvent(d)}(i,t)}catch(r){Y(Ns,"Failed to raise snapshot:",r),await oh(i,r)}}async function oh(i,e,t){if(!Ni(e))throw e;i.Ta.add(1),await Jl(i),i.da.set("Offline"),t||(t=()=>DI(i.localStore)),i.asyncQueue.enqueueRetryable(async()=>{Y(Ns,"Retrying IndexedDB access"),await t(),i.Ta.delete(1),await bh(i)})}function FI(i,e){return e().catch(t=>oh(i,t,e))}async function Zl(i){const e=Te(i),t=Di(e);let r=e.ha.length>0?e.ha[e.ha.length-1].batchId:vs;for(;kR(e);)try{const o=await cR(e.localStore,r);if(o===null){e.ha.length===0&&t.N_();break}r=o.batchId,xR(e,o)}catch(o){await oh(e,o)}UI(e)&&BI(e)}function kR(i){return Os(i)&&i.ha.length<10}function xR(i,e){i.ha.push(e);const t=Di(i);t.M_()&&t.Y_&&t.Z_(e.mutations)}function UI(i){return Os(i)&&!Di(i).F_()&&i.ha.length>0}function BI(i){Di(i).start()}async function DR(i){Di(i).ta()}async function VR(i){const e=Di(i);for(const t of i.ha)e.Z_(t.mutations)}async function NR(i,e,t){const r=i.ha.shift(),o=Vp.from(r,e,t);await FI(i,()=>i.remoteSyncer.applySuccessfulWrite(o)),await Zl(i)}async function bR(i,e){e&&Di(i).Y_&&await async function(r,o){if(function(c){return f1(c)&&c!==q.ABORTED}(o.code)){const a=r.ha.shift();Di(r).O_(),await FI(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,o)),await Zl(r)}}(i,e),UI(i)&&BI(i)}async function J_(i,e){const t=Te(i);t.asyncQueue.verifyOperationInProgress(),Y(Ns,"RemoteStore received new credentials");const r=Os(t);t.Ta.add(3),await Jl(t),r&&t.da.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ta.delete(3),await bh(t)}async function OR(i,e){const t=Te(i);e?(t.Ta.delete(2),await bh(t)):e||(t.Ta.add(2),await Jl(t),t.da.set("Unknown"))}function da(i){return i.Ra||(i.Ra=function(t,r,o){const a=Te(t);return a.ra(),new vR(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)}(i.datastore,i.asyncQueue,{e_:AR.bind(null,i),n_:RR.bind(null,i),i_:PR.bind(null,i),j_:CR.bind(null,i)}),i.Ia.push(async e=>{e?(i.Ra.O_(),Hp(i)?Kp(i):i.da.set("Unknown")):(await i.Ra.stop(),LI(i))})),i.Ra}function Di(i){return i.Va||(i.Va=function(t,r,o){const a=Te(t);return a.ra(),new ER(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)}(i.datastore,i.asyncQueue,{e_:()=>Promise.resolve(),n_:DR.bind(null,i),i_:bR.bind(null,i),X_:VR.bind(null,i),ea:NR.bind(null,i)}),i.Ia.push(async e=>{e?(i.Va.O_(),await Zl(i)):(await i.Va.stop(),i.ha.length>0&&(Y(Ns,`Stopping write stream with ${i.ha.length} pending writes`),i.ha=[]))})),i.Va}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(e,t,r,o,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=a,this.deferred=new lr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,o,a){const c=Date.now()+r,d=new Gp(e,t,c,o,a);return d.start(r),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ie(q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Wp(i,e){if(Ht("AsyncQueue",`${e}: ${i}`),Ni(i))return new ie(q.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{static emptySet(e){return new jo(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ee.comparator(t.key,r.key):(t,r)=>ee.comparator(t.key,r.key),this.keyedMap=yl(),this.sortedSet=new Ze(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof jo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=r.getNext().key;if(!o.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new jo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z_{constructor(){this.ma=new Ze(ee.comparator)}track(e){const t=e.doc.key,r=this.ma.get(t);r?e.type!==0&&r.type===3?this.ma=this.ma.insert(t,e):e.type===3&&r.type!==1?this.ma=this.ma.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ma=this.ma.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ma=this.ma.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ma=this.ma.remove(t):e.type===1&&r.type===2?this.ma=this.ma.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ma=this.ma.insert(t,{type:2,doc:e.doc}):le(63341,{Vt:e,fa:r}):this.ma=this.ma.insert(t,e)}ga(){const e=[];return this.ma.inorderTraversal((t,r)=>{e.push(r)}),e}}class oa{constructor(e,t,r,o,a,c,d,p,y){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,t,r,o,a){const c=[];return t.forEach(d=>{c.push({type:0,doc:d})}),new oa(e,t,jo.emptySet(t),c,r,o,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Rh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(){this.pa=void 0,this.ya=[]}wa(){return this.ya.some(e=>e.Sa())}}class LR{constructor(){this.queries=ev(),this.onlineState="Unknown",this.ba=new Set}terminate(){(function(t,r){const o=Te(t),a=o.queries;o.queries=ev(),a.forEach((c,d)=>{for(const p of d.ya)p.onError(r)})})(this,new ie(q.ABORTED,"Firestore shutting down"))}}function ev(){return new Br(i=>BE(i),Rh)}async function zI(i,e){const t=Te(i);let r=3;const o=e.query;let a=t.queries.get(o);a?!a.wa()&&e.Sa()&&(r=2):(a=new MR,r=e.Sa()?0:1);try{switch(r){case 0:a.pa=await t.onListen(o,!0);break;case 1:a.pa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(c){const d=Wp(c,`Initialization of query '${Lo(e.query)}' failed`);return void e.onError(d)}t.queries.set(o,a),a.ya.push(e),e.Da(t.onlineState),a.pa&&e.va(a.pa)&&Qp(t)}async function jI(i,e){const t=Te(i),r=e.query;let o=3;const a=t.queries.get(r);if(a){const c=a.ya.indexOf(e);c>=0&&(a.ya.splice(c,1),a.ya.length===0?o=e.Sa()?0:1:!a.wa()&&e.Sa()&&(o=2))}switch(o){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function FR(i,e){const t=Te(i);let r=!1;for(const o of e){const a=o.query,c=t.queries.get(a);if(c){for(const d of c.ya)d.va(o)&&(r=!0);c.pa=o}}r&&Qp(t)}function UR(i,e,t){const r=Te(i),o=r.queries.get(e);if(o)for(const a of o.ya)a.onError(t);r.queries.delete(e)}function Qp(i){i.ba.forEach(e=>{e.next()})}var ap,tv;(tv=ap||(ap={})).Ca="default",tv.Cache="cache";class $I{constructor(e,t,r){this.query=e,this.Fa=t,this.Ma=!1,this.xa=null,this.onlineState="Unknown",this.options=r||{}}va(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new oa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Ma?this.Oa(e)&&(this.Fa.next(e),t=!0):this.Na(e,this.onlineState)&&(this.Ba(e),t=!0),this.xa=e,t}onError(e){this.Fa.error(e)}Da(e){this.onlineState=e;let t=!1;return this.xa&&!this.Ma&&this.Na(this.xa,e)&&(this.Ba(this.xa),t=!0),t}Na(e,t){if(!e.fromCache||!this.Sa())return!0;const r=t!=="Offline";return(!this.options.La||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Oa(e){if(e.docChanges.length>0)return!0;const t=this.xa&&this.xa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Ba(e){e=oa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Ma=!0,this.Fa.next(e)}Sa(){return this.options.source!==ap.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(e){this.key=e}}class KI{constructor(e){this.key=e}}class BR{constructor(e,t){this.query=e,this.Ga=t,this.za=null,this.hasCachedResults=!1,this.current=!1,this.ja=Re(),this.mutatedKeys=Re(),this.Ha=zE(e),this.Ja=new jo(this.Ha)}get Ya(){return this.Ga}Za(e,t){const r=t?t.Xa:new Z_,o=t?t.Ja:this.Ja;let a=t?t.mutatedKeys:this.mutatedKeys,c=o,d=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((E,w)=>{const T=o.get(E),U=Yl(this.query,w)?w:null,$=!!T&&this.mutatedKeys.has(T.key),H=!!U&&(U.hasLocalMutations||this.mutatedKeys.has(U.key)&&U.hasCommittedMutations);let j=!1;T&&U?T.data.isEqual(U.data)?$!==H&&(r.track({type:3,doc:U}),j=!0):this.eu(T,U)||(r.track({type:2,doc:U}),j=!0,(p&&this.Ha(U,p)>0||y&&this.Ha(U,y)<0)&&(d=!0)):!T&&U?(r.track({type:0,doc:U}),j=!0):T&&!U&&(r.track({type:1,doc:T}),j=!0,(p||y)&&(d=!0)),j&&(U?(c=c.add(U),a=H?a.add(E):a.delete(E)):(c=c.delete(E),a=a.delete(E)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const E=this.query.limitType==="F"?c.last():c.first();c=c.delete(E.key),a=a.delete(E.key),r.track({type:1,doc:E})}return{Ja:c,Xa:r,Cs:d,mutatedKeys:a}}eu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,o){const a=this.Ja;this.Ja=e.Ja,this.mutatedKeys=e.mutatedKeys;const c=e.Xa.ga();c.sort((E,w)=>function(U,$){const H=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return le(20277,{Vt:j})}};return H(U)-H($)}(E.type,w.type)||this.Ha(E.doc,w.doc)),this.tu(r),o=o!=null&&o;const d=t&&!o?this.nu():[],p=this.ja.size===0&&this.current&&!o?1:0,y=p!==this.za;return this.za=p,c.length!==0||y?{snapshot:new oa(this.query,e.Ja,a,c,e.mutatedKeys,p===0,y,!1,!!r&&r.resumeToken.approximateByteSize()>0),ru:d}:{ru:d}}Da(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ja:this.Ja,Xa:new Z_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ru:[]}}iu(e){return!this.Ga.has(e)&&!!this.Ja.has(e)&&!this.Ja.get(e).hasLocalMutations}tu(e){e&&(e.addedDocuments.forEach(t=>this.Ga=this.Ga.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ga=this.Ga.delete(t)),this.current=e.current)}nu(){if(!this.current)return[];const e=this.ja;this.ja=Re(),this.Ja.forEach(r=>{this.iu(r.key)&&(this.ja=this.ja.add(r.key))});const t=[];return e.forEach(r=>{this.ja.has(r)||t.push(new KI(r))}),this.ja.forEach(r=>{e.has(r)||t.push(new qI(r))}),t}su(e){this.Ga=e.$s,this.ja=Re();const t=this.Za(e.documents);return this.applyChanges(t,!0)}ou(){return oa.fromInitialDocuments(this.query,this.Ja,this.mutatedKeys,this.za===0,this.hasCachedResults)}}const Yp="SyncEngine";class zR{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class jR{constructor(e){this.key=e,this._u=!1}}class $R{constructor(e,t,r,o,a,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.au={},this.uu=new Br(d=>BE(d),Rh),this.cu=new Map,this.lu=new Set,this.hu=new Ze(ee.comparator),this.Pu=new Map,this.Tu=new Fp,this.Iu={},this.Eu=new Map,this.du=Vs.lr(),this.onlineState="Unknown",this.Au=void 0}get isPrimaryClient(){return this.Au===!0}}async function qR(i,e,t=!0){const r=XI(i);let o;const a=r.uu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),o=a.view.ou()):o=await HI(r,e,t,!0),o}async function KR(i,e){const t=XI(i);await HI(t,e,!0,!1)}async function HI(i,e,t,r){const o=await hR(i.localStore,Cn(e)),a=o.targetId,c=i.sharedClientState.addLocalQueryTarget(a,t);let d;return r&&(d=await HR(i,e,a,c==="current",o.resumeToken)),i.isPrimaryClient&&t&&OI(i.remoteStore,o),d}async function HR(i,e,t,r,o){i.Ru=(w,T,U)=>async function(H,j,ve,se){let te=j.view.Za(ve);te.Cs&&(te=await G_(H.localStore,j.query,!1).then(({documents:k})=>j.view.Za(k,te)));const pe=se&&se.targetChanges.get(j.targetId),Se=se&&se.targetMismatches.get(j.targetId)!=null,me=j.view.applyChanges(te,H.isPrimaryClient,pe,Se);return rv(H,j.targetId,me.ru),me.snapshot}(i,w,T,U);const a=await G_(i.localStore,e,!0),c=new BR(e,a.$s),d=c.Za(a.documents),p=Xl.createSynthesizedTargetChangeForCurrentChange(t,r&&i.onlineState!=="Offline",o),y=c.applyChanges(d,i.isPrimaryClient,p);rv(i,t,y.ru);const E=new zR(e,t,c);return i.uu.set(e,E),i.cu.has(t)?i.cu.get(t).push(e):i.cu.set(t,[e]),y.snapshot}async function GR(i,e,t){const r=Te(i),o=r.uu.get(e),a=r.cu.get(o.targetId);if(a.length>1)return r.cu.set(o.targetId,a.filter(c=>!Rh(c,e))),void r.uu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await sp(r.localStore,o.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(o.targetId),t&&$p(r.remoteStore,o.targetId),lp(r,o.targetId)}).catch(bs)):(lp(r,o.targetId),await sp(r.localStore,o.targetId,!0))}async function WR(i,e){const t=Te(i),r=t.uu.get(e),o=t.cu.get(r.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),$p(t.remoteStore,r.targetId))}async function QR(i,e,t){const r=JI(i);try{const o=await function(c,d){const p=Te(c),y=rt.now(),E=d.reduce((U,$)=>U.add($.key),Re());let w,T;return p.persistence.runTransaction("Locally write mutations","readwrite",U=>{let $=mn(),H=Re();return p.Bs.getEntries(U,E).next(j=>{$=j,$.forEach((ve,se)=>{se.isValidDocument()||(H=H.add(ve))})}).next(()=>p.localDocuments.getOverlayedDocuments(U,$)).next(j=>{w=j;const ve=[];for(const se of d){const te=h1(se,w.get(se.key).overlayedDocument);te!=null&&ve.push(new zr(se.key,te,VE(te.value.mapValue),Gt.exists(!0)))}return p.mutationQueue.addMutationBatch(U,y,ve,d)}).next(j=>{T=j;const ve=j.applyToLocalDocumentSet(w,H);return p.documentOverlayCache.saveOverlays(U,j.batchId,ve)})}).then(()=>({batchId:T.batchId,changes:$E(w)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(c,d,p){let y=c.Iu[c.currentUser.toKey()];y||(y=new Ze(Ie)),y=y.insert(d,p),c.Iu[c.currentUser.toKey()]=y}(r,o.batchId,t),await eu(r,o.changes),await Zl(r.remoteStore)}catch(o){const a=Wp(o,"Failed to persist write");t.reject(a)}}async function GI(i,e){const t=Te(i);try{const r=await lR(t.localStore,e);e.targetChanges.forEach((o,a)=>{const c=t.Pu.get(a);c&&(he(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?c._u=!0:o.modifiedDocuments.size>0?he(c._u,14607):o.removedDocuments.size>0&&(he(c._u,42227),c._u=!1))}),await eu(t,r,e)}catch(r){await bs(r)}}function nv(i,e,t){const r=Te(i);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const o=[];r.uu.forEach((a,c)=>{const d=c.view.Da(e);d.snapshot&&o.push(d.snapshot)}),function(c,d){const p=Te(c);p.onlineState=d;let y=!1;p.queries.forEach((E,w)=>{for(const T of w.ya)T.Da(d)&&(y=!0)}),y&&Qp(p)}(r.eventManager,e),o.length&&r.au.j_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function YR(i,e,t){const r=Te(i);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.Pu.get(e),a=o&&o.key;if(a){let c=new Ze(ee.comparator);c=c.insert(a,st.newNoDocument(a,fe.min()));const d=Re().add(a),p=new kh(fe.min(),new Map,new Ze(Ie),c,d);await GI(r,p),r.hu=r.hu.remove(a),r.Pu.delete(e),Xp(r)}else await sp(r.localStore,e,!1).then(()=>lp(r,e,t)).catch(bs)}async function XR(i,e){const t=Te(i),r=e.batch.batchId;try{const o=await aR(t.localStore,e);QI(t,r,null),WI(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await eu(t,o)}catch(o){await bs(o)}}async function JR(i,e,t){const r=Te(i);try{const o=await function(c,d){const p=Te(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let E;return p.mutationQueue.lookupMutationBatch(y,d).next(w=>(he(w!==null,37113),E=w.keys(),p.mutationQueue.removeMutationBatch(y,w))).next(()=>p.mutationQueue.performConsistencyCheck(y)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(y,E,d)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,E)).next(()=>p.localDocuments.getDocuments(y,E))})}(r.localStore,e);QI(r,e,t),WI(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await eu(r,o)}catch(o){await bs(o)}}function WI(i,e){(i.Eu.get(e)||[]).forEach(t=>{t.resolve()}),i.Eu.delete(e)}function QI(i,e,t){const r=Te(i);let o=r.Iu[r.currentUser.toKey()];if(o){const a=o.get(e);a&&(t?a.reject(t):a.resolve(),o=o.remove(e)),r.Iu[r.currentUser.toKey()]=o}}function lp(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const r of i.cu.get(e))i.uu.delete(r),t&&i.au.Vu(r,t);i.cu.delete(e),i.isPrimaryClient&&i.Tu.Hr(e).forEach(r=>{i.Tu.containsKey(r)||YI(i,r)})}function YI(i,e){i.lu.delete(e.path.canonicalString());const t=i.hu.get(e);t!==null&&($p(i.remoteStore,t),i.hu=i.hu.remove(e),i.Pu.delete(t),Xp(i))}function rv(i,e,t){for(const r of t)r instanceof qI?(i.Tu.addReference(r.key,e),ZR(i,r)):r instanceof KI?(Y(Yp,"Document no longer in limbo: "+r.key),i.Tu.removeReference(r.key,e),i.Tu.containsKey(r.key)||YI(i,r.key)):le(19791,{mu:r})}function ZR(i,e){const t=e.key,r=t.path.canonicalString();i.hu.get(t)||i.lu.has(r)||(Y(Yp,"New document in limbo: "+t),i.lu.add(r),Xp(i))}function Xp(i){for(;i.lu.size>0&&i.hu.size<i.maxConcurrentLimboResolutions;){const e=i.lu.values().next().value;i.lu.delete(e);const t=new ee(Be.fromString(e)),r=i.du.next();i.Pu.set(r,new jR(t)),i.hu=i.hu.insert(t,r),OI(i.remoteStore,new xr(Cn(Ah(t.path)),r,"TargetPurposeLimboResolution",Pn.le))}}async function eu(i,e,t){const r=Te(i),o=[],a=[],c=[];r.uu.isEmpty()||(r.uu.forEach((d,p)=>{c.push(r.Ru(p,e,t).then(y=>{var E;if((y||t)&&r.isPrimaryClient){const w=y?!y.fromCache:(E=t==null?void 0:t.targetChanges.get(p.targetId))===null||E===void 0?void 0:E.current;r.sharedClientState.updateQueryState(p.targetId,w?"current":"not-current")}if(y){o.push(y);const w=zp.Rs(p.targetId,y);a.push(w)}}))}),await Promise.all(c),r.au.j_(o),await async function(p,y){const E=Te(p);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",w=>M.forEach(y,T=>M.forEach(T.ds,U=>E.persistence.referenceDelegate.addReference(w,T.targetId,U)).next(()=>M.forEach(T.As,U=>E.persistence.referenceDelegate.removeReference(w,T.targetId,U)))))}catch(w){if(!Ni(w))throw w;Y(jp,"Failed to update sequence numbers: "+w)}for(const w of y){const T=w.targetId;if(!w.fromCache){const U=E.xs.get(T),$=U.snapshotVersion,H=U.withLastLimboFreeSnapshotVersion($);E.xs=E.xs.insert(T,H)}}}(r.localStore,a))}async function eP(i,e){const t=Te(i);if(!t.currentUser.isEqual(e)){Y(Yp,"User change. New user:",e.toKey());const r=await xI(t.localStore,e);t.currentUser=e,function(a,c){a.Eu.forEach(d=>{d.forEach(p=>{p.reject(new ie(q.CANCELLED,c))})}),a.Eu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await eu(t,r.ks)}}function tP(i,e){const t=Te(i),r=t.Pu.get(e);if(r&&r._u)return Re().add(r.key);{let o=Re();const a=t.cu.get(e);if(!a)return o;for(const c of a){const d=t.uu.get(c);o=o.unionWith(d.view.Ya)}return o}}function XI(i){const e=Te(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=GI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=tP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=YR.bind(null,e),e.au.j_=FR.bind(null,e.eventManager),e.au.Vu=UR.bind(null,e.eventManager),e}function JI(i){const e=Te(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=XR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=JR.bind(null,e),e}class $l{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Nh(e.databaseInfo.databaseId),this.sharedClientState=this.pu(e),this.persistence=this.yu(e),await this.persistence.start(),this.localStore=this.wu(e),this.gcScheduler=this.Su(e,this.localStore),this.indexBackfillerScheduler=this.bu(e,this.localStore)}Su(e,t){return null}bu(e,t){return null}wu(e){return kI(this.persistence,new CI,e.initialUser,this.serializer)}yu(e){return new Up(Vh.fi,this.serializer)}pu(e){return new VI}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}$l.provider={build:()=>new $l};class nP extends $l{constructor(e){super(),this.cacheSizeBytes=e}Su(e,t){he(this.persistence.referenceDelegate instanceof sh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new TI(r,e.asyncQueue,t)}yu(e){const t=this.cacheSizeBytes!==void 0?Ut.withCacheSize(this.cacheSizeBytes):Ut.DEFAULT;return new Up(r=>sh.fi(r,t),this.serializer)}}class rP extends $l{constructor(e,t,r){super(),this.Du=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Du.initialize(this,e),await JI(this.Du.syncEngine),await Zl(this.Du.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}wu(e){return kI(this.persistence,new CI,e.initialUser,this.serializer)}Su(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new TI(r,e.asyncQueue,t)}bu(e,t){const r=new uA(t,this.persistence);return new lA(e.asyncQueue,r)}yu(e){const t=rR(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Ut.withCacheSize(this.cacheSizeBytes):Ut.DEFAULT;return new Bp(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,_R(),Fc(),this.serializer,this.sharedClientState,!!this.forceOwnership)}pu(e){return new VI}}class ah{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>nv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=eP.bind(null,this.syncEngine),await OR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new LR}()}createDatastore(e){const t=Nh(e.databaseInfo.databaseId),r=function(a){return new yR(a)}(e.databaseInfo);return function(a,c,d,p){return new wR(a,c,d,p)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,o,a,c,d){return new SR(r,o,a,c,d)}(this.localStore,this.datastore,e.asyncQueue,t=>nv(this.syncEngine,t,0),function(){return Y_.C()?new Y_:new fR}())}createSyncEngine(e,t){return function(o,a,c,d,p,y,E){const w=new $R(o,a,c,d,p,y);return E&&(w.Au=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(o){const a=Te(o);Y(Ns,"RemoteStore shutting down."),a.Ta.add(5),await Jl(a),a.Ea.shutdown(),a.da.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}ah.provider={build:()=>new ah};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.vu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.vu(this.observer.error,e):Ht("Uncaught Error in snapshot listener:",e.toString()))}Cu(){this.muted=!0}vu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vi="FirestoreClient";class iP{constructor(e,t,r,o,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=xt.UNAUTHENTICATED,this.clientId=aE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async c=>{Y(Vi,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(r,c=>(Y(Vi,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new lr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Wp(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Df(i,e){i.asyncQueue.verifyOperationInProgress(),Y(Vi,"Initializing OfflineComponentProvider");const t=i.configuration;await e.initialize(t);let r=t.initialUser;i.setCredentialChangeListener(async o=>{r.isEqual(o)||(await xI(e.localStore,o),r=o)}),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}async function iv(i,e){i.asyncQueue.verifyOperationInProgress();const t=await sP(i);Y(Vi,"Initializing OnlineComponentProvider"),await e.initialize(t,i.configuration),i.setCredentialChangeListener(r=>J_(e.remoteStore,r)),i.setAppCheckTokenChangeListener((r,o)=>J_(e.remoteStore,o)),i._onlineComponents=e}async function sP(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){Y(Vi,"Using user provided OfflineComponentProvider");try{await Df(i,i._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(o){return o.name==="FirebaseError"?o.code===q.FAILED_PRECONDITION||o.code===q.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(t))throw t;Ps("Error using user provided cache. Falling back to memory cache: "+t),await Df(i,new $l)}}else Y(Vi,"Using default OfflineComponentProvider"),await Df(i,new nP(void 0));return i._offlineComponents}async function ew(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(Y(Vi,"Using user provided OnlineComponentProvider"),await iv(i,i._uninitializedComponentsProvider._online)):(Y(Vi,"Using default OnlineComponentProvider"),await iv(i,new ah))),i._onlineComponents}function oP(i){return ew(i).then(e=>e.syncEngine)}async function tw(i){const e=await ew(i),t=e.eventManager;return t.onListen=qR.bind(null,e.syncEngine),t.onUnlisten=GR.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=KR.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=WR.bind(null,e.syncEngine),t}function aP(i,e,t={}){const r=new lr;return i.asyncQueue.enqueueAndForget(async()=>function(a,c,d,p,y){const E=new ZI({next:T=>{E.Cu(),c.enqueueAndForget(()=>jI(a,w));const U=T.docs.has(d);!U&&T.fromCache?y.reject(new ie(q.UNAVAILABLE,"Failed to get document because the client is offline.")):U&&T.fromCache&&p&&p.source==="server"?y.reject(new ie(q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(T)},error:T=>y.reject(T)}),w=new $I(Ah(d.path),E,{includeMetadataChanges:!0,La:!0});return zI(a,w)}(await tw(i),i.asyncQueue,e,t,r)),r.promise}function lP(i,e,t={}){const r=new lr;return i.asyncQueue.enqueueAndForget(async()=>function(a,c,d,p,y){const E=new ZI({next:T=>{E.Cu(),c.enqueueAndForget(()=>jI(a,w)),T.fromCache&&p.source==="server"?y.reject(new ie(q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(T)},error:T=>y.reject(T)}),w=new $I(d,E,{includeMetadataChanges:!0,La:!0});return zI(a,w)}(await tw(i),i.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nw(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sv=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rw(i,e,t){if(!t)throw new ie(q.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function uP(i,e,t,r){if(e===!0&&r===!0)throw new ie(q.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function ov(i){if(!ee.isDocumentKey(i))throw new ie(q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function av(i){if(ee.isDocumentKey(i))throw new ie(q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Jp(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":le(12329,{type:typeof i})}function Hn(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new ie(q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Jp(i);throw new ie(q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iw="firestore.googleapis.com",lv=!0;class uv{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ie(q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=iw,this.ssl=lv}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:lv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=vI;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<B1)throw new ie(q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}uP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=nw((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new ie(q.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new ie(q.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new ie(q.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,o){return r.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Oh{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new uv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ie(q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ie(q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new uv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new YS;switch(r.type){case"firstParty":return new eA(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ie(q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,gh("Firestore",this._settings.isUsingEmulator),this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=sv.get(t);r&&(Y("ComponentProvider","Removing Datastore"),sv.delete(t),r.terminate())}(this),Promise.resolve()}}function cP(i,e,t,r={}){var o;i=Hn(i,Oh);const a=Kl(e),c=i._getSettings(),d=Object.assign(Object.assign({},c),{emulatorOptions:i._getEmulatorOptions()}),p=`${e}:${t}`;c.host!==iw&&c.host!==p&&Ps("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y=Object.assign(Object.assign({},c),{host:p,ssl:a,emulatorOptions:r});if(!Ss(y,d)&&(i._setSettings(y),a&&(zv(`https://${p}`),gh("Firestore",!0)),r.mockUserToken)){let E,w;if(typeof r.mockUserToken=="string")E=r.mockUserToken,w=xt.MOCK_USER;else{E=S0(r.mockUserToken,(o=i._app)===null||o===void 0?void 0:o.options.projectId);const T=r.mockUserToken.sub||r.mockUserToken.user_id;if(!T)throw new ie(q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new xt(T)}i._authCredentials=new XS(new sE(E,w))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Mh(this.firestore,e,this._query)}}class sn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ci(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new sn(this.firestore,e,this._key)}}class Ci extends Mh{constructor(e,t,r){super(e,t,Ah(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new sn(this.firestore,null,new ee(e))}withConverter(e){return new Ci(this.firestore,e,this._path)}}function Zp(i,e,...t){if(i=on(i),rw("collection","path",e),i instanceof Oh){const r=Be.fromString(e,...t);return av(r),new Ci(i,null,r)}{if(!(i instanceof sn||i instanceof Ci))throw new ie(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(Be.fromString(e,...t));return av(r),new Ci(i.firestore,null,r)}}function tu(i,e,...t){if(i=on(i),arguments.length===1&&(e=aE.newId()),rw("doc","path",e),i instanceof Oh){const r=Be.fromString(e,...t);return ov(r),new sn(i,null,new ee(r))}{if(!(i instanceof sn||i instanceof Ci))throw new ie(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(Be.fromString(e,...t));return ov(r),new sn(i.firestore,i instanceof Ci?i.converter:null,new ee(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cv="AsyncQueue";class hv{constructor(e=Promise.resolve()){this.zu=[],this.ju=!1,this.Hu=[],this.Ju=null,this.Yu=!1,this.Zu=!1,this.Xu=[],this.C_=new NI(this,"async_queue_retry"),this.ec=()=>{const r=Fc();r&&Y(cv,"Visibility state changed to "+r.visibilityState),this.C_.p_()},this.tc=e;const t=Fc();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.ec)}get isShuttingDown(){return this.ju}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.nc(),this.rc(e)}enterRestrictedMode(e){if(!this.ju){this.ju=!0,this.Zu=e||!1;const t=Fc();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.ec)}}enqueue(e){if(this.nc(),this.ju)return new Promise(()=>{});const t=new lr;return this.rc(()=>this.ju&&this.Zu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.zu.push(e),this.sc()))}async sc(){if(this.zu.length!==0){try{await this.zu[0](),this.zu.shift(),this.C_.reset()}catch(e){if(!Ni(e))throw e;Y(cv,"Operation failed with retryable error: "+e)}this.zu.length>0&&this.C_.f_(()=>this.sc())}}rc(e){const t=this.tc.then(()=>(this.Yu=!0,e().catch(r=>{throw this.Ju=r,this.Yu=!1,Ht("INTERNAL UNHANDLED ERROR: ",dv(r)),r}).then(r=>(this.Yu=!1,r))));return this.tc=t,t}enqueueAfterDelay(e,t,r){this.nc(),this.Xu.indexOf(e)>-1&&(t=0);const o=Gp.createAndSchedule(this,e,t,r,a=>this.oc(a));return this.Hu.push(o),o}nc(){this.Ju&&le(47125,{_c:dv(this.Ju)})}verifyOperationInProgress(){}async ac(){let e;do e=this.tc,await e;while(e!==this.tc)}uc(e){for(const t of this.Hu)if(t.timerId===e)return!0;return!1}cc(e){return this.ac().then(()=>{this.Hu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Hu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.ac()})}lc(e){this.Xu.push(e)}oc(e){const t=this.Hu.indexOf(e);this.Hu.splice(t,1)}}function dv(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}class Ms extends Oh{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new hv,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new hv(e),this._firestoreClient=void 0,await e}}}function hP(i,e){const t=typeof i=="object"?i:Qv(),r=typeof i=="string"?i:Yc,o=gp(t,"firestore").getImmediate({identifier:r});if(!o._initialized){const a=w0("firestore");a&&cP(o,...a)}return o}function em(i){if(i._terminated)throw new ie(q.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||sw(i),i._firestoreClient}function sw(i){var e,t,r;const o=i._freezeSettings(),a=function(d,p,y,E){return new FA(d,p,y,E.host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,nw(E.experimentalLongPollingOptions),E.useFetchStreams,E.isUsingEmulator)}(i._databaseId,((e=i._app)===null||e===void 0?void 0:e.options.appId)||"",i._persistenceKey,o);i._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=o.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(i._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),i._firestoreClient=new iP(i._authCredentials,i._appCheckCredentials,i._queue,a,i._componentsProvider&&function(d){const p=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(p),_online:p}}(i._componentsProvider))}function dP(i,e){Ps("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=i._freezeSettings();return fP(i,ah.provider,{build:r=>new rP(r,t.cacheSizeBytes,void 0)}),Promise.resolve()}function fP(i,e,t){if((i=Hn(i,Ms))._firestoreClient||i._terminated)throw new ie(q.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(i._componentsProvider||i._getSettings().localCache)throw new ie(q.FAILED_PRECONDITION,"SDK cache is already specified.");i._componentsProvider={_online:e,_offline:t},sw(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new aa(dt.fromBase64String(e))}catch(t){throw new ie(q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new aa(dt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ie(q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tm{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ie(q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ie(q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ie(this._lat,e._lat)||Ie(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,o){if(r.length!==o.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==o[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pP=/^__.*__$/;class mP{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new zr(e,this.data,this.fieldMask,t,this.fieldTransforms):new ha(e,this.data,t,this.fieldTransforms)}}class ow{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new zr(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function aw(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw le(40011,{hc:i})}}class rm{constructor(e,t,r,o,a,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=o,a===void 0&&this.Pc(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get hc(){return this.settings.hc}Tc(e){return new rm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ic(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Tc({path:r,Ec:!1});return o.dc(e),o}Ac(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Tc({path:r,Ec:!1});return o.Pc(),o}Rc(e){return this.Tc({path:void 0,Ec:!0})}Vc(e){return lh(e,this.settings.methodName,this.settings.mc||!1,this.path,this.settings.fc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Pc(){if(this.path)for(let e=0;e<this.path.length;e++)this.dc(this.path.get(e))}dc(e){if(e.length===0)throw this.Vc("Document fields must not be empty");if(aw(this.hc)&&pP.test(e))throw this.Vc('Document fields cannot begin and end with "__"')}}class gP{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Nh(e)}gc(e,t,r,o=!1){return new rm({hc:e,methodName:t,fc:r,path:nt.emptyPath(),Ec:!1,mc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function im(i){const e=i._freezeSettings(),t=Nh(i._databaseId);return new gP(i._databaseId,!!e.ignoreUndefinedProperties,t)}function lw(i,e,t,r,o,a={}){const c=i.gc(a.merge||a.mergeFields?2:0,e,t,o);om("Data must be an object, but it was:",c,r);const d=uw(r,c);let p,y;if(a.merge)p=new rn(c.fieldMask),y=c.fieldTransforms;else if(a.mergeFields){const E=[];for(const w of a.mergeFields){const T=up(e,w,t);if(!c.contains(T))throw new ie(q.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);hw(E,T)||E.push(T)}p=new rn(E),y=c.fieldTransforms.filter(w=>p.covers(w.field))}else p=null,y=c.fieldTransforms;return new mP(new Bt(d),p,y)}class Uh extends Fh{_toFieldTransform(e){if(e.hc!==2)throw e.hc===1?e.Vc(`${this._methodName}() can only appear at the top level of your update data`):e.Vc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Uh}}class sm extends Fh{_toFieldTransform(e){return new YE(e.path,new na)}isEqual(e){return e instanceof sm}}function yP(i,e,t,r){const o=i.gc(1,e,t);om("Data must be an object, but it was:",o,r);const a=[],c=Bt.empty();bi(r,(p,y)=>{const E=am(e,p,t);y=on(y);const w=o.Ac(E);if(y instanceof Uh)a.push(E);else{const T=Bh(y,w);T!=null&&(a.push(E),c.set(E,T))}});const d=new rn(a);return new ow(c,d,o.fieldTransforms)}function _P(i,e,t,r,o,a){const c=i.gc(1,e,t),d=[up(e,r,t)],p=[o];if(a.length%2!=0)throw new ie(q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<a.length;T+=2)d.push(up(e,a[T])),p.push(a[T+1]);const y=[],E=Bt.empty();for(let T=d.length-1;T>=0;--T)if(!hw(y,d[T])){const U=d[T];let $=p[T];$=on($);const H=c.Ac(U);if($ instanceof Uh)y.push(U);else{const j=Bh($,H);j!=null&&(y.push(U),E.set(U,j))}}const w=new rn(y);return new ow(E,w,c.fieldTransforms)}function Bh(i,e){if(cw(i=on(i)))return om("Unsupported field value:",e,i),uw(i,e);if(i instanceof Fh)return function(r,o){if(!aw(o.hc))throw o.Vc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Vc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(o);a&&o.fieldTransforms.push(a)}(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.Ec&&e.hc!==4)throw e.Vc("Nested arrays are not supported");return function(r,o){const a=[];let c=0;for(const d of r){let p=Bh(d,o.Rc(c));p==null&&(p={nullValue:"NULL_VALUE"}),a.push(p),c++}return{arrayValue:{values:a}}}(i,e)}return function(r,o){if((r=on(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return s1(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=rt.fromDate(r);return{timestampValue:sa(o.serializer,a)}}if(r instanceof rt){const a=new rt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:sa(o.serializer,a)}}if(r instanceof tm)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof aa)return{bytesValue:rI(o.serializer,r._byteString)};if(r instanceof sn){const a=o.databaseId,c=r.firestore._databaseId;if(!c.isEqual(a))throw o.Vc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Op(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof nm)return function(c,d){return{mapValue:{fields:{[Ap]:{stringValue:Rp},[Jo]:{arrayValue:{values:c.toArray().map(y=>{if(typeof y!="number")throw d.Vc("VectorValues must only contain numeric values.");return kp(d.serializer,y)})}}}}}}(r,o);throw o.Vc(`Unsupported field value: ${Jp(r)}`)}(i,e)}function uw(i,e){const t={};return TE(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):bi(i,(r,o)=>{const a=Bh(o,e.Ic(r));a!=null&&(t[r]=a)}),{mapValue:{fields:t}}}function cw(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof rt||i instanceof tm||i instanceof aa||i instanceof sn||i instanceof Fh||i instanceof nm)}function om(i,e,t){if(!cw(t)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(t)){const r=Jp(t);throw r==="an object"?e.Vc(i+" a custom object"):e.Vc(i+" "+r)}}function up(i,e,t){if((e=on(e))instanceof Lh)return e._internalPath;if(typeof e=="string")return am(i,e);throw lh("Field path arguments must be of type string or ",i,!1,void 0,t)}const vP=new RegExp("[~\\*/\\[\\]]");function am(i,e,t){if(e.search(vP)>=0)throw lh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new Lh(...e.split("."))._internalPath}catch{throw lh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function lh(i,e,t,r,o){const a=r&&!r.isEmpty(),c=o!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(a||c)&&(p+=" (found",a&&(p+=` in field ${r}`),c&&(p+=` in document ${o}`),p+=")"),new ie(q.INVALID_ARGUMENT,d+i+p)}function hw(i,e){return i.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw{constructor(e,t,r,o,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new sn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new EP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(fw("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class EP extends dw{data(){return super.data()}}function fw(i,e){return typeof e=="string"?am(i,e):e instanceof Lh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IP(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new ie(q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class wP{convertValue(e,t="none"){switch(ki(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Je(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Or(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw le(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return bi(e,(o,a)=>{r[o]=this.convertValue(a,t)}),r}convertVectorValue(e){var t,r,o;const a=(o=(r=(t=e.fields)===null||t===void 0?void 0:t[Jo].arrayValue)===null||r===void 0?void 0:r.values)===null||o===void 0?void 0:o.map(c=>Je(c.doubleValue));return new nm(a)}convertGeoPoint(e){return new tm(Je(e.latitude),Je(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=wh(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Ul(e));default:return null}}convertTimestamp(e){const t=br(e);return new rt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Be.fromString(e);he(fI(r),9688,{name:e});const o=new Cs(r.get(1),r.get(3)),a=new ee(r.popFirst(5));return o.isEqual(t)||Ht(`Document ${a} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pw(i,e,t){let r;return r=i?i.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class mw extends dw{constructor(e,t,r,o,a,c){super(e,t,r,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Uc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(fw("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Uc extends mw{data(e={}){return super.data(e)}}class TP{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new El(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Uc(this._firestore,this._userDataWriter,r.key,r,new El(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ie(q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,a){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map(d=>{const p=new Uc(o._firestore,o._userDataWriter,d.doc.key,d.doc,new El(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);return d.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}})}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(d=>a||d.type!==3).map(d=>{const p=new Uc(o._firestore,o._userDataWriter,d.doc.key,d.doc,new El(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,E=-1;return d.type!==0&&(y=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),E=c.indexOf(d.doc.key)),{type:SP(d.type),doc:p,oldIndex:y,newIndex:E}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function SP(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return le(61501,{type:i})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AP(i){i=Hn(i,sn);const e=Hn(i.firestore,Ms);return aP(em(e),i._key).then(t=>PP(e,i,t))}class gw extends wP{constructor(e){super(),this.firestore=e}convertBytes(e){return new aa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new sn(this.firestore,null,t)}}function yw(i){i=Hn(i,Mh);const e=Hn(i.firestore,Ms),t=em(e),r=new gw(e);return IP(i._query),lP(t,i._query).then(o=>new TP(e,r,i,o))}function RP(i,e,t){i=Hn(i,sn);const r=Hn(i.firestore,Ms),o=pw(i.converter,e);return lm(r,[lw(im(r),"setDoc",i._key,o,i.converter!==null,t).toMutation(i._key,Gt.none())])}function _w(i,e,t,...r){i=Hn(i,sn);const o=Hn(i.firestore,Ms),a=im(o);let c;return c=typeof(e=on(e))=="string"||e instanceof Lh?_P(a,"updateDoc",i._key,e,t,r):yP(a,"updateDoc",i._key,e),lm(o,[c.toMutation(i._key,Gt.exists(!0))])}function vw(i,e){const t=Hn(i.firestore,Ms),r=tu(i),o=pw(i.converter,e);return lm(t,[lw(im(i.firestore),"addDoc",r._key,o,i.converter!==null,{}).toMutation(r._key,Gt.exists(!1))]).then(()=>r)}function lm(i,e){return function(r,o){const a=new lr;return r.asyncQueue.enqueueAndForget(async()=>QR(await oP(r),o,a)),a.promise}(em(i),e)}function PP(i,e,t){const r=t.docs.get(e._key),o=new gw(i);return new mw(i,o,e._key,r,new El(t.hasPendingWrites,t.fromCache),e.converter)}function ws(){return new sm("serverTimestamp")}(function(e,t=!0){(function(o){ca=o})(ua),Ho(new As("firestore",(r,{instanceIdentifier:o,options:a})=>{const c=r.getProvider("app").getImmediate(),d=new Ms(new JS(r.getProvider("auth-internal")),new tA(c,r.getProvider("app-check-internal")),function(y,E){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new ie(q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Cs(y.options.projectId,E)}(c,o),c);return a=Object.assign({useFetchStreams:t},a),d._setSettings(a),d},"PUBLIC").setMultipleInstances(!0)),Ai(Gy,Wy,e),Ai(Gy,Wy,"esm2017")})();function um(i,e){var t={};for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&e.indexOf(r)<0&&(t[r]=i[r]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(i);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(i,r[o])&&(t[r[o]]=i[r[o]]);return t}function Ew(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const CP=Ew,Iw=new Hl("auth","Firebase",Ew());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uh=new pp("@firebase/auth");function kP(i,...e){uh.logLevel<=ke.WARN&&uh.warn(`Auth (${ua}): ${i}`,...e)}function Bc(i,...e){uh.logLevel<=ke.ERROR&&uh.error(`Auth (${ua}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mr(i,...e){throw cm(i,...e)}function ur(i,...e){return cm(i,...e)}function ww(i,e,t){const r=Object.assign(Object.assign({},CP()),{[e]:t});return new Hl("auth","Firebase",r).create(e,{appName:i.name})}function Ts(i){return ww(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function cm(i,...e){if(typeof i!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=i.name),i._errorFactory.create(t,...r)}return Iw.create(i,...e)}function Ee(i,e,...t){if(!i)throw cm(e,...t)}function Dr(i){const e="INTERNAL ASSERTION FAILED: "+i;throw Bc(e),new Error(e)}function Lr(i,e){i||Dr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cp(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.href)||""}function xP(){return fv()==="http:"||fv()==="https:"}function fv(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DP(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(xP()||k0()||"connection"in navigator)?navigator.onLine:!0}function VP(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(e,t){this.shortDelay=e,this.longDelay=t,Lr(t>e,"Short delay should be less than long delay!"),this.isMobile=P0()||x0()}get(){return DP()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hm(i,e){Lr(i.emulator,"Emulator should always be set here");const{url:t}=i.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Dr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Dr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Dr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bP=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],OP=new nu(3e4,6e4);function dm(i,e){return i.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:i.tenantId}):e}async function fa(i,e,t,r,o={}){return Sw(i,o,async()=>{let a={},c={};r&&(e==="GET"?c=r:a={body:JSON.stringify(r)});const d=Gl(Object.assign({key:i.config.apiKey},c)).slice(1),p=await i._getAdditionalHeaders();p["Content-Type"]="application/json",i.languageCode&&(p["X-Firebase-Locale"]=i.languageCode);const y=Object.assign({method:e,headers:p},a);return C0()||(y.referrerPolicy="no-referrer"),i.emulatorConfig&&Kl(i.emulatorConfig.host)&&(y.credentials="include"),Tw.fetch()(await Aw(i,i.config.apiHost,t,d),y)})}async function Sw(i,e,t){i._canInitEmulator=!1;const r=Object.assign(Object.assign({},NP),e);try{const o=new LP(i),a=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const c=await a.json();if("needConfirmation"in c)throw Pc(i,"account-exists-with-different-credential",c);if(a.ok&&!("errorMessage"in c))return c;{const d=a.ok?c.errorMessage:c.error.message,[p,y]=d.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Pc(i,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw Pc(i,"email-already-in-use",c);if(p==="USER_DISABLED")throw Pc(i,"user-disabled",c);const E=r[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw ww(i,E,y);Mr(i,E)}}catch(o){if(o instanceof Ur)throw o;Mr(i,"network-request-failed",{message:String(o)})}}async function MP(i,e,t,r,o={}){const a=await fa(i,e,t,r,o);return"mfaPendingCredential"in a&&Mr(i,"multi-factor-auth-required",{_serverResponse:a}),a}async function Aw(i,e,t,r){const o=`${e}${t}?${r}`,a=i,c=a.config.emulator?hm(i.config,o):`${i.config.apiScheme}://${o}`;return bP.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(c).toString():c}class LP{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(ur(this.auth,"network-request-failed")),OP.get())})}}function Pc(i,e,t){const r={appName:i.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const o=ur(i,e,r);return o.customData._tokenResponse=t,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FP(i,e){return fa(i,"POST","/v1/accounts:delete",e)}async function ch(i,e){return fa(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xl(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function UP(i,e=!1){const t=on(i),r=await t.getIdToken(e),o=fm(r);Ee(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const a=typeof o.firebase=="object"?o.firebase:void 0,c=a==null?void 0:a.sign_in_provider;return{claims:o,token:r,authTime:xl(Vf(o.auth_time)),issuedAtTime:xl(Vf(o.iat)),expirationTime:xl(Vf(o.exp)),signInProvider:c||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Vf(i){return Number(i)*1e3}function fm(i){const[e,t,r]=i.split(".");if(e===void 0||t===void 0||r===void 0)return Bc("JWT malformed, contained fewer than 3 sections"),null;try{const o=Mv(t);return o?JSON.parse(o):(Bc("Failed to decode base64 JWT payload"),null)}catch(o){return Bc("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function pv(i){const e=fm(i);return Ee(e,"internal-error"),Ee(typeof e.exp<"u","internal-error"),Ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ql(i,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Ur&&BP(r)&&i.auth.currentUser===i&&await i.auth.signOut(),r}}function BP({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zP{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=xl(this.lastLoginAt),this.creationTime=xl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hh(i){var e;const t=i.auth,r=await i.getIdToken(),o=await ql(i,ch(t,{idToken:r}));Ee(o==null?void 0:o.users.length,t,"internal-error");const a=o.users[0];i._notifyReloadListener(a);const c=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?Rw(a.providerUserInfo):[],d=$P(i.providerData,c),p=i.isAnonymous,y=!(i.email&&a.passwordHash)&&!(d!=null&&d.length),E=p?y:!1,w={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:d,metadata:new hp(a.createdAt,a.lastLoginAt),isAnonymous:E};Object.assign(i,w)}async function jP(i){const e=on(i);await hh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function $P(i,e){return[...i.filter(r=>!e.some(o=>o.providerId===r.providerId)),...e]}function Rw(i){return i.map(e=>{var{providerId:t}=e,r=um(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qP(i,e){const t=await Sw(i,{},async()=>{const r=Gl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:a}=i.config,c=await Aw(i,o,"/v1/token",`key=${a}`),d=await i._getAdditionalHeaders();return d["Content-Type"]="application/x-www-form-urlencoded",Tw.fetch()(c,{method:"POST",headers:d,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function KP(i,e){return fa(i,"POST","/v2/accounts:revokeToken",dm(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ee(e.idToken,"internal-error"),Ee(typeof e.idToken<"u","internal-error"),Ee(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):pv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ee(e.length!==0,"internal-error");const t=pv(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:o,expiresIn:a}=await qP(e,t);this.updateTokensAndExpiration(r,o,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:o,expirationTime:a}=t,c=new $o;return r&&(Ee(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),o&&(Ee(typeof o=="string","internal-error",{appName:e}),c.accessToken=o),a&&(Ee(typeof a=="number","internal-error",{appName:e}),c.expirationTime=a),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new $o,this.toJSON())}_performRefresh(){return Dr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gi(i,e){Ee(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class Kn{constructor(e){var{uid:t,auth:r,stsTokenManager:o}=e,a=um(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new zP(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new hp(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await ql(this,this.stsTokenManager.getToken(this.auth,e));return Ee(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return UP(this,e)}reload(){return jP(this)}_assign(e){this!==e&&(Ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Kn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await hh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(sr(this.auth.app))return Promise.reject(Ts(this.auth));const e=await this.getIdToken();return await ql(this,FP(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,o,a,c,d,p,y,E;const w=(r=t.displayName)!==null&&r!==void 0?r:void 0,T=(o=t.email)!==null&&o!==void 0?o:void 0,U=(a=t.phoneNumber)!==null&&a!==void 0?a:void 0,$=(c=t.photoURL)!==null&&c!==void 0?c:void 0,H=(d=t.tenantId)!==null&&d!==void 0?d:void 0,j=(p=t._redirectEventId)!==null&&p!==void 0?p:void 0,ve=(y=t.createdAt)!==null&&y!==void 0?y:void 0,se=(E=t.lastLoginAt)!==null&&E!==void 0?E:void 0,{uid:te,emailVerified:pe,isAnonymous:Se,providerData:me,stsTokenManager:k}=t;Ee(te&&k,e,"internal-error");const S=$o.fromJSON(this.name,k);Ee(typeof te=="string",e,"internal-error"),gi(w,e.name),gi(T,e.name),Ee(typeof pe=="boolean",e,"internal-error"),Ee(typeof Se=="boolean",e,"internal-error"),gi(U,e.name),gi($,e.name),gi(H,e.name),gi(j,e.name),gi(ve,e.name),gi(se,e.name);const P=new Kn({uid:te,auth:e,email:T,emailVerified:pe,displayName:w,isAnonymous:Se,photoURL:$,phoneNumber:U,tenantId:H,stsTokenManager:S,createdAt:ve,lastLoginAt:se});return me&&Array.isArray(me)&&(P.providerData=me.map(x=>Object.assign({},x))),j&&(P._redirectEventId=j),P}static async _fromIdTokenResponse(e,t,r=!1){const o=new $o;o.updateFromServerResponse(t);const a=new Kn({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:r});return await hh(a),a}static async _fromGetAccountInfoResponse(e,t,r){const o=t.users[0];Ee(o.localId!==void 0,"internal-error");const a=o.providerUserInfo!==void 0?Rw(o.providerUserInfo):[],c=!(o.email&&o.passwordHash)&&!(a!=null&&a.length),d=new $o;d.updateFromIdToken(r);const p=new Kn({uid:o.localId,auth:e,stsTokenManager:d,isAnonymous:c}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new hp(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(a!=null&&a.length)};return Object.assign(p,y),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mv=new Map;function Vr(i){Lr(i instanceof Function,"Expected a class definition");let e=mv.get(i);return e?(Lr(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,mv.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Pw.type="NONE";const gv=Pw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zc(i,e,t){return`firebase:${i}:${e}:${t}`}class qo{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:o,name:a}=this.auth;this.fullUserKey=zc(this.userKey,o.apiKey,a),this.fullPersistenceKey=zc("persistence",o.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await ch(this.auth,{idToken:e}).catch(()=>{});return t?Kn._fromGetAccountInfoResponse(this.auth,t,e):null}return Kn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new qo(Vr(gv),e,r);const o=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let a=o[0]||Vr(gv);const c=zc(r,e.config.apiKey,e.name);let d=null;for(const y of t)try{const E=await y._get(c);if(E){let w;if(typeof E=="string"){const T=await ch(e,{idToken:E}).catch(()=>{});if(!T)break;w=await Kn._fromGetAccountInfoResponse(e,T,E)}else w=Kn._fromJSON(e,E);y!==a&&(d=w),a=y;break}}catch{}const p=o.filter(y=>y._shouldAllowMigration);return!a._shouldAllowMigration||!p.length?new qo(a,e,r):(a=p[0],d&&await a._set(c,d.toJSON()),await Promise.all(t.map(async y=>{if(y!==a)try{await y._remove(c)}catch{}})),new qo(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yv(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Dw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Cw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Nw(e))return"Blackberry";if(bw(e))return"Webos";if(kw(e))return"Safari";if((e.includes("chrome/")||xw(e))&&!e.includes("edge/"))return"Chrome";if(Vw(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=i.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Cw(i=_t()){return/firefox\//i.test(i)}function kw(i=_t()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function xw(i=_t()){return/crios\//i.test(i)}function Dw(i=_t()){return/iemobile/i.test(i)}function Vw(i=_t()){return/android/i.test(i)}function Nw(i=_t()){return/blackberry/i.test(i)}function bw(i=_t()){return/webos/i.test(i)}function pm(i=_t()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function HP(i=_t()){var e;return pm(i)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function GP(){return D0()&&document.documentMode===10}function Ow(i=_t()){return pm(i)||Vw(i)||bw(i)||Nw(i)||/windows phone/i.test(i)||Dw(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mw(i,e=[]){let t;switch(i){case"Browser":t=yv(_t());break;case"Worker":t=`${yv(_t())}-${i}`;break;default:t=i}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ua}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WP{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((c,d)=>{try{const p=e(a);c(p)}catch(p){d(p)}});r.onAbort=t,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QP(i,e={}){return fa(i,"GET","/v2/passwordPolicy",dm(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YP=6;class XP{constructor(e){var t,r,o,a;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=c.minPasswordLength)!==null&&t!==void 0?t:YP,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,o,a,c,d;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(t=p.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),p.isValid&&(p.isValid=(r=p.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),p.isValid&&(p.isValid=(o=p.containsLowercaseLetter)!==null&&o!==void 0?o:!0),p.isValid&&(p.isValid=(a=p.containsUppercaseLetter)!==null&&a!==void 0?a:!0),p.isValid&&(p.isValid=(c=p.containsNumericCharacter)!==null&&c!==void 0?c:!0),p.isValid&&(p.isValid=(d=p.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),p}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let o=0;o<e.length;o++)r=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,o,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JP{constructor(e,t,r,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new _v(this),this.idTokenSubscription=new _v(this),this.beforeStateQueue=new WP(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Iw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Vr(t)),this._initializationPromise=this.queue(async()=>{var r,o,a;if(!this._deleted&&(this.persistenceManager=await qo.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await ch(this,{idToken:e}),r=await Kn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(sr(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let o=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,d=o==null?void 0:o._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===d)&&(p!=null&&p.user)&&(o=p.user,a=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(o)}catch(c){o=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Ee(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await hh(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=VP()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(sr(this.app))return Promise.reject(Ts(this));const t=e?on(e):null;return t&&Ee(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return sr(this.app)?Promise.reject(Ts(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return sr(this.app)?Promise.reject(Ts(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Vr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await QP(this),t=new XP(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Hl("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await KP(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Vr(e)||this._popupRedirectResolver;Ee(t,this,"argument-error"),this.redirectPersistenceManager=await qo.create(this,[Vr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,o){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ee(d,this,"internal-error"),d.then(()=>{c||a(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,r,o);return()=>{c=!0,p()}}else{const p=e.addObserver(t);return()=>{c=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Mw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;if(sr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&kP(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function mm(i){return on(i)}class _v{constructor(e){this.auth=e,this.observer=null,this.addObserver=L0(t=>this.observer=t)}get next(){return Ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ZP(i){gm=i}function eC(i){return gm.loadJS(i)}function tC(){return gm.gapiScript}function nC(i){return`__${i}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rC(i,e){const t=gp(i,"auth");if(t.isInitialized()){const o=t.getImmediate(),a=t.getOptions();if(Ss(a,e??{}))return o;Mr(o,"already-initialized")}return t.initialize({options:e})}function iC(i,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Vr);e!=null&&e.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function sC(i,e,t){const r=mm(i);Ee(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const o=!1,a=Lw(e),{host:c,port:d}=oC(e),p=d===null?"":`:${d}`,y={url:`${a}//${c}${p}/`},E=Object.freeze({host:c,port:d,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!r._canInitEmulator){Ee(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ee(Ss(y,r.config.emulator)&&Ss(E,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=y,r.emulatorConfig=E,r.settings.appVerificationDisabledForTesting=!0,Kl(c)?(gh("Auth",!0),zv(`${a}//${c}${p}`)):aC()}function Lw(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function oC(i){const e=Lw(i),t=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const a=o[1];return{host:a,port:vv(r.substr(a.length+1))}}else{const[a,c]=r.split(":");return{host:a,port:vv(c)}}}function vv(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function aC(){function i(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Dr("not implemented")}_getIdTokenResponse(e){return Dr("not implemented")}_linkToIdToken(e,t){return Dr("not implemented")}_getReauthenticationResolver(e){return Dr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ko(i,e){return MP(i,"POST","/v1/accounts:signInWithIdp",dm(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lC="http://localhost";class Fr extends Fw{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Fr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Mr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:o}=t,a=um(t,["providerId","signInMethod"]);if(!r||!o)return null;const c=new Fr(r,o);return c.idToken=a.idToken||void 0,c.accessToken=a.accessToken||void 0,c.secret=a.secret,c.nonce=a.nonce,c.pendingToken=a.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Ko(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Ko(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ko(e,t)}buildRequest(){const e={requestUri:lC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Gl(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa extends Uw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Dl extends pa{static credentialFromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;return Ee("providerId"in t&&"signInMethod"in t,"argument-error"),Fr._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return Ee(e.idToken||e.accessToken,"argument-error"),Fr._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Dl.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Dl.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r,oauthTokenSecret:o,pendingToken:a,nonce:c,providerId:d}=e;if(!r&&!o&&!t&&!a||!d)return null;try{return new Dl(d)._credential({idToken:t,accessToken:r,nonce:c,pendingToken:a})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i extends pa{constructor(){super("facebook.com")}static credential(e){return Fr._fromParams({providerId:_i.PROVIDER_ID,signInMethod:_i.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _i.credentialFromTaggedObject(e)}static credentialFromError(e){return _i.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _i.credential(e.oauthAccessToken)}catch{return null}}}_i.FACEBOOK_SIGN_IN_METHOD="facebook.com";_i.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi extends pa{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Fr._fromParams({providerId:vi.PROVIDER_ID,signInMethod:vi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return vi.credentialFromTaggedObject(e)}static credentialFromError(e){return vi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return vi.credential(t,r)}catch{return null}}}vi.GOOGLE_SIGN_IN_METHOD="google.com";vi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei extends pa{constructor(){super("github.com")}static credential(e){return Fr._fromParams({providerId:Ei.PROVIDER_ID,signInMethod:Ei.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ei.credentialFromTaggedObject(e)}static credentialFromError(e){return Ei.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ei.credential(e.oauthAccessToken)}catch{return null}}}Ei.GITHUB_SIGN_IN_METHOD="github.com";Ei.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii extends pa{constructor(){super("twitter.com")}static credential(e,t){return Fr._fromParams({providerId:Ii.PROVIDER_ID,signInMethod:Ii.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ii.credentialFromTaggedObject(e)}static credentialFromError(e){return Ii.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Ii.credential(t,r)}catch{return null}}}Ii.TWITTER_SIGN_IN_METHOD="twitter.com";Ii.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,o=!1){const a=await Kn._fromIdTokenResponse(e,r,o),c=Ev(r);return new la({user:a,providerId:c,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const o=Ev(r);return new la({user:e,providerId:o,_tokenResponse:r,operationType:t})}}function Ev(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh extends Ur{constructor(e,t,r,o){var a;super(t.code,t.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,dh.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,o){return new dh(e,t,r,o)}}function Bw(i,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(i):t._getIdTokenResponse(i)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?dh._fromErrorAndOperation(i,a,e,r):a})}async function uC(i,e,t=!1){const r=await ql(i,e._linkToIdToken(i.auth,await i.getIdToken()),t);return la._forOperation(i,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cC(i,e,t=!1){const{auth:r}=i;if(sr(r.app))return Promise.reject(Ts(r));const o="reauthenticate";try{const a=await ql(i,Bw(r,o,e,i),t);Ee(a.idToken,r,"internal-error");const c=fm(a.idToken);Ee(c,r,"internal-error");const{sub:d}=c;return Ee(i.uid===d,r,"user-mismatch"),la._forOperation(i,o,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Mr(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hC(i,e,t=!1){if(sr(i.app))return Promise.reject(Ts(i));const r="signIn",o=await Bw(i,r,e),a=await la._fromIdTokenResponse(i,r,o);return t||await i._updateCurrentUser(a.user),a}function dC(i,e,t,r){return on(i).onIdTokenChanged(e,t,r)}function fC(i,e,t){return on(i).beforeAuthStateChanged(e,t)}const fh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zw{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(fh,"1"),this.storage.removeItem(fh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pC=1e3,mC=10;class jw extends zw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Ow(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),o=this.localCache[t];r!==o&&e(t,o,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,p)=>{this.notifyListeners(c,p)});return}const r=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const c=this.storage.getItem(r);!t&&this.localCache[r]===c||this.notifyListeners(r,c)},a=this.storage.getItem(r);GP()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,mC):o()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},pC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}jw.type="LOCAL";const gC=jw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w extends zw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}$w.type="SESSION";const qw=$w;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yC(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const r=new zh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:o,data:a}=t.data,c=this.handlersMap[o];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const d=Array.from(c).map(async y=>y(t.origin,a)),p=await yC(d);t.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}zh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ym(i="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return i+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let a,c;return new Promise((d,p)=>{const y=ym("",20);o.port1.start();const E=setTimeout(()=>{p(new Error("unsupported_event"))},r);c={messageChannel:o,onMessage(w){const T=w;if(T.data.eventId===y)switch(T.data.status){case"ack":clearTimeout(E),a=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),d(T.data.response);break;default:clearTimeout(E),clearTimeout(a),p(new Error("invalid_response"));break}}},this.handlers.add(c),o.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[o.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cr(){return window}function vC(i){cr().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kw(){return typeof cr().WorkerGlobalScope<"u"&&typeof cr().importScripts=="function"}async function EC(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function IC(){var i;return((i=navigator==null?void 0:navigator.serviceWorker)===null||i===void 0?void 0:i.controller)||null}function wC(){return Kw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hw="firebaseLocalStorageDb",TC=1,ph="firebaseLocalStorage",Gw="fbase_key";class ru{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function jh(i,e){return i.transaction([ph],e?"readwrite":"readonly").objectStore(ph)}function SC(){const i=indexedDB.deleteDatabase(Hw);return new ru(i).toPromise()}function dp(){const i=indexedDB.open(Hw,TC);return new Promise((e,t)=>{i.addEventListener("error",()=>{t(i.error)}),i.addEventListener("upgradeneeded",()=>{const r=i.result;try{r.createObjectStore(ph,{keyPath:Gw})}catch(o){t(o)}}),i.addEventListener("success",async()=>{const r=i.result;r.objectStoreNames.contains(ph)?e(r):(r.close(),await SC(),e(await dp()))})})}async function Iv(i,e,t){const r=jh(i,!0).put({[Gw]:e,value:t});return new ru(r).toPromise()}async function AC(i,e){const t=jh(i,!1).get(e),r=await new ru(t).toPromise();return r===void 0?null:r.value}function wv(i,e){const t=jh(i,!0).delete(e);return new ru(t).toPromise()}const RC=800,PC=3;class Ww{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await dp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>PC)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Kw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=zh._getInstance(wC()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await EC(),!this.activeServiceWorker)return;this.sender=new _C(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||IC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await dp();return await Iv(e,fh,"1"),await wv(e,fh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>Iv(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>AC(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>wv(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const a=jh(o,!1).getAll();return new ru(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:o,value:a}of e)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(a)&&(this.notifyListeners(o,a),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),RC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Ww.type="LOCAL";const CC=Ww;new nu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kC(i,e){return e?Vr(e):(Ee(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m extends Fw{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ko(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ko(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ko(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function xC(i){return hC(i.auth,new _m(i),i.bypassAuthState)}function DC(i){const{auth:e,user:t}=i;return Ee(t,e,"internal-error"),cC(t,new _m(i),i.bypassAuthState)}async function VC(i){const{auth:e,user:t}=i;return Ee(t,e,"internal-error"),uC(t,new _m(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{constructor(e,t,r,o,a=!1){this.auth=e,this.resolver=r,this.user=o,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:o,tenantId:a,error:c,type:d}=e;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(p))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return xC;case"linkViaPopup":case"linkViaRedirect":return VC;case"reauthViaPopup":case"reauthViaRedirect":return DC;default:Mr(this.auth,"internal-error")}}resolve(e){Lr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Lr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NC=new nu(2e3,1e4);class zo extends Qw{constructor(e,t,r,o,a){super(e,t,o,a),this.provider=r,this.authWindow=null,this.pollId=null,zo.currentPopupAction&&zo.currentPopupAction.cancel(),zo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ee(e,this.auth,"internal-error"),e}async onExecution(){Lr(this.filter.length===1,"Popup operations only handle one event");const e=ym();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ur(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ur(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,zo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ur(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,NC.get())};e()}}zo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bC="pendingRedirect",jc=new Map;class OC extends Qw{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=jc.get(this.auth._key());if(!e){try{const r=await MC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}jc.set(this.auth._key(),e)}return this.bypassAuthState||jc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function MC(i,e){const t=UC(e),r=FC(i);if(!await r._isAvailable())return!1;const o=await r._get(t)==="true";return await r._remove(t),o}function LC(i,e){jc.set(i._key(),e)}function FC(i){return Vr(i._redirectPersistence)}function UC(i){return zc(bC,i.config.apiKey,i.name)}async function BC(i,e,t=!1){if(sr(i.app))return Promise.reject(Ts(i));const r=mm(i),o=kC(r,e),c=await new OC(r,o,t).execute();return c&&!t&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zC=10*60*1e3;class jC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!$C(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!Yw(e)){const o=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(ur(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=zC&&this.cachedEventUids.clear(),this.cachedEventUids.has(Tv(e))}saveEventToCache(e){this.cachedEventUids.add(Tv(e)),this.lastProcessedEventTime=Date.now()}}function Tv(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function Yw({type:i,error:e}){return i==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function $C(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Yw(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qC(i,e={}){return fa(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,HC=/^https?/;async function GC(i){if(i.config.emulator)return;const{authorizedDomains:e}=await qC(i);for(const t of e)try{if(WC(t))return}catch{}Mr(i,"unauthorized-domain")}function WC(i){const e=cp(),{protocol:t,hostname:r}=new URL(e);if(i.startsWith("chrome-extension://")){const c=new URL(i);return c.hostname===""&&r===""?t==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===r}if(!HC.test(t))return!1;if(KC.test(i))return r===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QC=new nu(3e4,6e4);function Sv(){const i=cr().___jsl;if(i!=null&&i.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let t=0;t<i.CP.length;t++)i.CP[t]=null}}function YC(i){return new Promise((e,t)=>{var r,o,a;function c(){Sv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Sv(),t(ur(i,"network-request-failed"))},timeout:QC.get()})}if(!((o=(r=cr().gapi)===null||r===void 0?void 0:r.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((a=cr().gapi)===null||a===void 0)&&a.load)c();else{const d=nC("iframefcb");return cr()[d]=()=>{gapi.load?c():t(ur(i,"network-request-failed"))},eC(`${tC()}?onload=${d}`).catch(p=>t(p))}}).catch(e=>{throw $c=null,e})}let $c=null;function XC(i){return $c=$c||YC(i),$c}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JC=new nu(5e3,15e3),ZC="__/auth/iframe",ek="emulator/auth/iframe",tk={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},nk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function rk(i){const e=i.config;Ee(e.authDomain,i,"auth-domain-config-required");const t=e.emulator?hm(e,ek):`https://${i.config.authDomain}/${ZC}`,r={apiKey:e.apiKey,appName:i.name,v:ua},o=nk.get(i.config.apiHost);o&&(r.eid=o);const a=i._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${Gl(r).slice(1)}`}async function ik(i){const e=await XC(i),t=cr().gapi;return Ee(t,i,"internal-error"),e.open({where:document.body,url:rk(i),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:tk,dontclear:!0},r=>new Promise(async(o,a)=>{await r.restyle({setHideOnLeave:!1});const c=ur(i,"network-request-failed"),d=cr().setTimeout(()=>{a(c)},JC.get());function p(){cr().clearTimeout(d),o(r)}r.ping(p).then(p,()=>{a(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sk={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ok=500,ak=600,lk="_blank",uk="http://localhost";class Av{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function ck(i,e,t,r=ok,o=ak){const a=Math.max((window.screen.availHeight-o)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const p=Object.assign(Object.assign({},sk),{width:r.toString(),height:o.toString(),top:a,left:c}),y=_t().toLowerCase();t&&(d=xw(y)?lk:t),Cw(y)&&(e=e||uk,p.scrollbars="yes");const E=Object.entries(p).reduce((T,[U,$])=>`${T}${U}=${$},`,"");if(HP(y)&&d!=="_self")return hk(e||"",d),new Av(null);const w=window.open(e||"",d,E);Ee(w,i,"popup-blocked");try{w.focus()}catch{}return new Av(w)}function hk(i,e){const t=document.createElement("a");t.href=i,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dk="__/auth/handler",fk="emulator/auth/handler",pk=encodeURIComponent("fac");async function Rv(i,e,t,r,o,a){Ee(i.config.authDomain,i,"auth-domain-config-required"),Ee(i.config.apiKey,i,"invalid-api-key");const c={apiKey:i.config.apiKey,appName:i.name,authType:t,redirectUrl:r,v:ua,eventId:o};if(e instanceof Uw){e.setDefaultLanguage(i.languageCode),c.providerId=e.providerId||"",M0(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,w]of Object.entries({}))c[E]=w}if(e instanceof pa){const E=e.getScopes().filter(w=>w!=="");E.length>0&&(c.scopes=E.join(","))}i.tenantId&&(c.tid=i.tenantId);const d=c;for(const E of Object.keys(d))d[E]===void 0&&delete d[E];const p=await i._getAppCheckToken(),y=p?`#${pk}=${encodeURIComponent(p)}`:"";return`${mk(i)}?${Gl(d).slice(1)}${y}`}function mk({config:i}){return i.emulator?hm(i,fk):`https://${i.authDomain}/${dk}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nf="webStorageSupport";class gk{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=qw,this._completeRedirectFn=BC,this._overrideRedirectResult=LC}async _openPopup(e,t,r,o){var a;Lr((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const c=await Rv(e,t,r,cp(),o);return ck(e,c,ym())}async _openRedirect(e,t,r,o){await this._originValidation(e);const a=await Rv(e,t,r,cp(),o);return vC(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:a}=this.eventManagers[t];return o?Promise.resolve(o):(Lr(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await ik(e),r=new jC(e);return t.register("authEvent",o=>(Ee(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Nf,{type:Nf},o=>{var a;const c=(a=o==null?void 0:o[0])===null||a===void 0?void 0:a[Nf];c!==void 0&&t(!!c),Mr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=GC(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Ow()||kw()||pm()}}const yk=gk;var Pv="@firebase/auth",Cv="1.10.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _k{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vk(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Ek(i){Ho(new As("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=r.options;Ee(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const p={apiKey:c,authDomain:d,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Mw(i)},y=new JP(r,o,a,p);return iC(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Ho(new As("auth-internal",e=>{const t=mm(e.getProvider("auth").getImmediate());return(r=>new _k(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ai(Pv,Cv,vk(i)),Ai(Pv,Cv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ik=5*60,wk=Bv("authIdTokenMaxAge")||Ik;let kv=null;const Tk=i=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>wk)return;const o=t==null?void 0:t.token;kv!==o&&(kv=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function Sk(i=Qv()){const e=gp(i,"auth");if(e.isInitialized())return e.getImmediate();const t=rC(i,{popupRedirectResolver:yk,persistence:[CC,gC,qw]}),r=Bv("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const c=Tk(a.toString());fC(t,c,()=>c(t.currentUser)),dC(t,d=>c(d))}}const o=Fv("auth");return o?sC(t,`http://${o}`):gh("Auth",!1),t}function Ak(){var i,e;return(e=(i=document.getElementsByTagName("head"))===null||i===void 0?void 0:i[0])!==null&&e!==void 0?e:document}ZP({loadJS(i){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",i),r.onload=e,r.onerror=o=>{const a=ur("internal-error");a.customData=o,t(a)},r.type="text/javascript",r.charset="UTF-8",Ak().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Ek("Browser");const Rk={apiKey:"AIzaSyC-r61KmqztgvSzQ71Li3Vbdv1jPh8gbz8",authDomain:"keyline-repair-tracker-db.firebaseapp.com",projectId:"keyline-repair-tracker-db",storageBucket:"keyline-repair-tracker-db.firebasestorage.app",messagingSenderId:"879791566781",appId:"1:879791566781:web:b352e1dc453922655fecd4"},Xw=Wv(Rk),Oi=hP(Xw);Sk(Xw);try{dP(Oi).then(()=>{console.log("Offline persistence enabled")}).catch(i=>{i.code==="failed-precondition"?console.warn("Multiple tabs open, persistence can only be enabled in one tab at a time."):i.code==="unimplemented"&&console.warn("The current browser does not support offline persistence.")})}catch(i){console.error("Firebase persistence error:",i)}const Pk=new Dl("microsoft.com");Pk.setCustomParameters({tenant:"485c2d3a-dc01-4d58-8888-b792620a1ee7",scopes:["user.read"]});const Jw=Zp(Oi,"requests"),xv=async i=>{try{if(i.docId){const e=tu(Oi,"requests",i.docId),t={...i,updatedAt:ws()};return delete t.docId,t.isModified&&delete t.isModified,await _w(e,t),console.log("Request updated:",i.docId),i}else{const e={...i,createdAt:ws(),updatedAt:ws()};e.isModified&&delete e.isModified;const t=await vw(Jw,e);return console.log("Request created with ID:",t.id),{...i,docId:t.id}}}catch(e){throw console.error("Error saving request:",e),e}},Ck=async()=>{try{const i=await yw(Jw);return console.log(`Loaded ${i.docs.length} requests`),i.docs.map(e=>({...e.data(),docId:e.id}))}catch(i){throw console.error("Error loading requests:",i),i}},Zw=Zp(Oi,"equipment"),Dv=async i=>{try{if(i.docId){const e=tu(Oi,"equipment",i.docId),t={...i,updatedAt:ws()};return delete t.docId,t.isModified&&delete t.isModified,await _w(e,t),console.log("Equipment updated:",i.docId),i}else{const e={...i,createdAt:ws(),updatedAt:ws()};e.isModified&&delete e.isModified;const t=await vw(Zw,e);return console.log("Equipment created with ID:",t.id),{...i,docId:t.id}}}catch(e){throw console.error("Error saving equipment:",e),e}},kk=async()=>{try{const i=await yw(Zw);return console.log(`Loaded ${i.docs.length} equipment items`),i.docs.map(e=>({...e.data(),docId:e.id}))}catch(i){throw console.error("Error loading equipment:",i),i}};Zp(Oi,"divisions");const eT="divisions-list",Vv=async i=>{try{return await RP(tu(Oi,"divisions",eT),{list:i,updatedAt:ws()}),console.log("Divisions saved"),i}catch(e){throw console.error("Error saving divisions:",e),e}},xk=async()=>{try{const i=tu(Oi,"divisions",eT),e=await AP(i);return e.exists()?(console.log("Divisions loaded"),e.data().list):(console.log("No divisions found, creating default document"),[])}catch(i){throw console.error("Error loading divisions:",i),i}},Dk=()=>{ml.useEffect(()=>{console.log("Environment variables check:",{clientId:!0,tenantId:!0}),i();const e=msalInstance.getAllAccounts();e.length>0&&(setUser({name:e[0].name,email:e[0].username,role:"user"}),setIsAuthenticated(!0),setIsKioskMode(!1)),setIsLoading(!1)},[]);const i=async()=>{try{setIsLoading(!0);const e=await xk();e&&e.length>0?setDivisions(e):await Vv(divisions);const t=await Ck();if(t&&t.length>0)setRequests(t);else{for(const o of initialRequests)await xv(o);setRequests(initialRequests)}const r=await kk();if(r&&r.length>0)setEquipment(r);else{for(const o of initialEquipment)await Dv(o);setEquipment(initialEquipment)}}catch(e){console.error("Error loading data from Firebase:",e),setRequests(initialRequests),setEquipment(initialEquipment)}finally{setIsLoading(!1)}};ml.useEffect(()=>{(async()=>{if(requests.length>0&&!isLoading)try{for(const t of requests)if(!t.docId||t.isModified){const r={...t,isModified:!1};await xv(r)}}catch(t){console.error("Error saving requests to Firebase:",t)}})()},[requests]),ml.useEffect(()=>{(async()=>{if(equipment.length>0&&!isLoading)try{for(const t of equipment)if(!t.docId||t.isModified){const r={...t,isModified:!1};await Dv(r)}}catch(t){console.error("Error saving equipment to Firebase:",t)}})()},[equipment]),ml.useEffect(()=>{(async()=>{if(!isLoading)try{await Vv(divisions)}catch(t){console.error("Error saving divisions to Firebase:",t)}})()},[divisions])},Vk=p0.createRoot(document.getElementById("root"));Vk.render(ky.jsx(a0.StrictMode,{children:ky.jsx(Dk,{})}));
